â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  HEARSTAI - CODE COMPLET
  Date: 2025-11-18 06:15:10
  Projet: HearstAI Claude CI/CD Cockpit
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STRUCTURE DU PROJET:
====================

HearstAI/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ server.js
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ db.js
â”‚   â”‚   â””â”€â”€ schema.sql
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ Project.js
â”‚   â”‚   â”œâ”€â”€ Job.js
â”‚   â”‚   â””â”€â”€ Version.js
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ projects.js
â”‚   â”‚   â”œâ”€â”€ jobs.js
â”‚   â”‚   â”œâ”€â”€ versions.js
â”‚   â”‚   â”œâ”€â”€ prompts.js
â”‚   â”‚   â”œâ”€â”€ logs.js
â”‚   â”‚   â”œâ”€â”€ stats.js
â”‚   â”‚   â””â”€â”€ diff.js
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ ClaudeAPIService.js
â”‚       â”œâ”€â”€ FileStorageService.js
â”‚       â””â”€â”€ JobExecutorService.js
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ main.css
â”‚   â”‚   â”œâ”€â”€ components.css
â”‚   â”‚   â”œâ”€â”€ cockpit.css
â”‚   â”‚   â””â”€â”€ projections.css
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ app.js
â”‚       â”œâ”€â”€ api.js
â”‚       â”œâ”€â”€ config.js
â”‚       â”œâ”€â”€ theme.js
â”‚       â”œâ”€â”€ export.js
â”‚       â”œâ”€â”€ icons.js
â”‚       â”œâ”€â”€ modals.js
â”‚       â”œâ”€â”€ projections.js
â”‚       â”œâ”€â”€ cockpit.js
â”‚       â”œâ”€â”€ settings.js
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ modal.js
â”‚       â”‚   â””â”€â”€ notification.js
â”‚       â””â”€â”€ views/
â”‚           â”œâ”€â”€ dashboard.js
â”‚           â”œâ”€â”€ cockpit.js
â”‚           â”œâ”€â”€ cockpit-sections.js
â”‚           â”œâ”€â”€ projects.js
â”‚           â”œâ”€â”€ projects-sections.js
â”‚           â”œâ”€â”€ jobs.js
â”‚           â”œâ”€â”€ versions.js
â”‚           â”œâ”€â”€ prompts.js
â”‚           â”œâ”€â”€ logs.js
â”‚           â””â”€â”€ settings.js
â”œâ”€â”€ dev-server.js
â””â”€â”€ package.json

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
INSTRUCTIONS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. CrÃ©er le dossier principal: HearstAI/
2. CrÃ©er TOUS les sous-dossiers listÃ©s ci-dessus
3. Copier chaque bloc de code ci-dessous dans le bon fichier
4. Installer les dÃ©pendances: cd backend && npm install
5. Lancer: node backend/server.js (backend) + node dev-server.js (frontend)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/server.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const express = require('express');
const cors = require('cors');
const path = require('path');
const dbManager = require('./database/db');

const app = express();
const PORT = process.env.PORT || 3001;

// Initialize database
try {
    dbManager.initialize();
} catch (error) {
    console.error('âŒ Failed to initialize database:', error);
    // Continue anyway - routes will handle errors
}

// Middleware
app.use(cors());
app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ extended: true, limit: '10mb' }));

app.use((req, res, next) => {
    console.log(`${req.method} ${req.path}`);
    next();
});

app.use(express.static(path.join(__dirname, '../frontend')));

// Health check
app.get('/api/health', (req, res) => {
    res.json({ 
        status: 'ok', 
        timestamp: new Date().toISOString(),
        environment: process.env.VERCEL ? 'vercel-serverless' : 'local'
    });
});

// API Routes
const projectsRouter = require('./routes/projects');
const jobsRouter = require('./routes/jobs');
const versionsRouter = require('./routes/versions');
const promptsRouter = require('./routes/prompts');
const logsRouter = require('./routes/logs');
const statsRouter = require('./routes/stats');

app.use('/api/projects', projectsRouter);
app.use('/api/jobs', jobsRouter);
app.use('/api/versions', versionsRouter);
app.use('/api/prompts', promptsRouter);
app.use('/api/logs', logsRouter);
app.use('/api/stats', statsRouter);

// 404 handler for API routes
app.use('/api/*', (req, res) => {
    res.status(404).json({ 
        error: 'Not Found',
        message: `Route ${req.originalUrl} not found`
    });
});

// Global error handler
app.use((err, req, res, next) => {
    console.error('Error:', err);
    res.status(err.status || 500).json({
        error: err.message || 'Internal Server Error'
    });
});

// Start server (only if not in Vercel serverless environment)
if (require.main === module) {
    app.listen(PORT, () => {
        console.log('');
        console.log('ðŸš€ Claude CI/CD Cockpit - Backend Server');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log(`âœ… Server running on: http://localhost:${PORT}`);
        console.log(`âœ… API available at: http://localhost:${PORT}/api`);
        console.log('');
    });
}

module.exports = app;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/package.json
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

{
  "name": "claude-cicd-backend",
  "version": "1.0.0",
  "description": "Claude CI/CD Cockpit - Backend API",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "claude",
    "cicd",
    "cockpit",
    "api"
  ],
  "author": "",
  "license": "MIT",
  "dependencies": {
    "better-sqlite3": "^9.2.2",
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "multer": "^2.0.2",
    "uuid": "^9.0.1"
  },
  "devDependencies": {
    "nodemon": "^3.0.2"
  }
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/database/db.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Database Connection Module
// SQLite3 with better-sqlite3 for synchronous operations

const Database = require('better-sqlite3');
const path = require('path');
const fs = require('fs');

class DatabaseManager {
    constructor() {
        this.db = null;
        this.dbPath = path.join(__dirname, '../../storage/claude-cicd.db');
    }

    /**
     * Initialize database connection and create tables
     */
    initialize() {
        try {
            // Ensure storage directory exists
            const storageDir = path.dirname(this.dbPath);
            if (!fs.existsSync(storageDir)) {
                fs.mkdirSync(storageDir, { recursive: true });
            }

            // Open database connection
            this.db = new Database(this.dbPath);
            
            // Enable foreign keys
            this.db.pragma('foreign_keys = ON');
            
            // Enable WAL mode for better concurrency
            this.db.pragma('journal_mode = WAL');

            // Create tables from schema
            this.createTables();

            console.log('âœ… Database initialized successfully');
            return true;
        } catch (error) {
            console.error('âŒ Database initialization failed:', error);
            throw error;
        }
    }

    /**
     * Create tables from schema.sql
     */
    createTables() {
        const schemaPath = path.join(__dirname, 'schema.sql');
        const schema = fs.readFileSync(schemaPath, 'utf8');
        
        // Execute schema (supports multiple statements)
        this.db.exec(schema);
        
        console.log('âœ… Database tables created/verified');
    }

    /**
     * Get database instance
     */
    getDb() {
        if (!this.db) {
            throw new Error('Database not initialized. Call initialize() first.');
        }
        return this.db;
    }

    /**
     * Close database connection
     */
    close() {
        if (this.db) {
            this.db.close();
            this.db = null;
            console.log('âœ… Database connection closed');
        }
    }

    /**
     * Execute a query
     */
    query(sql, params = []) {
        return this.db.prepare(sql).all(params);
    }

    /**
     * Execute a single row query
     */
    queryOne(sql, params = []) {
        return this.db.prepare(sql).get(params);
    }

    /**
     * Execute an insert/update/delete
     */
    run(sql, params = []) {
        return this.db.prepare(sql).run(params);
    }

    /**
     * Begin transaction
     */
    beginTransaction() {
        return this.db.prepare('BEGIN TRANSACTION').run();
    }

    /**
     * Commit transaction
     */
    commit() {
        return this.db.prepare('COMMIT').run();
    }

    /**
     * Rollback transaction
     */
    rollback() {
        return this.db.prepare('ROLLBACK').run();
    }

    /**
     * Execute in transaction
     */
    transaction(callback) {
        try {
            this.beginTransaction();
            const result = callback();
            this.commit();
            return result;
        } catch (error) {
            this.rollback();
            throw error;
        }
    }
}

// Singleton instance
const dbManager = new DatabaseManager();

module.exports = dbManager;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/database/schema.sql
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Claude CI/CD Cockpit Database Schema
-- SQLite3

-- ============================================
-- PROJECTS TABLE
-- ============================================
CREATE TABLE IF NOT EXISTS projects (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    description TEXT,
    type TEXT NOT NULL CHECK(type IN ('html_static', 'spa', 'dashboard', 'nodejs_app', 'other')),
    repo_type TEXT NOT NULL CHECK(repo_type IN ('local', 'github')),
    repo_url TEXT,
    repo_branch TEXT DEFAULT 'main',
    local_path TEXT,
    active_prompt_profile_id TEXT,
    stable_version_id TEXT,
    created_at TEXT NOT NULL DEFAULT (datetime('now')),
    updated_at TEXT NOT NULL DEFAULT (datetime('now')),
    status TEXT NOT NULL DEFAULT 'active' CHECK(status IN ('active', 'archived')),
    metadata TEXT DEFAULT '{}',
    FOREIGN KEY (active_prompt_profile_id) REFERENCES prompt_profiles(id),
    FOREIGN KEY (stable_version_id) REFERENCES versions(id)
);

-- ============================================
-- VERSIONS TABLE
-- ============================================
CREATE TABLE IF NOT EXISTS versions (
    id TEXT PRIMARY KEY,
    project_id TEXT NOT NULL,
    label TEXT NOT NULL,
    description TEXT,
    parent_version_id TEXT,
    is_stable INTEGER NOT NULL DEFAULT 0,
    created_at TEXT NOT NULL DEFAULT (datetime('now')),
    created_by_job_id TEXT,
    file_count INTEGER DEFAULT 0,
    total_size_bytes INTEGER DEFAULT 0,
    metadata TEXT DEFAULT '{}',
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE,
    FOREIGN KEY (parent_version_id) REFERENCES versions(id),
    FOREIGN KEY (created_by_job_id) REFERENCES jobs(id),
    UNIQUE(project_id, label)
);

-- ============================================
-- FILES TABLE
-- ============================================
CREATE TABLE IF NOT EXISTS files (
    id TEXT PRIMARY KEY,
    version_id TEXT NOT NULL,
    path TEXT NOT NULL,
    filename TEXT NOT NULL,
    extension TEXT,
    size_bytes INTEGER NOT NULL,
    content_hash TEXT NOT NULL,
    storage_path TEXT NOT NULL,
    created_at TEXT NOT NULL DEFAULT (datetime('now')),
    metadata TEXT DEFAULT '{}',
    FOREIGN KEY (version_id) REFERENCES versions(id) ON DELETE CASCADE,
    UNIQUE(version_id, path)
);

-- ============================================
-- JOBS TABLE
-- ============================================
CREATE TABLE IF NOT EXISTS jobs (
    id TEXT PRIMARY KEY,
    project_id TEXT NOT NULL,
    type TEXT NOT NULL CHECK(type IN ('debug', 'patch', 'refactor', 'generate', 'review')),
    status TEXT NOT NULL DEFAULT 'pending' CHECK(status IN ('pending', 'running', 'success', 'failed', 'cancelled')),
    prompt_profile_id TEXT,
    input_prompt TEXT NOT NULL,
    context_data TEXT DEFAULT '{}',
    output_summary TEXT,
    output_version_id TEXT,
    started_at TEXT,
    completed_at TEXT,
    duration_seconds INTEGER,
    created_at TEXT NOT NULL DEFAULT (datetime('now')),
    error_message TEXT,
    metadata TEXT DEFAULT '{}',
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE,
    FOREIGN KEY (prompt_profile_id) REFERENCES prompt_profiles(id),
    FOREIGN KEY (output_version_id) REFERENCES versions(id)
);

-- ============================================
-- PROMPT PROFILES TABLE
-- ============================================
CREATE TABLE IF NOT EXISTS prompt_profiles (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    description TEXT,
    type TEXT NOT NULL CHECK(type IN ('system', 'debugging', 'atomic_task', 'custom')),
    system_prompt TEXT NOT NULL,
    rules TEXT,
    examples TEXT,
    is_default INTEGER NOT NULL DEFAULT 0,
    created_at TEXT NOT NULL DEFAULT (datetime('now')),
    updated_at TEXT NOT NULL DEFAULT (datetime('now')),
    usage_count INTEGER DEFAULT 0,
    metadata TEXT DEFAULT '{}'
);

-- ============================================
-- LOG ENTRIES TABLE
-- ============================================
CREATE TABLE IF NOT EXISTS log_entries (
    id TEXT PRIMARY KEY,
    job_id TEXT NOT NULL,
    project_id TEXT NOT NULL,
    level TEXT NOT NULL CHECK(level IN ('info', 'warning', 'error', 'success')),
    message TEXT NOT NULL,
    timestamp TEXT NOT NULL DEFAULT (datetime('now')),
    metadata TEXT DEFAULT '{}',
    FOREIGN KEY (job_id) REFERENCES jobs(id) ON DELETE CASCADE,
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE
);

-- ============================================
-- INDEXES FOR PERFORMANCE
-- ============================================
CREATE INDEX IF NOT EXISTS idx_projects_status ON projects(status);
CREATE INDEX IF NOT EXISTS idx_versions_project_id ON versions(project_id);
CREATE INDEX IF NOT EXISTS idx_versions_is_stable ON versions(is_stable);
CREATE INDEX IF NOT EXISTS idx_files_version_id ON files(version_id);
CREATE INDEX IF NOT EXISTS idx_jobs_project_id ON jobs(project_id);
CREATE INDEX IF NOT EXISTS idx_jobs_status ON jobs(status);
CREATE INDEX IF NOT EXISTS idx_jobs_created_at ON jobs(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_log_entries_job_id ON log_entries(job_id);
CREATE INDEX IF NOT EXISTS idx_log_entries_timestamp ON log_entries(timestamp DESC);

-- ============================================
-- INSERT DEFAULT PROMPT PROFILES
-- ============================================
INSERT OR IGNORE INTO prompt_profiles (id, name, type, system_prompt, rules, is_default) VALUES
(
    'default-system',
    'Code ProtÃ©gÃ© Standard',
    'system',
    'Tu es un assistant dÃ©veloppeur expert. Tu dois suivre ces principes : Code protÃ©gÃ©, Zero casse, Zero doublon.',
    '1. Ne jamais casser le code existant
2. Ne jamais dupliquer du code
3. Toujours commenter les parties importantes
4. Utiliser des noms de variables clairs
5. PrivilÃ©gier la simplicitÃ©',
    1
),
(
    'debug-standard',
    'Debug Standard',
    'debugging',
    'Tu es un expert en debugging. Analyse le code et trouve les bugs de maniÃ¨re mÃ©thodique.',
    '1. Identifier prÃ©cisÃ©ment le bug
2. Expliquer la cause racine
3. Proposer une solution minimale
4. Tester mentalement la solution
5. Ne rien casser d''autre',
    0
);


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/models/Project.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Project Model
const { v4: uuidv4 } = require('uuid');
const dbManager = require('../database/db');

class Project {
    /**
     * Get all projects
     */
    static getAll(filters = {}) {
        const db = dbManager.getDb();
        let sql = 'SELECT * FROM projects WHERE 1=1';
        const params = [];

        if (filters.status) {
            sql += ' AND status = ?';
            params.push(filters.status);
        }

        if (filters.type) {
            sql += ' AND type = ?';
            params.push(filters.type);
        }

        sql += ' ORDER BY updated_at DESC';

        return db.prepare(sql).all(params);
    }

    /**
     * Get project by ID
     */
    static getById(id) {
        const db = dbManager.getDb();
        return db.prepare('SELECT * FROM projects WHERE id = ?').get(id);
    }

    /**
     * Create new project
     */
    static create(data) {
        const db = dbManager.getDb();
        
        const project = {
            id: uuidv4(),
            name: data.name,
            description: data.description || null,
            type: data.type,
            repo_type: data.repo_type,
            repo_url: data.repo_url || null,
            repo_branch: data.repo_branch || 'main',
            local_path: data.local_path || null,
            active_prompt_profile_id: data.active_prompt_profile_id || null,
            stable_version_id: null,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString(),
            status: 'active',
            metadata: JSON.stringify(data.metadata || {})
        };

        const stmt = db.prepare(`
            INSERT INTO projects (
                id, name, description, type, repo_type, repo_url, repo_branch,
                local_path, active_prompt_profile_id, created_at, updated_at, status, metadata
            ) VALUES (
                @id, @name, @description, @type, @repo_type, @repo_url, @repo_branch,
                @local_path, @active_prompt_profile_id, @created_at, @updated_at, @status, @metadata
            )
        `);

        stmt.run(project);
        return project;
    }

    /**
     * Update project
     */
    static update(id, data) {
        const db = dbManager.getDb();
        
        const updates = [];
        const params = {};

        if (data.name !== undefined) {
            updates.push('name = @name');
            params.name = data.name;
        }
        if (data.description !== undefined) {
            updates.push('description = @description');
            params.description = data.description;
        }
        if (data.active_prompt_profile_id !== undefined) {
            updates.push('active_prompt_profile_id = @active_prompt_profile_id');
            params.active_prompt_profile_id = data.active_prompt_profile_id;
        }
        if (data.stable_version_id !== undefined) {
            updates.push('stable_version_id = @stable_version_id');
            params.stable_version_id = data.stable_version_id;
        }
        if (data.status !== undefined) {
            updates.push('status = @status');
            params.status = data.status;
        }

        updates.push('updated_at = @updated_at');
        params.updated_at = new Date().toISOString();
        params.id = id;

        const sql = `UPDATE projects SET ${updates.join(', ')} WHERE id = @id`;
        db.prepare(sql).run(params);

        return this.getById(id);
    }

    /**
     * Delete project (soft delete - set to archived)
     */
    static delete(id) {
        return this.update(id, { status: 'archived' });
    }

    /**
     * Get project with related data
     */
    static getWithDetails(id) {
        const db = dbManager.getDb();
        
        const project = this.getById(id);
        if (!project) return null;

        // Get stable version
        if (project.stable_version_id) {
            project.stable_version = db.prepare(
                'SELECT * FROM versions WHERE id = ?'
            ).get(project.stable_version_id);
        }

        // Get versions count
        project.versions_count = db.prepare(
            'SELECT COUNT(*) as count FROM versions WHERE project_id = ?'
        ).get(id).count;

        // Get jobs count
        project.jobs_count = db.prepare(
            'SELECT COUNT(*) as count FROM jobs WHERE project_id = ?'
        ).get(id).count;

        // Get last job
        project.last_job = db.prepare(
            'SELECT * FROM jobs WHERE project_id = ? ORDER BY created_at DESC LIMIT 1'
        ).get(id);

        return project;
    }
}

module.exports = Project;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/models/Job.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Job Model
const { v4: uuidv4 } = require('uuid');
const dbManager = require('../database/db');

class Job {
    /**
     * Get all jobs
     */
    static getAll(filters = {}) {
        const db = dbManager.getDb();
        let sql = `
            SELECT j.*, p.name as project_name
            FROM jobs j
            LEFT JOIN projects p ON j.project_id = p.id
            WHERE 1=1
        `;
        const params = [];

        if (filters.project_id) {
            sql += ' AND j.project_id = ?';
            params.push(filters.project_id);
        }

        if (filters.status) {
            sql += ' AND j.status = ?';
            params.push(filters.status);
        }

        if (filters.type) {
            sql += ' AND j.type = ?';
            params.push(filters.type);
        }

        const limit = filters.limit || 50;
        const offset = filters.offset || 0;
        
        sql += ' ORDER BY j.created_at DESC LIMIT ? OFFSET ?';
        params.push(limit, offset);

        return db.prepare(sql).all(params);
    }

    /**
     * Get job by ID
     */
    static getById(id) {
        const db = dbManager.getDb();
        return db.prepare(`
            SELECT j.*, p.name as project_name
            FROM jobs j
            LEFT JOIN projects p ON j.project_id = p.id
            WHERE j.id = ?
        `).get(id);
    }

    /**
     * Create new job
     */
    static create(data) {
        const db = dbManager.getDb();
        
        const job = {
            id: uuidv4(),
            project_id: data.project_id,
            type: data.type,
            status: 'pending',
            prompt_profile_id: data.prompt_profile_id || null,
            input_prompt: data.input_prompt,
            context_data: JSON.stringify(data.context_data || {}),
            output_summary: null,
            output_version_id: null,
            started_at: null,
            completed_at: null,
            duration_seconds: null,
            created_at: new Date().toISOString(),
            error_message: null,
            metadata: JSON.stringify(data.metadata || {})
        };

        const stmt = db.prepare(`
            INSERT INTO jobs (
                id, project_id, type, status, prompt_profile_id, input_prompt,
                context_data, created_at, metadata
            ) VALUES (
                @id, @project_id, @type, @status, @prompt_profile_id, @input_prompt,
                @context_data, @created_at, @metadata
            )
        `);

        stmt.run(job);
        return job;
    }

    /**
     * Update job
     */
    static update(id, data) {
        const db = dbManager.getDb();
        
        const updates = [];
        const params = { id };

        if (data.status !== undefined) {
            updates.push('status = @status');
            params.status = data.status;

            // Auto-set started_at when status becomes 'running'
            if (data.status === 'running' && !params.started_at) {
                updates.push('started_at = @started_at');
                params.started_at = new Date().toISOString();
            }

            // Auto-set completed_at when status becomes final
            if (['success', 'failed', 'cancelled'].includes(data.status)) {
                updates.push('completed_at = @completed_at');
                params.completed_at = new Date().toISOString();

                // Calculate duration
                const job = this.getById(id);
                if (job && job.started_at) {
                    const start = new Date(job.started_at);
                    const end = new Date(params.completed_at);
                    updates.push('duration_seconds = @duration_seconds');
                    params.duration_seconds = Math.floor((end - start) / 1000);
                }
            }
        }

        if (data.output_summary !== undefined) {
            updates.push('output_summary = @output_summary');
            params.output_summary = data.output_summary;
        }

        if (data.output_version_id !== undefined) {
            updates.push('output_version_id = @output_version_id');
            params.output_version_id = data.output_version_id;
        }

        if (data.error_message !== undefined) {
            updates.push('error_message = @error_message');
            params.error_message = data.error_message;
        }

        if (updates.length === 0) return this.getById(id);

        const sql = `UPDATE jobs SET ${updates.join(', ')} WHERE id = @id`;
        db.prepare(sql).run(params);

        return this.getById(id);
    }

    /**
     * Get job with logs
     */
    static getWithLogs(id) {
        const db = dbManager.getDb();
        
        const job = this.getById(id);
        if (!job) return null;

        job.logs = db.prepare(
            'SELECT * FROM log_entries WHERE job_id = ? ORDER BY timestamp ASC'
        ).all(id);

        return job;
    }

    /**
     * Cancel job
     */
    static cancel(id) {
        return this.update(id, { status: 'cancelled' });
    }
}

module.exports = Job;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/models/Version.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Version Model
const { v4: uuidv4 } = require('uuid');
const dbManager = require('../database/db');
const fileStorage = require('../services/FileStorageService');

class Version {
    /**
     * Get all versions for a project
     */
    static getAll(projectId) {
        const db = dbManager.getDb();
        return db.prepare(
            'SELECT * FROM versions WHERE project_id = ? ORDER BY created_at DESC'
        ).all(projectId);
    }

    /**
     * Get version by ID
     */
    static getById(id) {
        const db = dbManager.getDb();
        return db.prepare('SELECT * FROM versions WHERE id = ?').get(id);
    }

    /**
     * Create new version
     */
    static create(data) {
        const db = dbManager.getDb();
        
        const version = {
            id: uuidv4(),
            project_id: data.project_id,
            label: data.label,
            description: data.description || null,
            parent_version_id: data.parent_version_id || null,
            is_stable: data.is_stable || 0,
            created_at: new Date().toISOString(),
            created_by_job_id: data.created_by_job_id || null,
            file_count: 0,
            total_size_bytes: 0,
            metadata: JSON.stringify(data.metadata || {})
        };

        const stmt = db.prepare(`
            INSERT INTO versions (
                id, project_id, label, description, parent_version_id,
                is_stable, created_at, created_by_job_id, file_count,
                total_size_bytes, metadata
            ) VALUES (
                @id, @project_id, @label, @description, @parent_version_id,
                @is_stable, @created_at, @created_by_job_id, @file_count,
                @total_size_bytes, @metadata
            )
        `);

        stmt.run(version);
        return version;
    }

    /**
     * Add file to version
     */
    static addFile(versionId, fileData) {
        const db = dbManager.getDb();
        
        const file = {
            id: uuidv4(),
            version_id: versionId,
            path: fileData.path,
            filename: fileData.filename || fileData.path.split('/').pop(),
            extension: fileData.extension || this.getExtension(fileData.path),
            size_bytes: fileData.size_bytes,
            content_hash: fileData.content_hash,
            storage_path: fileData.storage_path,
            created_at: new Date().toISOString(),
            metadata: JSON.stringify(fileData.metadata || {})
        };

        const stmt = db.prepare(`
            INSERT INTO files (
                id, version_id, path, filename, extension, size_bytes,
                content_hash, storage_path, created_at, metadata
            ) VALUES (
                @id, @version_id, @path, @filename, @extension, @size_bytes,
                @content_hash, @storage_path, @created_at, @metadata
            )
        `);

        stmt.run(file);

        // Update version stats
        this.updateStats(versionId);

        return file;
    }

    /**
     * Get files for version
     */
    static getFiles(versionId) {
        const db = dbManager.getDb();
        return db.prepare(
            'SELECT * FROM files WHERE version_id = ? ORDER BY path'
        ).all(versionId);
    }

    /**
     * Update version stats
     */
    static updateStats(versionId) {
        const db = dbManager.getDb();
        
        const stats = db.prepare(`
            SELECT COUNT(*) as count, SUM(size_bytes) as total_size
            FROM files WHERE version_id = ?
        `).get(versionId);

        db.prepare(`
            UPDATE versions 
            SET file_count = ?, total_size_bytes = ?
            WHERE id = ?
        `).run(stats.count, stats.total_size || 0, versionId);
    }

    /**
     * Mark version as stable
     */
    static markAsStable(versionId) {
        const db = dbManager.getDb();
        
        const version = this.getById(versionId);
        if (!version) {
            throw new Error('Version not found');
        }

        // Unmark other stable versions for this project
        db.prepare(
            'UPDATE versions SET is_stable = 0 WHERE project_id = ?'
        ).run(version.project_id);

        // Mark this version as stable
        db.prepare(
            'UPDATE versions SET is_stable = 1 WHERE id = ?'
        ).run(versionId);

        return this.getById(versionId);
    }

    /**
     * Get stable version for project
     */
    static getStableVersion(projectId) {
        const db = dbManager.getDb();
        return db.prepare(
            'SELECT * FROM versions WHERE project_id = ? AND is_stable = 1'
        ).get(projectId);
    }

    /**
     * Generate next version label
     */
    static generateNextLabel(projectId) {
        const versions = this.getAll(projectId);
        
        if (versions.length === 0) {
            return 'VERSION_00_BASE';
        }

        // Extract numbers from labels
        const numbers = versions
            .map(v => {
                const match = v.label.match(/VERSION_(\d+)/);
                return match ? parseInt(match[1]) : 0;
            })
            .filter(n => !isNaN(n));

        const maxNumber = Math.max(...numbers, -1);
        const nextNumber = maxNumber + 1;

        return `VERSION_${String(nextNumber).padStart(2, '0')}`;
    }

    /**
     * Get extension from filename
     */
    static getExtension(filename) {
        const parts = filename.split('.');
        return parts.length > 1 ? parts.pop() : '';
    }

    /**
     * Delete version
     */
    static delete(versionId) {
        const db = dbManager.getDb();
        const version = this.getById(versionId);
        
        if (!version) {
            throw new Error('Version not found');
        }

        // Delete files from storage
        try {
            fileStorage.deleteVersion(version.project_id, version.label);
        } catch (error) {
            console.warn('Could not delete version files:', error);
        }

        // Delete from database (cascade will delete files records)
        db.prepare('DELETE FROM versions WHERE id = ?').run(versionId);
    }
}

module.exports = Version;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/routes/projects.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Projects Routes
const express = require('express');
const router = express.Router();
const Project = require('../models/Project');

/**
 * GET /api/projects
 * Get all projects
 */
router.get('/', (req, res) => {
    try {
        const filters = {
            status: req.query.status,
            type: req.query.type
        };

        const projects = Project.getAll(filters);
        
        res.json({ projects });
    } catch (error) {
        console.error('Error getting projects:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * POST /api/projects
 * Create new project
 */
router.post('/', (req, res) => {
    try {
        const { name, description, type, repo_type, repo_url, repo_branch, local_path } = req.body;

        // Validation
        if (!name || !type || !repo_type) {
            return res.status(400).json({ 
                error: 'Missing required fields: name, type, repo_type' 
            });
        }

        const validTypes = ['html_static', 'spa', 'dashboard', 'nodejs_app', 'other'];
        if (!validTypes.includes(type)) {
            return res.status(400).json({ 
                error: `Invalid type. Must be one of: ${validTypes.join(', ')}` 
            });
        }

        const validRepoTypes = ['local', 'github'];
        if (!validRepoTypes.includes(repo_type)) {
            return res.status(400).json({ 
                error: `Invalid repo_type. Must be one of: ${validRepoTypes.join(', ')}` 
            });
        }

        const project = Project.create({
            name,
            description,
            type,
            repo_type,
            repo_url,
            repo_branch,
            local_path
        });

        res.status(201).json({ project });
    } catch (error) {
        console.error('Error creating project:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * GET /api/projects/:id
 * Get project by ID with details
 */
router.get('/:id', (req, res) => {
    try {
        const project = Project.getWithDetails(req.params.id);
        
        if (!project) {
            return res.status(404).json({ error: 'Project not found' });
        }

        res.json({ project });
    } catch (error) {
        console.error('Error getting project:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * PUT /api/projects/:id
 * Update project
 */
router.put('/:id', (req, res) => {
    try {
        const project = Project.update(req.params.id, req.body);
        
        if (!project) {
            return res.status(404).json({ error: 'Project not found' });
        }

        res.json({ project });
    } catch (error) {
        console.error('Error updating project:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * DELETE /api/projects/:id
 * Archive project (soft delete)
 */
router.delete('/:id', (req, res) => {
    try {
        const project = Project.delete(req.params.id);
        
        if (!project) {
            return res.status(404).json({ error: 'Project not found' });
        }

        res.status(204).send();
    } catch (error) {
        console.error('Error deleting project:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * POST /api/projects/:id/rollback
 * Rollback to a specific version
 */
router.post('/:id/rollback', (req, res) => {
    try {
        const { version_id } = req.body;

        if (!version_id) {
            return res.status(400).json({ error: 'version_id is required' });
        }

        const project = Project.update(req.params.id, {
            stable_version_id: version_id
        });

        res.json({ 
            project,
            message: 'Project rolled back successfully'
        });
    } catch (error) {
        console.error('Error rolling back project:', error);
        res.status(500).json({ error: error.message });
    }
});

module.exports = router;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/routes/jobs.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Jobs Routes
const express = require('express');
const router = express.Router();
const Job = require('../models/Job');
const jobExecutor = require('../services/JobExecutorService');

/**
 * GET /api/jobs
 * Get all jobs with filters
 */
router.get('/', (req, res) => {
    try {
        const filters = {
            project_id: req.query.project_id,
            status: req.query.status,
            type: req.query.type,
            limit: parseInt(req.query.limit) || 50,
            offset: parseInt(req.query.offset) || 0
        };

        const jobs = Job.getAll(filters);
        
        // Format jobs for frontend
        const formattedJobs = jobs.map(job => ({
            ...job,
            project: {
                id: job.project_id,
                name: job.project_name
            },
            context_data: JSON.parse(job.context_data || '{}'),
            metadata: JSON.parse(job.metadata || '{}')
        }));

        res.json({ 
            jobs: formattedJobs,
            total: formattedJobs.length
        });
    } catch (error) {
        console.error('Error getting jobs:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * POST /api/jobs
 * Create and execute new job
 */
router.post('/', async (req, res) => {
    try {
        const { project_id, type, prompt_profile_id, context_data, input_prompt } = req.body;

        // Validation
        if (!project_id || !type || !input_prompt) {
            return res.status(400).json({ 
                error: 'Missing required fields: project_id, type, input_prompt' 
            });
        }

        const validTypes = ['debug', 'patch', 'refactor', 'generate', 'review'];
        if (!validTypes.includes(type)) {
            return res.status(400).json({ 
                error: `Invalid type. Must be one of: ${validTypes.join(', ')}` 
            });
        }

        const job = Job.create({
            project_id,
            type,
            prompt_profile_id,
            context_data,
            input_prompt
        });

        // Execute job in background
        console.log(`ðŸš€ Executing job ${job.id} in background...`);
        jobExecutor.executeJobAsync(job.id);
        
        res.status(202).json({ 
            job: {
                ...job,
                context_data: JSON.parse(job.context_data),
                metadata: JSON.parse(job.metadata)
            },
            message: 'Job created and queued for execution'
        });
    } catch (error) {
        console.error('Error creating job:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * GET /api/jobs/:id
 * Get job details with logs
 */
router.get('/:id', (req, res) => {
    try {
        const job = Job.getWithLogs(req.params.id);
        
        if (!job) {
            return res.status(404).json({ error: 'Job not found' });
        }

        res.json({ 
            job: {
                ...job,
                context_data: JSON.parse(job.context_data || '{}'),
                metadata: JSON.parse(job.metadata || '{}'),
                logs: job.logs.map(log => ({
                    ...log,
                    metadata: JSON.parse(log.metadata || '{}')
                }))
            }
        });
    } catch (error) {
        console.error('Error getting job:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * DELETE /api/jobs/:id
 * Cancel job
 */
router.delete('/:id', (req, res) => {
    try {
        const job = Job.cancel(req.params.id);
        
        if (!job) {
            return res.status(404).json({ error: 'Job not found' });
        }

        res.json({ 
            job,
            message: 'Job cancelled successfully'
        });
    } catch (error) {
        console.error('Error cancelling job:', error);
        res.status(500).json({ error: error.message });
    }
});

module.exports = router;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/routes/versions.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Versions Routes
const express = require('express');
const router = express.Router();
const Version = require('../models/Version');
const multer = require('multer');
const path = require('path');

// Configure multer for file uploads
const upload = multer({
    dest: '/tmp/uploads/',
    limits: {
        fileSize: 10 * 1024 * 1024 // 10MB max
    }
});

/**
 * GET /api/versions
 * Get all versions for a project
 */
router.get('/', (req, res) => {
    try {
        const { project_id } = req.query;
        
        if (!project_id) {
            return res.status(400).json({ error: 'project_id is required' });
        }

        const versions = Version.getAll(project_id);
        
        res.json({ versions });
    } catch (error) {
        console.error('Error getting versions:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * GET /api/versions/:id
 * Get version details with files
 */
router.get('/:id', (req, res) => {
    try {
        const version = Version.getById(req.params.id);
        
        if (!version) {
            return res.status(404).json({ error: 'Version not found' });
        }

        const files = Version.getFiles(req.params.id);
        
        res.json({ 
            version: {
                ...version,
                files
            }
        });
    } catch (error) {
        console.error('Error getting version:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * POST /api/versions
 * Create new version
 */
router.post('/', (req, res) => {
    try {
        const { project_id, label, description, parent_version_id } = req.body;

        if (!project_id) {
            return res.status(400).json({ error: 'project_id is required' });
        }

        // Generate label if not provided
        const versionLabel = label || Version.generateNextLabel(project_id);

        const version = Version.create({
            project_id,
            label: versionLabel,
            description,
            parent_version_id
        });

        res.status(201).json({ version });
    } catch (error) {
        console.error('Error creating version:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * POST /api/versions/:id/stable
 * Mark version as stable
 */
router.post('/:id/stable', (req, res) => {
    try {
        const version = Version.markAsStable(req.params.id);
        
        res.json({ 
            version,
            message: 'Version marked as stable'
        });
    } catch (error) {
        console.error('Error marking version as stable:', error);
        res.status(500).json({ error: error.message });
    }
});

/**
 * DELETE /api/versions/:id
 * Delete version
 */
router.delete('/:id', (req, res) => {
    try {
        Version.delete(req.params.id);
        
        res.status(204).send();
    } catch (error) {
        console.error('Error deleting version:', error);
        res.status(500).json({ error: error.message });
    }
});

module.exports = router;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/routes/prompts.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Prompts Routes - PLACEHOLDER
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
    // TODO: Implement prompts listing
    res.json({ prompts: [] });
});

router.post('/', (req, res) => {
    // TODO: Implement prompt creation
    res.status(201).json({ message: 'Coming soon' });
});

module.exports = router;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/routes/logs.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Logs Routes
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
    res.json({ logs: [] });
});

module.exports = router;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/routes/stats.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Stats Routes
const express = require('express');
const router = express.Router();
const dbManager = require('../database/db');

/**
 * GET /api/stats
 * Get global statistics
 */
router.get('/', (req, res) => {
    try {
        const db = dbManager.getDb();

        // Total projects
        const totalProjects = db.prepare(
            "SELECT COUNT(*) as count FROM projects WHERE status = 'active'"
        ).get().count;

        // Total versions
        const totalVersions = db.prepare(
            'SELECT COUNT(*) as count FROM versions'
        ).get().count;

        // Total jobs
        const totalJobs = db.prepare(
            'SELECT COUNT(*) as count FROM jobs'
        ).get().count;

        // Jobs running
        const jobsRunning = db.prepare(
            "SELECT COUNT(*) as count FROM jobs WHERE status IN ('pending', 'running')"
        ).get().count;

        // Success rate
        const successfulJobs = db.prepare(
            "SELECT COUNT(*) as count FROM jobs WHERE status = 'success'"
        ).get().count;

        const failedJobs = db.prepare(
            "SELECT COUNT(*) as count FROM jobs WHERE status = 'failed'"
        ).get().count;

        const completedJobs = successfulJobs + failedJobs;
        const successRate = completedJobs > 0 ? successfulJobs / completedJobs : 0;

        // Last 7 days jobs
        const sevenDaysAgo = new Date();
        sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
        
        const last7DaysJobs = db.prepare(
            "SELECT COUNT(*) as count FROM jobs WHERE created_at >= ?"
        ).get(sevenDaysAgo.toISOString()).count;

        res.json({
            stats: {
                total_projects: totalProjects,
                total_versions: totalVersions,
                total_jobs: totalJobs,
                jobs_running: jobsRunning,
                jobs_success_rate: successRate,
                last_7_days_jobs: last7DaysJobs,
                total_storage_mb: 0 // TODO: Calculate actual storage
            }
        });
    } catch (error) {
        console.error('Error getting stats:', error);
        res.status(500).json({ error: error.message });
    }
});

module.exports = router;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/routes/diff.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Diff Routes
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
    res.json({ diff: null });
});

module.exports = router;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/services/ClaudeAPIService.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Claude API Service
// Handles communication with Anthropic Claude API

const https = require('https');

class ClaudeAPIService {
    constructor() {
        // IMPORTANT: Set your API key in environment variable
        this.apiKey = process.env.ANTHROPIC_API_KEY || 'YOUR_API_KEY_HERE';
        this.apiUrl = 'api.anthropic.com';
        this.model = 'claude-sonnet-4-20250514';
        this.maxTokens = 4000;
    }

    /**
     * Execute a job with Claude
     */
    async executeJob(job, promptProfile = null) {
        try {
            // Build the prompt
            const systemPrompt = promptProfile?.system_prompt || this.getDefaultSystemPrompt();
            const userPrompt = this.buildUserPrompt(job);

            // Call Claude API
            const response = await this.callClaudeAPI(systemPrompt, userPrompt);

            return {
                success: true,
                output: response.content[0].text,
                usage: {
                    input_tokens: response.usage.input_tokens,
                    output_tokens: response.usage.output_tokens
                }
            };
        } catch (error) {
            console.error('Claude API error:', error);
            return {
                success: false,
                error: error.message
            };
        }
    }

    /**
     * Call Claude API
     */
    callClaudeAPI(systemPrompt, userPrompt) {
        return new Promise((resolve, reject) => {
            const postData = JSON.stringify({
                model: this.model,
                max_tokens: this.maxTokens,
                system: systemPrompt,
                messages: [
                    {
                        role: 'user',
                        content: userPrompt
                    }
                ]
            });

            const options = {
                hostname: this.apiUrl,
                port: 443,
                path: '/v1/messages',
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'x-api-key': this.apiKey,
                    'anthropic-version': '2023-06-01',
                    'Content-Length': Buffer.byteLength(postData)
                }
            };

            const req = https.request(options, (res) => {
                let data = '';

                res.on('data', (chunk) => {
                    data += chunk;
                });

                res.on('end', () => {
                    if (res.statusCode === 200) {
                        try {
                            resolve(JSON.parse(data));
                        } catch (e) {
                            reject(new Error('Failed to parse API response'));
                        }
                    } else {
                        reject(new Error(`API returned status ${res.statusCode}: ${data}`));
                    }
                });
            });

            req.on('error', (error) => {
                reject(error);
            });

            req.write(postData);
            req.end();
        });
    }

    /**
     * Build user prompt from job
     */
    buildUserPrompt(job) {
        const context = JSON.parse(job.context_data || '{}');
        
        let prompt = `# JOB TYPE: ${job.type.toUpperCase()}\n\n`;
        
        if (context.files) {
            prompt += `## FILES TO WORK ON:\n${context.files.join(', ')}\n\n`;
        }
        
        prompt += `## INSTRUCTIONS:\n${job.input_prompt}\n\n`;
        
        if (context.current_code) {
            prompt += `## CURRENT CODE:\n\`\`\`\n${context.current_code}\n\`\`\`\n\n`;
        }
        
        prompt += `Please execute this ${job.type} task and provide the solution.`;
        
        return prompt;
    }

    /**
     * Get default system prompt
     */
    getDefaultSystemPrompt() {
        return `You are an expert software developer assistant. 
Your task is to help with code by following these principles:
- Code protÃ©gÃ©: Never break existing working code
- Zero casse: Make minimal changes
- Zero doublon: No code duplication
- Always explain your changes
- Provide clean, production-ready code

When debugging, identify the root cause first.
When patching, make the smallest change possible.
When refactoring, improve code quality while maintaining functionality.`;
    }

    /**
     * Check if API key is configured
     */
    isConfigured() {
        return this.apiKey && this.apiKey !== 'YOUR_API_KEY_HERE';
    }

    /**
     * Simulate job execution (for testing without API key)
     */
    async simulateJob(job) {
        // Simulate API delay
        await new Promise(resolve => setTimeout(resolve, 2000));

        return {
            success: true,
            output: `[SIMULATED] Job "${job.type}" completed successfully.\n\nInstructions received: ${job.input_prompt}\n\nThis is a simulated response. Configure ANTHROPIC_API_KEY to use real Claude API.`,
            usage: {
                input_tokens: 100,
                output_tokens: 50
            }
        };
    }
}

module.exports = new ClaudeAPIService();


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/services/FileStorageService.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// File Storage Service
// Handles file storage for versions

const fs = require('fs');
const path = require('path');
const crypto = require('crypto');

class FileStorageService {
    constructor() {
        this.storageRoot = path.join(__dirname, '../../storage/projects');
        this.ensureStorageExists();
    }

    /**
     * Ensure storage directory exists
     */
    ensureStorageExists() {
        if (!fs.existsSync(this.storageRoot)) {
            fs.mkdirSync(this.storageRoot, { recursive: true });
        }
    }

    /**
     * Get project storage path
     */
    getProjectPath(projectId) {
        return path.join(this.storageRoot, projectId);
    }

    /**
     * Get version storage path
     */
    getVersionPath(projectId, versionLabel) {
        return path.join(this.getProjectPath(projectId), 'versions', versionLabel);
    }

    /**
     * Save file for a version
     */
    saveFile(projectId, versionLabel, fileName, fileContent) {
        const versionPath = this.getVersionPath(projectId, versionLabel);
        
        // Create directory if doesn't exist
        if (!fs.existsSync(versionPath)) {
            fs.mkdirSync(versionPath, { recursive: true });
        }

        const filePath = path.join(versionPath, fileName);
        
        // Create subdirectories if needed
        const fileDir = path.dirname(filePath);
        if (!fs.existsSync(fileDir)) {
            fs.mkdirSync(fileDir, { recursive: true });
        }

        // Write file
        fs.writeFileSync(filePath, fileContent);

        // Calculate hash
        const hash = this.calculateHash(fileContent);

        return {
            path: fileName,
            storage_path: filePath,
            size_bytes: Buffer.byteLength(fileContent),
            content_hash: hash
        };
    }

    /**
     * Read file from version
     */
    readFile(projectId, versionLabel, fileName) {
        const filePath = path.join(this.getVersionPath(projectId, versionLabel), fileName);
        
        if (!fs.existsSync(filePath)) {
            throw new Error(`File not found: ${fileName}`);
        }

        return fs.readFileSync(filePath);
    }

    /**
     * List files in version
     */
    listFiles(projectId, versionLabel) {
        const versionPath = this.getVersionPath(projectId, versionLabel);
        
        if (!fs.existsSync(versionPath)) {
            return [];
        }

        return this.getFilesRecursive(versionPath, versionPath);
    }

    /**
     * Get files recursively
     */
    getFilesRecursive(dir, baseDir) {
        const files = [];
        const items = fs.readdirSync(dir);

        for (const item of items) {
            const fullPath = path.join(dir, item);
            const stat = fs.statSync(fullPath);

            if (stat.isDirectory()) {
                files.push(...this.getFilesRecursive(fullPath, baseDir));
            } else {
                const relativePath = path.relative(baseDir, fullPath);
                files.push({
                    path: relativePath,
                    size: stat.size,
                    modified: stat.mtime
                });
            }
        }

        return files;
    }

    /**
     * Copy version files
     */
    copyVersion(projectId, fromVersionLabel, toVersionLabel) {
        const fromPath = this.getVersionPath(projectId, fromVersionLabel);
        const toPath = this.getVersionPath(projectId, toVersionLabel);

        if (!fs.existsSync(fromPath)) {
            throw new Error(`Source version not found: ${fromVersionLabel}`);
        }

        this.copyRecursive(fromPath, toPath);
    }

    /**
     * Copy directory recursively
     */
    copyRecursive(src, dest) {
        if (!fs.existsSync(dest)) {
            fs.mkdirSync(dest, { recursive: true });
        }

        const items = fs.readdirSync(src);

        for (const item of items) {
            const srcPath = path.join(src, item);
            const destPath = path.join(dest, item);
            const stat = fs.statSync(srcPath);

            if (stat.isDirectory()) {
                this.copyRecursive(srcPath, destPath);
            } else {
                fs.copyFileSync(srcPath, destPath);
            }
        }
    }

    /**
     * Delete version files
     */
    deleteVersion(projectId, versionLabel) {
        const versionPath = this.getVersionPath(projectId, versionLabel);
        
        if (fs.existsSync(versionPath)) {
            fs.rmSync(versionPath, { recursive: true, force: true });
        }
    }

    /**
     * Calculate file hash
     */
    calculateHash(content) {
        return crypto.createHash('sha256').update(content).digest('hex');
    }

    /**
     * Get storage stats for project
     */
    getProjectStats(projectId) {
        const projectPath = this.getProjectPath(projectId);
        
        if (!fs.existsSync(projectPath)) {
            return { totalSize: 0, fileCount: 0 };
        }

        let totalSize = 0;
        let fileCount = 0;

        const calculateSize = (dir) => {
            const items = fs.readdirSync(dir);
            
            for (const item of items) {
                const fullPath = path.join(dir, item);
                const stat = fs.statSync(fullPath);

                if (stat.isDirectory()) {
                    calculateSize(fullPath);
                } else {
                    totalSize += stat.size;
                    fileCount++;
                }
            }
        };

        calculateSize(projectPath);

        return { totalSize, fileCount };
    }
}

module.exports = new FileStorageService();


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: backend/services/JobExecutorService.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Job Executor Service
// Executes jobs asynchronously with Claude API

const Job = require('../models/Job');
const Version = require('../models/Version');
const claudeAPI = require('./ClaudeAPIService');
const dbManager = require('../database/db');

class JobExecutorService {
    constructor() {
        this.runningJobs = new Map();
    }

    /**
     * Execute a job
     */
    async executeJob(jobId) {
        try {
            // Check if already running
            if (this.runningJobs.has(jobId)) {
                throw new Error('Job already running');
            }

            this.runningJobs.set(jobId, true);

            // Update job status to running
            Job.update(jobId, { status: 'running' });
            this.createLog(jobId, 'info', 'Job started');

            // Get job details
            const job = Job.getById(jobId);
            if (!job) {
                throw new Error('Job not found');
            }

            // Execute with Claude API
            this.createLog(jobId, 'info', 'Calling Claude API...');
            
            let result;
            if (claudeAPI.isConfigured()) {
                result = await claudeAPI.executeJob(job);
            } else {
                // Use simulation if no API key
                this.createLog(jobId, 'warning', 'Using simulated Claude API (no API key configured)');
                result = await claudeAPI.simulateJob(job);
            }

            if (result.success) {
                // Create new version with output
                const newVersion = await this.createOutputVersion(job, result.output);
                
                // Update job with success
                Job.update(jobId, {
                    status: 'success',
                    output_summary: this.truncateOutput(result.output),
                    output_version_id: newVersion.id
                });

                this.createLog(jobId, 'success', `Job completed successfully. Created ${newVersion.label}`);
            } else {
                // Update job with failure
                Job.update(jobId, {
                    status: 'failed',
                    error_message: result.error
                });

                this.createLog(jobId, 'error', `Job failed: ${result.error}`);
            }

            this.runningJobs.delete(jobId);
            return result;

        } catch (error) {
            console.error('Job execution error:', error);
            
            Job.update(jobId, {
                status: 'failed',
                error_message: error.message
            });

            this.createLog(jobId, 'error', `Job failed: ${error.message}`);
            this.runningJobs.delete(jobId);
            
            throw error;
        }
    }

    /**
     * Create output version from job result
     */
    async createOutputVersion(job, output) {
        // Generate next version label
        const nextLabel = Version.generateNextLabel(job.project_id);

        // Create version
        const version = Version.create({
            project_id: job.project_id,
            label: nextLabel,
            description: `Generated by ${job.type} job`,
            created_by_job_id: job.id,
            metadata: {
                job_type: job.type,
                generated_by_claude: true
            }
        });

        // Save output as file
        // For now, we save the entire output as a single file
        // In a real scenario, you'd parse the output and create proper files
        const fileData = {
            path: `output_${job.type}.txt`,
            filename: `output_${job.type}.txt`,
            extension: 'txt',
            size_bytes: Buffer.byteLength(output),
            content_hash: require('crypto').createHash('sha256').update(output).digest('hex'),
            storage_path: `${version.project_id}/${nextLabel}/output_${job.type}.txt`
        };

        // Save to storage
        const fileStorage = require('./FileStorageService');
        fileStorage.saveFile(job.project_id, nextLabel, fileData.path, output);

        // Add to database
        Version.addFile(version.id, fileData);

        return version;
    }

    /**
     * Create log entry
     */
    createLog(jobId, level, message) {
        const db = dbManager.getDb();
        const job = Job.getById(jobId);
        
        db.prepare(`
            INSERT INTO log_entries (id, job_id, project_id, level, message, timestamp, metadata)
            VALUES (?, ?, ?, ?, ?, ?, ?)
        `).run(
            require('uuid').v4(),
            jobId,
            job.project_id,
            level,
            message,
            new Date().toISOString(),
            '{}'
        );
    }

    /**
     * Truncate output for summary
     */
    truncateOutput(output, maxLength = 500) {
        if (output.length <= maxLength) {
            return output;
        }
        return output.substring(0, maxLength) + '... (truncated)';
    }

    /**
     * Execute job in background
     */
    executeJobAsync(jobId) {
        // Execute without waiting
        this.executeJob(jobId).catch(error => {
            console.error('Background job execution failed:', error);
        });
    }
}

module.exports = new JobExecutorService();


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/index.html
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude CI/CD Cockpit</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/cockpit.css">
    <link rel="stylesheet" href="css/projections.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Layout principal -->
    <div class="cockpit-layout">
        
        <!-- Sidebar navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">
                    <img src="logo.svg" alt="HearstAI" class="logo-img" />
                </h1>
            </div>
            
            <nav class="sidebar-nav">
                <a href="javascript:void(0)" class="nav-item active" data-view="dashboard">
                    <span class="nav-icon" data-icon="home"></span>
                    <span class="nav-label">Home</span>
                </a>
                <a href="javascript:void(0)" class="nav-item" data-view="cockpit">
                    <span class="nav-icon" data-icon="dashboard"></span>
                    <span class="nav-label">Cockpit</span>
                </a>
                <a href="javascript:void(0)" class="nav-item" data-view="projects">
                    <span class="nav-icon" data-icon="projects"></span>
                    <span class="nav-label">Projestions</span>
                </a>
                <a href="javascript:void(0)" class="nav-item" data-view="jobs">
                    <span class="nav-icon" data-icon="jobs"></span>
                    <span class="nav-label">Jobs</span>
                </a>
                <div class="sidebar-version">
                    HearstAI Version 1.0
                </div>
            </nav>
        </aside>
        
        <!-- Zone principale -->
        <div class="main-content">
            
            <!-- Header -->
            <header class="header" id="header">
                <div class="header-left">
                    <h2 class="page-title" id="page-title">Dashboard</h2>
                </div>
                <div class="header-right">
                    <button class="btn btn-primary" id="btn-new-action">
                        <span>+ New Project</span>
                    </button>
                    <div class="user-badge">
                        <span class="user-avatar" data-icon="user"></span>
                        <span class="user-name">Admin</span>
                    </div>
                </div>
            </header>
            
            <!-- Zone de contenu dynamique -->
            <main class="content-area" id="content-area">
                <!-- Le contenu sera injectÃ© dynamiquement par les vues JS -->
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>Loading...</p>
                </div>
            </main>
            
        </div>
    </div>
    
    <!-- Zone pour les modals -->
    <div id="modal-container"></div>
    
    <!-- Scripts -->
    <script type="module" src="js/icons.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/css/main.css
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/* ====================================
   RESET & VARIABLES - HEARST THEME
   ==================================== */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Couleurs principales - HEARST Style */
    --bg-primary: #0a0a0a;
    --bg-secondary: #1a1a1a;
    --bg-tertiary: #242424;
    --bg-hover: #2a2a2a;
    
    /* Accent Vert Logo HEARST - Signature */
    --accent-primary: #8afd81;
    --accent-primary-dark: #6fdc66;
    --accent-primary-light: #a5ff9c;
    
    /* Accent secondaire - Mint Green */
    --accent-secondary: #7bed9f;
    
    /* Accents secondaires */
    --accent-success: #8afd81;
    --accent-warning: #f6c344;
    --accent-danger: #ff6b6b;
    --accent-info: #4ecdc4;
    
    /* Textes */
    --text-primary: #ffffff;
    --text-secondary: #b8b8b8;
    --text-muted: #6b6b6b;
    
    /* Bordures */
    --border-color: #2a2a2a;
    --border-hover: #3a3a3a;
    
    /* Espacements */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* Layout */
    --sidebar-width: 200px;
    --header-height: 70px;
    
    /* Transitions */
    --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

html {
    height: 100%;
    width: 100%;
    overflow-x: hidden;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", Roboto, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
    overflow-x: hidden;
    overflow-y: hidden;
    font-weight: 400;
    letter-spacing: -0.01em;
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
}

/* ====================================
   LAYOUT PRINCIPAL
   ==================================== */

.cockpit-layout {
    display: flex;
    height: 100vh;
    width: 100%;
    overflow: hidden;
    position: relative;
}

/* ====================================
   SIDEBAR - HEARST STYLE
   ==================================== */

.sidebar {
    width: var(--sidebar-width);
    background: var(--bg-secondary);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    position: fixed;
    left: 0;
    top: 0;
    height: 100vh;
    z-index: 100;
}

.sidebar-header {
    padding: var(--spacing-xl) var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.logo {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: 0.5px;
    text-transform: uppercase;
}

.logo-icon {
    font-size: 20px;
}

.sidebar-nav {
    flex: 1;
    padding: var(--spacing-lg) 0;
    overflow-y: auto;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: 12px var(--spacing-lg);
    color: var(--text-secondary);
    text-decoration: none;
    transition: all var(--transition-fast);
    border-left: 2px solid transparent;
    margin: 2px 0;
    font-size: 14px;
    font-weight: 500;
}

.nav-item:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.nav-item.active {
    background: var(--accent-primary);
    color: var(--bg-primary);
    border-left-color: transparent;
    font-weight: 600;
}

.nav-icon {
    font-size: 18px;
    width: 20px;
    text-align: center;
    opacity: 0.9;
}

.nav-item.active .nav-icon {
    opacity: 1;
}

.nav-label {
    font-size: 14px;
}

.sidebar-footer {
    padding: var(--spacing-lg);
    border-top: 1px solid var(--border-color);
}

.sidebar-stats {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.stat-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
}

.stat-label {
    color: var(--text-muted);
}

.stat-value {
    color: var(--accent-primary);
    font-weight: 600;
    font-size: 13px;
}

/* ====================================
   MAIN CONTENT
   ==================================== */

.main-content {
    flex: 1;
    margin-left: var(--sidebar-width);
    display: flex;
    flex-direction: column;
    width: calc(100% - var(--sidebar-width));
    height: 100vh;
    overflow: hidden;
    min-width: 0;
}

/* ====================================
   HEADER - HEARST STYLE
   ==================================== */

.header {
    height: var(--header-height);
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0;
    position: sticky;
    top: 0;
    z-index: 50;
    width: 100%;
}

.header-left {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.page-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: -0.02em;
}

.header-right {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding-right: var(--spacing-xl);
}

.user-badge {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: 8px 16px;
    background: var(--bg-secondary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
    transition: all var(--transition-fast);
}

.user-badge:hover {
    border-color: var(--border-hover);
}

.user-avatar {
    font-size: 18px;
}

.user-name {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 500;
}

/* ====================================
   CONTENT AREA
   ==================================== */

.content-area {
    flex: 1;
    padding: 0;
    overflow-y: auto;
    overflow-x: hidden;
    background: var(--bg-primary);
    width: 100%;
    min-height: 0;
    position: relative;
}

/* ====================================
   LOADING STATE
   ==================================== */

.loading-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl) 0;
    gap: var(--spacing-md);
}

.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--bg-tertiary);
    border-top-color: var(--accent-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.loading-state p {
    color: var(--text-secondary);
    font-size: 14px;
}

/* ====================================
   RESPONSIVE - HEARST STYLE
   ==================================== */

/* PATCH RESPONSIVE FULL-SCREEN â€“ 18 Nov 2025 */
/* Correction du layout full-screen et du scroll */

/* Force html et body Ã  prendre toute la largeur/hauteur */
html {
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
    overflow-y: hidden !important;
}

body {
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
    overflow-y: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Force le layout Ã  prendre toute la largeur et hauteur */
.cockpit-layout {
    display: flex !important;
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    min-height: 100vh !important;
    overflow: hidden !important;
    position: relative !important;
}

/* Assure que le main-content prend bien l'espace restant en full-screen */
.main-content {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    width: calc(100vw - var(--sidebar-width)) !important;
    max-width: calc(100vw - var(--sidebar-width)) !important;
    min-width: 0 !important;
    height: 100vh !important;
    margin-left: var(--sidebar-width) !important;
    overflow: hidden !important;
}

/* Corrige la hauteur du content-area pour permettre le scroll */
.content-area {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    height: calc(100vh - var(--header-height)) !important;
    max-height: calc(100vh - var(--header-height)) !important;
    min-height: 0 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    padding: 0 !important;
    position: relative !important;
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/css/components.css
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/* ====================================
   ICONS - HEARST STYLE
   ==================================== */

.icon-inline {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
    margin-right: 6px;
}

.icon-inline svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
    fill: none;
}

.placeholder-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 64px;
    height: 64px;
    margin: 0 auto var(--spacing-lg);
    opacity: 0.5;
}

.placeholder-icon svg {
    width: 100%;
    height: 100%;
    stroke: var(--accent-primary);
    fill: none;
}

.stat-icon svg {
    width: 100%;
    height: 100%;
    stroke: var(--accent-primary);
    fill: none;
}

/* ====================================
   BUTTONS - HEARST STYLE
   ==================================== */

.btn,
button[type="submit"],
.btn-primary {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: 12px 24px;
    font-size: 14px;
    font-weight: 600;
    border: none;
    border-radius: 24px; /* pill shape */
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    font-family: inherit;
    letter-spacing: -0.01em;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
}

.btn:disabled,
button[type="submit"]:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.btn-primary,
button[type="submit"] {
    background: #8afd81;
    color: #000000;
}

.btn-primary:hover:not(:disabled),
button[type="submit"]:hover:not(:disabled) {
    background: #6fdc66;
    transform: scale(1.02);
    box-shadow: 0 8px 16px rgba(138, 253, 129, 0.15);
}

.btn-primary:active:not(:disabled),
button[type="submit"]:active:not(:disabled) {
    background: #5fcb55;
    transform: scale(0.98);
}

.btn-success {
    background: var(--accent-success);
    color: #000000;
    border-radius: 24px;
    padding: 12px 24px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
}

.btn-success:hover:not(:disabled) {
    background: #6fdc66;
    transform: scale(1.02);
    box-shadow: 0 8px 16px rgba(138, 253, 129, 0.15);
}

.btn-success:active:not(:disabled) {
    background: #5fcb55;
    transform: scale(0.98);
}

.btn-danger {
    background: var(--accent-danger);
    color: white;
    border-radius: 24px;
    padding: 12px 24px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
}

.btn-danger:hover:not(:disabled) {
    background: #ff5252;
    transform: scale(1.02);
    box-shadow: 0 8px 16px rgba(255, 107, 107, 0.15);
}

.btn-danger:active:not(:disabled) {
    transform: scale(0.98);
}

.btn-secondary {
    background: transparent;
    color: #FFFFFF;
    padding: 12px 24px;
    border-radius: 24px;
    border: 1px solid #252525;
    font-weight: 500;
    transition: all 0.3s ease;
    box-shadow: none;
}

.btn-secondary:hover:not(:disabled) {
    border-color: #8afd81;
    background: rgba(138, 253, 129, 0.05);
    transform: scale(1.02);
}

.btn-secondary:active:not(:disabled) {
    transform: scale(0.98);
}

.btn-ghost {
    background: transparent;
    color: var(--text-secondary);
    border-radius: 24px;
    padding: 12px 24px;
    box-shadow: none;
}

.btn-ghost:hover:not(:disabled) {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    transform: scale(1.02);
}

.btn-ghost:active:not(:disabled) {
    transform: scale(0.98);
}

.btn-sm {
    padding: 8px 16px;
    font-size: 12px;
    border-radius: 20px;
}

.btn-lg {
    padding: 14px 28px;
    font-size: 16px;
    border-radius: 28px;
}

/* ====================================
   CARDS - HEARST STYLE
   ==================================== */

.card,
.panel,
.widget,
.box {
    background: #1A1A1A;
    border-radius: 16px; /* arrondi gÃ©nÃ©reux */
    padding: 24px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
    border: 1px solid rgba(138, 253, 129, 0.08); /* border lime subtile */
    transition: all 0.3s ease;
}

.card:hover,
.panel:hover,
.widget:hover,
.box:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.8);
    border-color: rgba(138, 253, 129, 0.15);
}

.card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
}

.card-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: -0.01em;
}

.card-body {
    color: var(--text-secondary);
    font-size: 13px;
    line-height: 1.6;
}

.card-footer {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--spacing-lg);
}

/* ====================================
   TABLES - HEARST STYLE
   ==================================== */

.table-container {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    overflow: hidden;
}

.table {
    width: 100%;
    border-collapse: collapse;
}

.table thead {
    background: #141414;
    border-radius: 12px 12px 0 0;
}

.table th {
    padding: 14px var(--spacing-md);
    text-align: left;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    color: var(--text-muted);
    border-bottom: 1px solid var(--border-color);
    letter-spacing: 0.05em;
}

.table td {
    padding: 14px var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
    color: var(--text-secondary);
    font-size: 13px;
}

.table tbody tr:last-child td {
    border-bottom: none;
}

.table tbody tr {
    transition: background var(--transition-fast);
}

.table tbody tr:hover {
    background: rgba(138, 253, 129, 0.03);
}

/* ====================================
   BADGES & TAGS - HEARST STYLE
   ==================================== */

.badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 12px;
    font-size: 12px;
    font-weight: 600;
    border-radius: 9999px; /* pill complet */
    white-space: nowrap;
    letter-spacing: 0.02em;
    text-transform: uppercase;
}

.badge-success {
    background: rgba(138, 253, 129, 0.1);
    color: #8afd81;
    border: none;
}

.badge-warning {
    background: rgba(246, 195, 68, 0.15);
    color: var(--accent-warning);
    border: 1px solid rgba(246, 195, 68, 0.3);
}

.badge-danger {
    background: rgba(255, 107, 107, 0.15);
    color: var(--accent-danger);
    border: 1px solid rgba(255, 107, 107, 0.3);
}

.badge-info {
    background: rgba(78, 205, 196, 0.15);
    color: var(--accent-info);
    border: 1px solid rgba(78, 205, 196, 0.3);
}

.badge-neutral {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
}

.badge-dot::before {
    content: "";
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: currentColor;
}

/* ====================================
   FORMS
   ==================================== */

.form-group {
    margin-bottom: var(--spacing-md);
}

.form-label {
    display: block;
    margin-bottom: var(--spacing-xs);
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
}

.form-input,
.form-select,
.form-textarea,
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="date"],
textarea,
select {
    width: 100%;
    padding: 12px 16px;
    background: #141414;
    border: 1px solid #252525;
    border-radius: 12px;
    color: #FFFFFF;
    font-size: 14px;
    font-family: inherit;
    transition: all 0.3s ease;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus,
input[type="text"]:focus,
input[type="email"]:focus,
input[type="password"]:focus,
input[type="number"]:focus,
input[type="date"]:focus,
textarea:focus,
select:focus {
    outline: none;
    border-color: #8afd81;
    box-shadow: 0 0 0 3px rgba(138, 253, 129, 0.1);
}

.form-textarea {
    min-height: 100px;
    resize: vertical;
}

/* ====================================
   MODAL - HEARST STYLE
   ==================================== */

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(4px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    padding: var(--spacing-lg);
    animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal {
    background: #1A1A1A;
    border: 1px solid #252525;
    border-radius: 20px;
    padding: 32px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.95);
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-small {
    max-width: 400px;
}

.modal-medium {
    max-width: 600px;
}

.modal-large {
    max-width: 900px;
}

.modal-header {
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.modal-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: -0.01em;
}

.modal-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 28px;
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all var(--transition-fast);
    line-height: 1;
}

.modal-close:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.modal-body {
    padding: var(--spacing-lg);
    overflow-y: auto;
    flex: 1;
}

.modal-footer {
    padding: var(--spacing-lg);
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: var(--spacing-sm);
    justify-content: flex-end;
}

/* ====================================
   ALERTS
   ==================================== */

.alert {
    padding: var(--spacing-md);
    border-radius: 6px;
    margin-bottom: var(--spacing-md);
    display: flex;
    align-items: start;
    gap: var(--spacing-sm);
}

.alert-success {
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.3);
    color: var(--accent-success);
}

.alert-warning {
    background: rgba(245, 158, 11, 0.1);
    border: 1px solid rgba(245, 158, 11, 0.3);
    color: var(--accent-warning);
}

.alert-danger {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: var(--accent-danger);
}

.alert-info {
    background: rgba(6, 182, 212, 0.1);
    border: 1px solid rgba(6, 182, 212, 0.3);
    color: var(--accent-info);
}

/* ====================================
   UTILITY CLASSES
   ==================================== */

.text-primary { color: var(--text-primary); }
.text-secondary { color: var(--text-secondary); }
.text-muted { color: var(--text-muted); }
.text-success { color: var(--accent-success); }
.text-danger { color: var(--accent-danger); }
.text-warning { color: var(--accent-warning); }

.mt-0 { margin-top: 0; }
.mt-sm { margin-top: var(--spacing-sm); }
.mt-md { margin-top: var(--spacing-md); }
.mt-lg { margin-top: var(--spacing-lg); }

.mb-0 { margin-bottom: 0; }
.mb-sm { margin-bottom: var(--spacing-sm); }
.mb-md { margin-bottom: var(--spacing-md); }
.mb-lg { margin-bottom: var(--spacing-lg); }

.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.gap-sm { gap: var(--spacing-sm); }
.gap-md { gap: var(--spacing-md); }
.gap-lg { gap: var(--spacing-lg); }

.hidden { display: none; }

/* PATCH RESPONSIVE â€“ 18 Nov 2025 */
/* Assure que les conteneurs ne dÃ©passent pas la largeur disponible */

.card,
.panel,
.widget,
.box {
    max-width: 100% !important;
    box-sizing: border-box !important;
}

.table-container {
    max-width: 100% !important;
    overflow-x: auto !important;
}

.card-grid {
    max-width: 100% !important;
    box-sizing: border-box !important;
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/css/cockpit.css
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/* Cockpit Mining Operations - HEARST Design System */
/* Toutes les couleurs utilisent #8afd81 (vert HEARST) */

/* Variables HEARST */
:root {
    --hearst-primary: #8afd81;
    --hearst-primary-dark: #6fdc66;
    --hearst-primary-light: #a5ff9c;
    --hearst-mint-500: #7bed9f;
    --hearst-dark-900: #0A0A0A;
    --hearst-dark-800: #141414;
    --hearst-dark-700: #1A1A1A;
}

/* Styles supplÃ©mentaires pour le cockpit (complÃ©mentaires Ã  main.css et components.css) */
.cockpit-view {
    padding: 0;
}

.cockpit-content {
    width: 100%;
}

/* Navigation cockpit dans le header */
.cockpit-header-nav {
    display: flex;
    align-items: center;
    gap: 16px;
    position: absolute;
    left: 0;
    right: 0;
    width: 100%;
    justify-content: center;
    pointer-events: none;
}

.cockpit-header-nav > * {
    pointer-events: auto;
}

/* Horloge et badge LIVE Ã  droite */
.cockpit-header-info {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-left: auto;
    position: relative;
    z-index: 10;
}

.cockpit-nav-tabs {
    display: flex;
    align-items: center;
    gap: 4px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 4px;
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.cockpit-nav-tabs::-webkit-scrollbar {
    display: none;
}

.cockpit-nav-tab {
    display: flex;
    align-items: center;
    gap: 8px;
    height: 40px;
    border: none;
    background: transparent;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: rgba(255, 255, 255, 0.6);
    padding: 0 12px;
    position: relative;
    white-space: nowrap;
    flex-shrink: 0;
}

.cockpit-nav-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

.cockpit-nav-icon svg {
    width: 20px;
    height: 20px;
    stroke: currentColor;
}

.cockpit-nav-label {
    font-size: 13px;
    font-weight: 500;
    line-height: 1;
}

.cockpit-nav-tab:hover {
    background: rgba(255, 255, 255, 0.05);
    color: rgba(255, 255, 255, 0.9);
}

.cockpit-nav-tab.active {
    background: #8afd81;
    color: #000000;
}

.cockpit-nav-tab.active .cockpit-nav-icon svg {
    stroke: #000000;
}

.cockpit-nav-tab.active .cockpit-nav-label {
    color: #000000;
    font-weight: 600;
}

.cockpit-header-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.header-clock {
    font-size: 13px;
    font-weight: 600;
    color: #8afd81;
    font-family: 'Courier New', monospace;
    letter-spacing: 0.5px;
}

.live-badge {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: rgba(138, 253, 129, 0.15);
    border: 1px solid rgba(138, 253, 129, 0.4);
    border-radius: 16px;
    font-size: 11px;
    font-weight: 700;
    color: #8afd81;
    text-transform: uppercase;
    letter-spacing: 0.8px;
}

.live-dot {
    display: inline-block;
    width: 6px;
    height: 6px;
    background: #8afd81;
    border-radius: 50%;
    animation: pulse-live-dot 1.5s ease-in-out infinite;
}

@keyframes pulse-live-dot {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(1.2); }
}

/* Section header */
.cockpit-section-header {
    margin-bottom: 24px;
}

.cockpit-section-header .view-title {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.02em;
    margin-bottom: 4px;
}

.cockpit-section-header .view-subtitle {
    font-size: 13px;
    color: rgba(255, 255, 255, 0.5);
}


/* Status badges */
.status-badge {
    display: inline-block;
    font-size: 11px;
    font-weight: 600;
    padding: 6px 14px;
    border-radius: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-badge.green {
    background: rgba(138, 253, 129, 0.12);
    color: #8afd81;
}

.status-badge.orange {
    background: rgba(255, 165, 0, 0.12);
    color: #ffa500;
}

.status-badge.red {
    background: rgba(255, 77, 77, 0.12);
    color: #ff4d4d;
}

/* Text utilities */
.text-success {
    color: #8afd81;
}

.text-warning {
    color: #ffa500;
}

.text-danger {
    color: #ff4d4d;
}

/* PATCH RESPONSIVE FULL-SCREEN â€“ 18 Nov 2025 */
/* Assure que les sections cockpit prennent toute la largeur disponible */

.cockpit-view {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
}

.cockpit-content {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
}

.section-premium {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
}

/* Assure que les conteneurs de sections ne dÃ©passent pas */
.cockpit-section {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
}



â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/css/projections.css
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/* Projections Mining Intelligence Platform - HEARST Design System */
/* Toutes les couleurs utilisent #8afd81 (vert HEARST) */

/* Variables HEARST pour projections */
:root {
    --hearst-primary: #8afd81;
    --hearst-primary-dark: #6fdc66;
    --hearst-primary-light: #a5ff9c;
    --hearst-mint-500: #7bed9f;
    --hearst-dark-900: #0A0A0A;
    --hearst-dark-800: #141414;
    --hearst-dark-700: #1A1A1A;
}

/* Section Premium */
.section-premium {
    margin-bottom: 24px;
}

/* Accordion System Premium */
.accordion-section {
    margin-bottom: 20px;
    border: 1px solid rgba(138, 253, 129, 0.15);
    border-radius: 16px;
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.95) 0%, rgba(17, 17, 17, 0.98) 100%);
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
}

.accordion-section:hover {
    border-color: rgba(138, 253, 129, 0.3);
    box-shadow: 0 8px 16px rgba(138, 253, 129, 0.1);
}

.accordion-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 28px;
    cursor: pointer;
    transition: all 0.3s ease;
    user-select: none;
    background: transparent;
}

.accordion-header:hover {
    background: rgba(138, 253, 129, 0.03);
}

.accordion-header:active {
    transform: scale(0.99);
}

.accordion-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 14px;
    letter-spacing: -0.2px;
}

.accordion-icon {
    width: 22px;
    height: 22px;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    color: #8afd81;
    filter: drop-shadow(0 0 8px rgba(138, 253, 129, 0.3));
}

.accordion-section.collapsed .accordion-icon {
    transform: rotate(-90deg);
}

.accordion-content {
    max-height: 3000px;
    overflow: hidden;
    transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), 
                padding 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.3s ease;
    padding: 0 28px 28px 28px;
    opacity: 1;
}

.accordion-section.collapsed .accordion-content {
    max-height: 0;
    padding: 0 28px;
    opacity: 0;
}

.accordion-badge {
    font-size: 10px;
    padding: 5px 12px;
    background: linear-gradient(135deg, rgba(138, 253, 129, 0.15) 0%, rgba(138, 253, 129, 0.08) 100%);
    color: #8afd81;
    border: 1px solid rgba(138, 253, 129, 0.2);
    border-radius: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    box-shadow: 0 2px 8px rgba(138, 253, 129, 0.1);
}

.accordion-subtitle {
    font-size: 13px;
    color: var(--text-muted);
    font-weight: 500;
    margin-bottom: 20px;
    line-height: 1.5;
}

/* Market Metrics Cards */
.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 12px;
    margin-bottom: 40px;
}

.metric-card {
    background: #1A1A1A;
    border: 1px solid rgba(138, 253, 129, 0.08);
    border-radius: 16px;
    padding: 24px;
    transition: all 0.3s ease;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
}

.metric-card > * {
    display: block;
}

.metric-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.8);
    border-color: rgba(138, 253, 129, 0.15);
}

.metric-card.green:hover,
.metric-card.blue:hover,
.metric-card.yellow:hover,
.metric-card.purple:hover {
    border-color: #8afd81;
    box-shadow: 0 8px 16px rgba(138, 253, 129, 0.2);
}

.metric-icon-wrapper {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 16px;
}

.metric-icon-wrapper.green,
.metric-icon-wrapper.blue,
.metric-icon-wrapper.yellow,
.metric-icon-wrapper.purple {
    background: linear-gradient(135deg, rgba(138, 253, 129, 0.15) 0%, rgba(138, 253, 129, 0.05) 100%);
}

.metric-label {
    font-size: 11px;
    font-weight: 700;
    color: var(--text-muted);
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: 8px;
    display: block;
}

.metric-value {
    font-size: 24px;
    font-weight: 700;
    letter-spacing: -0.5px;
    margin-bottom: 6px;
    display: block;
    line-height: 1.2;
}

.metric-value.green,
.metric-value.blue,
.metric-value.yellow,
.metric-value.purple {
    color: #8afd81;
}

.metric-description {
    font-size: 12px;
    color: var(--text-secondary);
    font-weight: 500;
    line-height: 1.4;
    display: block;
}

/* News Items */
.news-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 16px;
    transition: all 0.2s ease;
    cursor: pointer;
}

.news-item:hover {
    border-color: #8afd81;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(138, 253, 129, 0.1);
}

/* Tables Premium */
.table-container {
    background: #1A1A1A;
    border: 1px solid rgba(138, 253, 129, 0.08);
    border-radius: 16px;
    overflow: hidden;
    margin-bottom: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
}

.table-premium {
    width: 100%;
    border-collapse: collapse;
}

.table-premium thead {
    background: #141414;
}

.table-premium th {
    padding: 18px 24px;
    text-align: left;
    font-size: 12px;
    font-weight: 700;
    color: #8afd81;
    letter-spacing: 0.5px;
    text-transform: uppercase;
}

.table-premium td {
    padding: 18px 24px;
    border-top: 1px solid var(--border-color);
    font-size: 14px;
    color: var(--text-secondary);
}

.table-premium tbody tr:hover {
    background: rgba(138, 253, 129, 0.03);
}

/* Projection Tab Content */
.projection-tab-content {
    display: none;
}

.projection-tab-content.active {
    display: block;
    animation: fadeIn 0.4s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Pulse Animation */
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
}

/* Projection Section Placeholder */
.projection-section-placeholder {
    padding: 40px;
    text-align: center;
    color: var(--text-muted);
}

/* Stepper Navigation */
.stepper-container {
    background: #1A1A1A;
    border: 1px solid rgba(138, 253, 129, 0.2);
    border-radius: 24px;
    padding: 48px 60px;
    margin-bottom: 32px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
}

.stepper {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    position: relative;
    padding: 0;
}

.progress-line-container {
    position: absolute;
    top: 28px;
    left: 56px;
    right: 56px;
    height: 3px;
    z-index: 0;
}

.progress-line-bg {
    width: 100%;
    height: 100%;
    background: var(--border-color);
    border-radius: 2px;
}

.stepper-progress {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: #8afd81;
    border-radius: 2px;
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    position: relative;
    z-index: 2;
    cursor: pointer;
    flex: 1;
    transition: all 0.3s ease;
}

.step-circle {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: #1A1A1A;
    border: 3px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: 800;
    color: var(--text-muted);
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.step.completed .step-circle {
    background: #1A1A1A;
    border-color: #8afd81;
    color: #8afd81;
}

.step.active .step-circle {
    background: #8afd81;
    border-color: #8afd81;
    color: #000;
    transform: scale(1.1);
}

.step.completed .step-circle::after {
    content: 'âœ“';
    position: absolute;
    font-size: 24px;
    font-weight: 900;
    color: #8afd81;
}

.step.completed .step-circle {
    font-size: 0;
}

.step-label {
    font-size: 11px;
    font-weight: 700;
    color: var(--text-muted);
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
    line-height: 1.4;
    max-width: 120px;
}

.step.active .step-label {
    color: #8afd81;
    font-weight: 800;
}

.step.completed .step-label {
    color: var(--text-secondary);
}

.step:hover .step-circle {
    transform: scale(1.05);
    border-color: #8afd81;
}

.step.active:hover .step-circle {
    transform: scale(1.15);
}

.step:hover .step-label {
    color: var(--text-primary);
}

/* Step Content */
.step-content {
    display: none;
    animation: fadeIn 0.3s ease;
}

.step-content.active {
    display: block;
}

/* Param Card */
.param-card {
    background: #1A1A1A;
    border: 1px solid rgba(138, 253, 129, 0.08);
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
}

.param-card-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.param-card-subtitle {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 20px;
}

/* Grid Layouts */
.grid-2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.grid-3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

.grid-4 {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
}

/* Radio Cards */
.radio-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
    margin-bottom: 20px;
}

.radio-card {
    position: relative;
    padding: 16px;
    background: #1A1A1A;
    border: 2px solid var(--border-color);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.radio-card:hover {
    border-color: #8afd81;
    background: rgba(138, 253, 129, 0.05);
}

.radio-card input[type="radio"] {
    position: absolute;
    opacity: 0;
}

.radio-card input[type="radio"]:checked ~ .radio-card-label {
    color: #8afd81;
}

.radio-card input[type="radio"]:checked ~ * {
    border-color: #8afd81;
}

.radio-card:has(input[type="radio"]:checked) {
    border-color: #8afd81;
    background: rgba(138, 253, 129, 0.08);
}

.radio-card-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
    display: block;
}

.radio-card-desc {
    font-size: 11px;
    color: var(--text-muted);
    display: block;
}

/* Machine Cards */
.machine-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
    margin-bottom: 20px;
}

.machine-card {
    background: #1A1A1A;
    border: 2px solid var(--border-color);
    border-radius: 12px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
}

.machine-card:hover {
    border-color: #8afd81;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(138, 253, 129, 0.1);
}

.machine-card.selected {
    border-color: #8afd81;
    background: rgba(138, 253, 129, 0.08);
}

.machine-card-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 12px;
}

.machine-name {
    font-size: 15px;
    font-weight: 700;
    color: var(--text-primary);
}

.machine-badge {
    padding: 3px 8px;
    background: rgba(138, 253, 129, 0.15);
    border: 1px solid #8afd81;
    border-radius: 4px;
    font-size: 9px;
    font-weight: 700;
    color: #8afd81;
    text-transform: uppercase;
}

.machine-specs {
    display: grid;
    gap: 8px;
    margin-bottom: 12px;
}

.machine-spec {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
}

.machine-spec-label {
    color: #8afd81;
}

.machine-spec-value {
    color: var(--text-primary);
    font-weight: 600;
}

.machine-price {
    padding-top: 12px;
    border-top: 1px solid var(--border-color);
    font-size: 13px;
    color: var(--text-muted);
}

.machine-price-value {
    font-size: 18px;
    font-weight: 700;
    color: #8afd81;
}

/* Form Inputs */
.form-label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: #8afd81;
    margin-bottom: 8px;
    letter-spacing: 0.3px;
}

.form-input,
.form-select {
    width: 100%;
    padding: 14px 16px;
    background: #1A1A1A;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    color: var(--text-primary);
    font-size: 13px;
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    transition: all 0.25s ease;
}

.form-input:focus,
.form-select:focus {
    outline: none;
    border-color: #8afd81;
    background: #141414;
    box-shadow: 0 0 0 3px rgba(138, 253, 129, 0.1);
}

.form-input:hover,
.form-select:hover {
    border-color: rgba(138, 253, 129, 0.3);
}

/* Summary Panel */
.summary-panel {
    position: sticky;
    top: 20px;
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.95) 0%, rgba(17, 17, 17, 0.98) 100%);
    border: 2px solid #8afd81;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
}

.summary-title {
    font-size: 15px;
    font-weight: 800;
    color: #8afd81;
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-align: center;
    padding-bottom: 16px;
    border-bottom: 2px solid rgba(138, 253, 129, 0.3);
}

.summary-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid var(--border-color);
    font-size: 13px;
}

.summary-item:last-child {
    border-bottom: none;
}

.summary-label {
    color: var(--text-muted);
}

.summary-value {
    color: var(--text-primary);
    font-weight: 600;
}

.summary-value.highlight {
    color: #8afd81;
    font-size: 16px;
    font-weight: 700;
}

/* Badge */
.badge {
    font-size: 10px;
    padding: 4px 10px;
    background: rgba(138, 253, 129, 0.15);
    border: 1px solid #8afd81;
    border-radius: 12px;
    color: #8afd81;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Button Group */
.btn-group {
    display: flex;
    gap: 12px;
    margin-top: 32px;
    justify-content: flex-end;
}

/* Responsive - Force override des styles inline */


/* Section Header */
.section-header-premium {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    flex-wrap: wrap;
    gap: 16px;
}

.section-title-premium {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
    letter-spacing: -0.5px;
}

.section-desc-premium {
    font-size: 12px;
    color: var(--text-muted);
    font-weight: 500;
}

.section-actions {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
}

/* Chart Container */
.chart-container {
    background: var(--gray-900);
    border: 1px solid var(--gray-700);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 24px;
}

.chart-title {
    font-size: 15px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 16px;
}

/* Results Charts Grid */
.results-charts-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
}

/* Calculator Main Content */
.main-content {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: 24px;
}

.summary-panel {
    background: var(--gray-900);
    border: 1px solid var(--gray-700);
    border-radius: 12px;
    padding: 24px;
    height: fit-content;
    position: sticky;
    top: 24px;
}

.summary-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--gray-700);
}

.summary-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.summary-label {
    font-size: 13px;
    color: var(--text-muted);
}

.summary-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.summary-value.highlight {
    color: #8afd81;
    font-size: 16px;
    font-weight: 700;
}

/* Projects Toolbar */
.projects-toolbar {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
    flex-wrap: wrap;
    align-items: center;
}

.projects-toolbar .form-input {
    flex: 1;
    min-width: 250px;
}

.projects-toolbar select.form-input {
    width: 180px;
    flex: 0 0 auto;
}

/* News Feed Container */
.news-feed-container {
    display: grid;
    gap: 12px;
    max-height: 500px;
    overflow-y: auto;
    padding-right: 8px;
}

/* News Item */
.news-item {
    background: var(--gray-900);
    border: 1px solid var(--gray-700);
    border-radius: 12px;
    padding: 16px;
    transition: all 0.2s ease;
}

.news-item:hover {
    border-color: rgba(138, 253, 129, 0.3);
    transform: translateY(-2px);
}

.news-item-content {
    display: flex;
    gap: 14px;
}

.news-item-icon {
    width: 44px;
    height: 44px;
    background: rgba(138, 253, 129, 0.15);
    border: 1px solid rgba(138, 253, 129, 0.3);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.news-item-body {
    flex: 1;
}

.news-item-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    flex-wrap: wrap;
}

.news-item-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 11px;
    color: var(--text-muted);
}

/* Update Badge */
.update-badge {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 20px;
}

.update-dot {
    width: 6px;
    height: 6px;
    background: #8afd81;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* Section Icon */
.section-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, rgba(138, 253, 129, 0.2), rgba(138, 253, 129, 0.05));
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid rgba(138, 253, 129, 0.3);
}

/* Alert Info */
.alert-info {
    background: rgba(138, 253, 129, 0.1);
    border: 1px solid #8afd81;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 32px;
}

.alert-info strong {
    color: #8afd81;
}

.alert-info span {
    color: var(--text-secondary);
}

/* Percentile Grid (Monte Carlo) */
.percentile-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 32px;
}

.percentile-item {
    padding: 16px;
    background: var(--gray-800);
    border-radius: 12px;
    text-align: center;
    border: 1px solid var(--border-color);
    transition: all 0.2s ease;
}

.percentile-item:hover {
    border-color: #8afd81;
    transform: translateY(-2px);
}

.percentile-label {
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: block;
}

.percentile-value {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    display: block;
}

/* Project Card (Projects List) */
.project-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 20px;
    transition: all 0.2s ease;
    cursor: pointer;
}

.project-card:hover {
    border-color: #8afd81;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(138, 253, 129, 0.1);
}

.project-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
}

.project-name {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.project-date {
    font-size: 12px;
    color: var(--text-muted);
}

.project-actions {
    display: flex;
    gap: 8px;
}

.btn-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--gray-800);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text-secondary);
}

.btn-icon:hover {
    background: var(--gray-700);
    border-color: #8afd81;
    color: #8afd81;
}

.project-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-top: 16px;
}

.project-stat {
    text-align: center;
}

.project-stat-label {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: block;
    margin-bottom: 4px;
}

.project-stat-value {
    font-size: 18px;
    font-weight: 700;
    color: #8afd81;
    display: block;
}



â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/app.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Main Application Entry Point
import { dashboardTemplate, dashboardStyles } from './views/dashboard.js';
import { renderProjectsView, projectsStyles } from './views/projects.js';
import { renderJobsView, jobsStyles } from './views/jobs.js';
import { renderVersionsView, versionsStyles } from './views/versions.js';
import { renderPromptsView, promptsStyles } from './views/prompts.js';
import { renderLogsView, logsStyles } from './views/logs.js';
import { renderCockpitView, cockpitStyles } from './views/cockpit.js';
import { initCockpit } from './cockpit.js';
import { renderSettingsView, settingsStyles } from './views/settings.js';
import { initSettings } from './settings.js';
import { initProjections } from './projections.js';
import API from './api.js';
import Modal from './components/modal.js';
import notify from './components/notification.js';
import CONFIG, { logEnvironment } from './config.js';
import themeManager from './theme.js';
import exportModule from './export.js';
import { Icons } from './icons.js';
import { showCreateProjectModal, showCreateJobModal } from './modals.js';

class ClaudeCockpitApp {
    constructor() {
        this.currentView = 'dashboard';
        this.contentArea = document.getElementById('content-area');
        this.pageTitle = document.getElementById('page-title');
        this.btnNewAction = document.getElementById('btn-new-action');
        
        this.init();
    }
    
    async init() {
        logEnvironment();
        console.log('ðŸš€ Claude CI/CD Cockpit initialized');
        
        // EmpÃªcher le scroll automatique lors des changements d'ancre
        window.addEventListener('hashchange', (e) => {
            e.preventDefault();
            const hash = window.location.hash;
            if (hash) {
                // EmpÃªcher le scroll vers l'ancre
                const target = document.querySelector(hash);
                if (target) {
                    target.scrollIntoView = () => {};
                }
            }
        }, false);
        
        // Load icons
        this.loadIcons();
        
        // Setup navigation FIRST (before backend check)
        this.setupNavigation();
        
        // Setup header button
        this.setupHeaderButton();
        
        // Load initial view
        this.loadView('dashboard');
        
        // Check backend connection (non-blocking)
        try {
            const health = await API.health();
            console.log('âœ… Backend connected:', health);
            notify.success('Backend connected successfully');
            // Update stats periodically
            this.updateStats();
            setInterval(() => this.updateStats(), 30000); // Every 30s
        } catch (error) {
            console.error('âŒ Backend connection failed:', error);
            notify.error('Backend connection failed');
            this.showConnectionError();
            // Continue anyway - navigation should still work
        }
    }
    
    loadIcons() {
        // Load icons for data-icon attributes
        const loadIconsFn = () => {
            document.querySelectorAll('[data-icon]').forEach(el => {
                const iconName = el.getAttribute('data-icon');
                if (Icons[iconName]) {
                    el.innerHTML = Icons[iconName];
                }
            });
        };
        
        loadIconsFn();
        
        // Store reload function for later use
        this.reloadIcons = loadIconsFn;
    }
    
    showConnectionError() {
        this.contentArea.innerHTML = `
            <div class="card">
                <div class="card-body">
                    <h3 class="text-danger mb-md"><span class="icon-inline">${Icons.error}</span> Backend Connection Failed</h3>
                    <p class="text-secondary mb-md">Cannot connect to backend server.</p>
                    <p class="text-secondary mb-md">Make sure the backend is running:</p>
                    <pre style="background: #141414; padding: 16px; border-radius: 12px; color: #8afd81; border: 1px solid #252525;">cd backend
npm install
node server.js</pre>
                    <button class="btn btn-primary mt-md" onclick="location.reload()">Retry Connection</button>
                </div>
            </div>
        `;
    }
    
    setupNavigation() {
        const navItems = document.querySelectorAll('.nav-item');
        
        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                
                // EmpÃªcher le focus automatique qui peut causer un scroll
                item.blur();
                
                // EmpÃªcher le scroll automatique
                const view = item.getAttribute('data-view');
                
                // Sauvegarder la position du scroll AVANT tout changement
                const sidebar = document.querySelector('.sidebar-nav');
                const sidebarScroll = sidebar ? sidebar.scrollTop : 0;
                const pageScroll = window.pageYOffset || document.documentElement.scrollTop;
                const bodyScroll = document.body.scrollTop || 0;
                
                // Bloquer temporairement le scroll pendant le changement de vue
                const originalOverflow = document.body.style.overflow;
                const originalSidebarOverflow = sidebar ? sidebar.style.overflow : '';
                
                if (sidebar) {
                    sidebar.style.overflow = 'hidden';
                }
                
                // Charger la vue
                this.loadView(view);
                
                // Update active state
                navItems.forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
                
                // Restaurer immÃ©diatement les positions de scroll (plusieurs fois pour Ãªtre sÃ»r)
                const restoreScroll = () => {
                    if (sidebar) {
                        sidebar.scrollTop = sidebarScroll;
                    }
                    window.scrollTo(0, pageScroll);
                    document.documentElement.scrollTop = pageScroll;
                    document.body.scrollTop = bodyScroll;
                };
                
                // Restaurer immÃ©diatement
                restoreScroll();
                
                // Restaurer via requestAnimationFrame
                requestAnimationFrame(() => {
                    restoreScroll();
                    // Restaurer l'overflow aprÃ¨s restauration du scroll
                    if (sidebar) {
                        sidebar.style.overflow = originalSidebarOverflow;
                    }
                    document.body.style.overflow = originalOverflow;
                });
                
                // Double vÃ©rification aprÃ¨s un court dÃ©lai
                setTimeout(() => {
                    restoreScroll();
                }, 10);
                
                // Triple vÃ©rification aprÃ¨s un dÃ©lai plus long
                setTimeout(() => {
                    restoreScroll();
                }, 100);
            });
        });
    }
    
    setupHeaderButton() {
        this.btnNewAction.addEventListener('click', () => {
            this.handleNewAction();
        });
    }
    
    async loadView(viewName) {
        // Sauvegarder la position du scroll avant le changement
        const savedScroll = {
            page: window.pageYOffset || document.documentElement.scrollTop,
            body: document.body.scrollTop || 0,
            sidebar: (() => {
                const sidebar = document.querySelector('.sidebar-nav');
                return sidebar ? sidebar.scrollTop : 0;
            })()
        };
        
        this.currentView = viewName;
        this.updatePageTitle(viewName);
        this.updateHeaderButton(viewName);
        
        // Show loading state
        this.contentArea.innerHTML = `
            <div class="loading-state">
                <div class="spinner"></div>
                <p>Loading ${viewName}...</p>
            </div>
        `;
        
        // Restaurer le scroll immÃ©diatement aprÃ¨s le changement de contenu
        const restoreScroll = () => {
            window.scrollTo(0, savedScroll.page);
            document.documentElement.scrollTop = savedScroll.page;
            document.body.scrollTop = savedScroll.body;
            const sidebar = document.querySelector('.sidebar-nav');
            if (sidebar) {
                sidebar.scrollTop = savedScroll.sidebar;
            }
        };
        
        restoreScroll();
        
        // Load view data and render
        try {
            const data = await this.fetchViewData(viewName);
            this.renderView(viewName, data);
            
            // Restaurer le scroll aprÃ¨s le rendu (plusieurs fois pour Ãªtre sÃ»r)
            requestAnimationFrame(() => {
                restoreScroll();
            });
            
            setTimeout(() => {
                restoreScroll();
            }, 10);
            
            setTimeout(() => {
                restoreScroll();
            }, 50);
            
            // Reload icons after view render
            if (this.reloadIcons) {
                this.reloadIcons();
            }
        } catch (error) {
            console.error('Error loading view:', error);
            this.contentArea.innerHTML = `
                <div class="card">
                    <div class="card-body">
                        <h3 class="text-danger">Error loading ${viewName}</h3>
                        <p class="text-secondary">${error.message}</p>
                    </div>
                </div>
            `;
            restoreScroll();
        }
    }
    
    updatePageTitle(view) {
        const titles = {
            dashboard: 'Dashboard',
            projects: 'Projestions',
            jobs: 'Jobs',
            versions: 'Versions',
            prompts: 'Prompt Profiles',
            logs: 'Activity Logs',
            cockpit: 'Cockpit',
            settings: 'Settings'
        };
        
        this.pageTitle.textContent = titles[view] || view;
        this.pageTitle.style.display = 'block';
    }
    
    updateHeaderButton(view) {
        const buttons = {
            dashboard: '+ New Project',
            projects: '+ New Project',
            jobs: '+ New Job',
            versions: '+ Import Version',
            prompts: '+ New Prompt',
            logs: `<span class="icon-inline">${Icons.refresh}</span> Refresh`,
            cockpit: `<span class="icon-inline">${Icons.refresh}</span> Refresh`
        };
        
        if (view === 'cockpit') {
            // Pour cockpit, on cache le bouton et on affiche la navigation
            this.btnNewAction.style.display = 'none';
            // Cacher le header-right (Admin)
            const headerRight = document.querySelector('.header-right');
            if (headerRight) {
                headerRight.style.display = 'none';
            }
            // Afficher le header-left pour le titre "Cockpit"
            const headerLeft = document.querySelector('.header-left');
            if (headerLeft) {
                headerLeft.style.display = 'flex';
            }
            // Supprimer les autres navigations
            const projectionsNav = document.getElementById('projections-header-nav');
            if (projectionsNav) projectionsNav.remove();
            const settingsNav = document.getElementById('settings-header-nav');
            if (settingsNav) settingsNav.remove();
            const header = document.querySelector('.header');
            if (header) {
                header.classList.remove('has-projections-nav', 'has-settings-nav');
                header.classList.add('has-cockpit-nav');
            }
            this.setupCockpitHeaderNav();
        } else if (view === 'projects') {
            // Pour projects, on cache le bouton et on affiche la navigation
            this.btnNewAction.style.display = 'none';
            // Cacher le header-right (Admin)
            const headerRight = document.querySelector('.header-right');
            if (headerRight) {
                headerRight.style.display = 'none';
            }
            // Afficher le header-left pour le titre "Projestions"
            const headerLeft = document.querySelector('.header-left');
            if (headerLeft) {
                headerLeft.style.display = 'flex';
            }
            // Supprimer les autres navigations
            const cockpitNav = document.getElementById('cockpit-header-nav');
            if (cockpitNav) cockpitNav.remove();
            const cockpitHeaderInfo = document.getElementById('cockpit-header-info');
            if (cockpitHeaderInfo) cockpitHeaderInfo.remove();
            const settingsNav = document.getElementById('settings-header-nav');
            if (settingsNav) settingsNav.remove();
            const header = document.querySelector('.header');
            if (header) {
                header.classList.remove('has-cockpit-nav', 'has-settings-nav');
                header.classList.add('has-projections-nav');
            }
            this.setupProjectionsHeaderNav();
        } else if (view === 'settings') {
            // Pour settings, on cache le bouton et on affiche la navigation
            this.btnNewAction.style.display = 'none';
            // Cacher le header-right (Admin)
            const headerRight = document.querySelector('.header-right');
            if (headerRight) {
                headerRight.style.display = 'none';
            }
            // Afficher le header-left pour le titre "Settings"
            const headerLeft = document.querySelector('.header-left');
            if (headerLeft) {
                headerLeft.style.display = 'flex';
            }
            // Supprimer les autres navigations
            const cockpitNav = document.getElementById('cockpit-header-nav');
            if (cockpitNav) cockpitNav.remove();
            const cockpitHeaderInfo = document.getElementById('cockpit-header-info');
            if (cockpitHeaderInfo) cockpitHeaderInfo.remove();
            const projectionsNav = document.getElementById('projections-header-nav');
            if (projectionsNav) projectionsNav.remove();
            const header = document.querySelector('.header');
            if (header) {
                header.classList.remove('has-cockpit-nav', 'has-projections-nav');
                header.classList.add('has-settings-nav');
            }
            this.setupSettingsHeaderNav();
        } else {
            this.btnNewAction.style.display = 'flex';
            this.btnNewAction.innerHTML = `<span>${buttons[view] || '+ New'}</span>`;
            
            // GÃ©rer le header-right avec Admin et Export PDF
            const headerRight = document.querySelector('.header-right');
            if (headerRight) {
                headerRight.style.display = 'flex';
                
                // Supprimer l'ancien bouton Export PDF s'il existe
                const existingExportBtn = document.getElementById('header-export-btn');
                if (existingExportBtn) {
                    existingExportBtn.remove();
                }
                
                // Ajouter le bouton Export PDF pour Projects et Jobs
                if (view === 'projects' || view === 'jobs') {
                    const exportBtn = document.createElement('button');
                    exportBtn.id = 'header-export-btn';
                    exportBtn.className = 'btn btn-sm btn-secondary';
                    exportBtn.innerHTML = `<span class="icon-inline">${Icons.document}</span> Export PDF`;
                    exportBtn.onclick = view === 'projects' ? () => {
                        if (window.exportProjects) window.exportProjects();
                    } : () => {
                        if (window.exportJobs) window.exportJobs();
                    };
                    
                    // InsÃ©rer avant le user-badge
                    const userBadge = headerRight.querySelector('.user-badge');
                    if (userBadge) {
                        headerRight.insertBefore(exportBtn, userBadge);
                    } else {
                        headerRight.appendChild(exportBtn);
                    }
                }
            }
            
            // Supprimer la navigation cockpit si elle existe
            const cockpitNav = document.getElementById('cockpit-header-nav');
            if (cockpitNav) {
                cockpitNav.remove();
            }
            // Supprimer l'horloge et le badge LIVE
            const cockpitHeaderInfo = document.getElementById('cockpit-header-info');
            if (cockpitHeaderInfo) {
                cockpitHeaderInfo.remove();
            }
            // Supprimer la navigation settings si elle existe
            const settingsNav = document.getElementById('settings-header-nav');
            if (settingsNav) {
                settingsNav.remove();
            }
            // Supprimer la navigation projections si elle existe
            const projectionsNav = document.getElementById('projections-header-nav');
            if (projectionsNav) {
                projectionsNav.remove();
            }
            // Retirer la classe du header
            const header = document.querySelector('.header');
            if (header) {
                header.classList.remove('has-cockpit-nav');
                header.classList.remove('has-settings-nav');
                header.classList.remove('has-projections-nav');
            }
        }
    }
    
    setupCockpitHeaderNav() {
        // Supprimer l'ancienne navigation si elle existe
        const existingNav = document.getElementById('cockpit-header-nav');
        if (existingNav) {
            existingNav.remove();
        }
        
        // CrÃ©er la navigation cockpit dans le header (centrÃ©e)
        const header = document.querySelector('.header');
        if (!header) return;
        
        // Ajouter une classe au header pour le positionnement
        header.classList.add('has-cockpit-nav');
        
        // CrÃ©er un conteneur centrÃ© pour les onglets
        const cockpitNav = document.createElement('div');
        cockpitNav.id = 'cockpit-header-nav';
        cockpitNav.className = 'cockpit-header-nav';
        cockpitNav.innerHTML = `
            <div class="cockpit-nav-tabs">
                <button class="cockpit-nav-tab active" data-cockpit-section="dashboard">
                    <span class="cockpit-nav-icon">${Icons.dashboard}</span>
                    <span class="cockpit-nav-label">Dashboard</span>
                </button>
                <button class="cockpit-nav-tab" data-cockpit-section="production">
                    <span class="cockpit-nav-icon">${Icons.production}</span>
                    <span class="cockpit-nav-label">Production</span>
                </button>
                <button class="cockpit-nav-tab" data-cockpit-section="energy">
                    <span class="cockpit-nav-icon">${Icons.energy}</span>
                    <span class="cockpit-nav-label">Energy</span>
                </button>
                <button class="cockpit-nav-tab" data-cockpit-section="incidents">
                    <span class="cockpit-nav-icon">${Icons.incidents}</span>
                    <span class="cockpit-nav-label">Incidents</span>
                </button>
                <button class="cockpit-nav-tab" data-cockpit-section="clients">
                    <span class="cockpit-nav-icon">${Icons.clients}</span>
                    <span class="cockpit-nav-label">Clients</span>
                </button>
                <button class="cockpit-nav-tab" data-cockpit-section="mining-accounts">
                    <span class="cockpit-nav-icon">${Icons.miningAccounts}</span>
                    <span class="cockpit-nav-label">Batch</span>
                </button>
                <button class="cockpit-nav-tab" data-cockpit-section="workers">
                    <span class="cockpit-nav-icon">${Icons.workers}</span>
                    <span class="cockpit-nav-label">Activity</span>
                </button>
                <button class="cockpit-nav-tab" data-cockpit-section="miners">
                    <span class="cockpit-nav-icon">${Icons.miners}</span>
                    <span class="cockpit-nav-label">Miners</span>
                </button>
                <button class="cockpit-nav-tab" data-cockpit-section="reports">
                    <span class="cockpit-nav-icon">${Icons.document}</span>
                    <span class="cockpit-nav-label">Reports</span>
                </button>
                <button class="cockpit-nav-tab" data-cockpit-section="hosters">
                    <span class="cockpit-nav-icon">${Icons.hosters}</span>
                    <span class="cockpit-nav-label">Hosters</span>
                </button>
            </div>
        `;
        
        // CrÃ©er un conteneur pour l'horloge et le badge LIVE Ã  droite
        const cockpitHeaderInfo = document.createElement('div');
        cockpitHeaderInfo.id = 'cockpit-header-info';
        cockpitHeaderInfo.className = 'cockpit-header-info';
        cockpitHeaderInfo.innerHTML = `
            <div class="header-clock" id="cockpitClock">00:00:00</div>
            <div class="live-badge">
                <span class="live-dot"></span>
                <span>LIVE</span>
            </div>
        `;
        
        // InsÃ©rer la navigation au centre du header
        header.appendChild(cockpitNav);
        
        // InsÃ©rer l'horloge et le badge LIVE Ã  droite
        header.appendChild(cockpitHeaderInfo);
        
        // Setup event listeners
        const navTabs = cockpitNav.querySelectorAll('.cockpit-nav-tab');
        navTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const sectionId = tab.getAttribute('data-cockpit-section');
                if (sectionId && window.showCockpitSection) {
                    window.showCockpitSection(sectionId);
                    
                    // Update active state
                    navTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                }
            });
        });
        
        // Recharger les icÃ´nes aprÃ¨s insertion
        if (this.reloadIcons) {
            this.reloadIcons();
        }
    }
    
    setupProjectionsHeaderNav() {
        // Supprimer l'ancienne navigation si elle existe
        const existingNav = document.getElementById('projections-header-nav');
        if (existingNav) {
            existingNav.remove();
        }
        
        // CrÃ©er la navigation projections dans le header (centrÃ©e)
        const header = document.querySelector('.header');
        if (!header) return;
        
        // Ajouter une classe au header pour le positionnement
        header.classList.add('has-projections-nav');
        
        // CrÃ©er un conteneur centrÃ© pour les onglets
        const projectionsNav = document.createElement('div');
        projectionsNav.id = 'projections-header-nav';
        projectionsNav.className = 'cockpit-header-nav'; // RÃ©utiliser les styles cockpit
        projectionsNav.innerHTML = `
            <div class="cockpit-nav-tabs">
                <button class="cockpit-nav-tab active" data-projection-section="overview">
                    <span class="cockpit-nav-icon">${Icons.overview}</span>
                    <span class="cockpit-nav-label">Overview</span>
                </button>
                <button class="cockpit-nav-tab" data-projection-section="calculator">
                    <span class="cockpit-nav-icon">${Icons.calculator}</span>
                    <span class="cockpit-nav-label">Projections</span>
                </button>
                <button class="cockpit-nav-tab" data-projection-section="results">
                    <span class="cockpit-nav-icon">${Icons.results}</span>
                    <span class="cockpit-nav-label">Results</span>
                </button>
                <button class="cockpit-nav-tab" data-projection-section="charts">
                    <span class="cockpit-nav-icon">${Icons.charts}</span>
                    <span class="cockpit-nav-label">Charts</span>
                </button>
                <button class="cockpit-nav-tab" data-projection-section="monte-carlo">
                    <span class="cockpit-nav-icon">${Icons.monteCarlo}</span>
                    <span class="cockpit-nav-label">Monte Carlo</span>
                </button>
                <button class="cockpit-nav-tab" data-projection-section="projects">
                    <span class="cockpit-nav-icon">${Icons.projects}</span>
                    <span class="cockpit-nav-label">Projects</span>
                </button>
                <button class="cockpit-nav-tab" data-projection-section="hardware">
                    <span class="cockpit-nav-icon">${Icons.hardware}</span>
                    <span class="cockpit-nav-label">Hardware</span>
                </button>
                <button class="cockpit-nav-tab" data-projection-section="energy">
                    <span class="cockpit-nav-icon">${Icons.energy}</span>
                    <span class="cockpit-nav-label">Energy</span>
                </button>
                <button class="cockpit-nav-tab" data-projection-section="infrastructure">
                    <span class="cockpit-nav-icon">${Icons.infrastructure}</span>
                    <span class="cockpit-nav-label">Infrastructure</span>
                </button>
            </div>
        `;
        
        // InsÃ©rer la navigation au centre du header
        header.appendChild(projectionsNav);
        
        // Setup event listeners
        const navTabs = projectionsNav.querySelectorAll('.cockpit-nav-tab');
        navTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const sectionId = tab.getAttribute('data-projection-section');
                if (sectionId && window.showProjectionSection) {
                    window.showProjectionSection(sectionId);
                    
                    // Update active state
                    navTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                }
            });
        });
        
        // Recharger les icÃ´nes aprÃ¨s insertion
        if (this.reloadIcons) {
            this.reloadIcons();
        }
    }
    
    setupSettingsHeaderNav() {
        // Supprimer l'ancienne navigation si elle existe
        const existingNav = document.getElementById('settings-header-nav');
        if (existingNav) {
            existingNav.remove();
        }
        
        // CrÃ©er la navigation settings dans le header (centrÃ©e)
        const header = document.querySelector('.header');
        if (!header) return;
        
        // Ajouter une classe au header pour le positionnement
        header.classList.add('has-settings-nav');
        
        // CrÃ©er un conteneur centrÃ© pour les onglets
        const settingsNav = document.createElement('div');
        settingsNav.id = 'settings-header-nav';
        settingsNav.className = 'cockpit-header-nav'; // RÃ©utiliser les styles cockpit
        settingsNav.innerHTML = `
            <div class="cockpit-nav-tabs">
                <button class="cockpit-nav-tab active" data-settings-section="versions">
                    <span class="cockpit-nav-icon">${Icons.versions}</span>
                    <span class="cockpit-nav-label">Versions</span>
                </button>
                <button class="cockpit-nav-tab" data-settings-section="prompts">
                    <span class="cockpit-nav-icon">${Icons.prompts}</span>
                    <span class="cockpit-nav-label">Prompts</span>
                </button>
                <button class="cockpit-nav-tab" data-settings-section="logs">
                    <span class="cockpit-nav-icon">${Icons.logs}</span>
                    <span class="cockpit-nav-label">Logs</span>
                </button>
            </div>
        `;
        
        // InsÃ©rer dans le header (centrÃ©)
        header.appendChild(settingsNav);
        
        // Attacher les event listeners
        const navTabs = settingsNav.querySelectorAll('.cockpit-nav-tab');
        navTabs.forEach(tab => {
            tab.addEventListener('click', async () => {
                const sectionId = tab.getAttribute('data-settings-section');
                if (sectionId && window.showSettingsSection) {
                    await window.showSettingsSection(sectionId);
                    
                    // Update active state
                    navTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update page title
                    const sectionTitles = {
                        versions: 'Versions',
                        prompts: 'Prompt Profiles',
                        logs: 'Activity Logs'
                    };
                    if (this.pageTitle && sectionTitles[sectionId]) {
                        this.pageTitle.textContent = sectionTitles[sectionId];
                    }
                }
            });
        });
        
        // Recharger les icÃ´nes aprÃ¨s insertion
        if (this.reloadIcons) {
            this.reloadIcons();
        }
    }
    
    handleNewAction() {
        const actions = {
            dashboard: () => window.showCreateProjectModal(),
            projects: () => window.showCreateProjectModal(),
            jobs: () => window.showCreateJobModal(),
            versions: () => Modal.alert('Coming Soon', 'Import version feature coming soon!'),
            prompts: () => Modal.alert('Coming Soon', 'Create prompt feature coming soon!'),
            logs: () => this.loadView('logs'),
            cockpit: () => this.loadView('cockpit')
        };
        
        const action = actions[this.currentView];
        if (action) action();
    }
    
    async fetchViewData(view) {
        // Use REAL API calls
        const dataFetchers = {
            dashboard: async () => {
                const [stats, projects, jobs] = await Promise.all([
                    API.getStats(),
                    API.getProjects({ status: 'active' }),
                    API.getJobs({ limit: 10 })
                ]);
                return { ...stats, ...projects, ...jobs };
            },
            projects: async () => API.getProjects(),
            jobs: async () => API.getJobs(),
            versions: async () => ({ versions: [] }),
            prompts: async () => ({ prompts: [] }),
            logs: async () => ({ logs: [] }),
            cockpit: async () => ({}),
            settings: async () => ({})
        };
        
        const fetcher = dataFetchers[view];
        return fetcher ? await fetcher() : {};
    }
    
    async renderView(view, data) {
        const renderers = {
            dashboard: () => this.renderDashboard(data),
            projects: async () => this.renderProjects(data),
            jobs: async () => this.renderJobs(data),
            versions: async () => this.renderVersions(data),
            prompts: async () => this.renderPrompts(data),
            logs: async () => this.renderLogs(data),
            cockpit: async () => this.renderCockpit(data),
            settings: async () => this.renderSettings(data)
        };
        
        const renderer = renderers[view];
        if (renderer) await renderer();
    }
    
    renderDashboard(data) {
        const template = dashboardTemplate(data);
        this.contentArea.innerHTML = dashboardStyles + template;
        
        // Make functions globally available for onclick handlers
        window.viewProject = (id) => console.log('View project:', id);
        window.createJob = (id) => window.showCreateJobModal(id);
        window.viewJob = (id) => console.log('View job:', id);
    }
    
    async renderProjects(data) {
        // Rendre la vue Projects (Projestions)
        const template = await renderProjectsView(data);
        this.contentArea.innerHTML = projectsStyles + template;
        
        // Initialiser les projections aprÃ¨s le rendu
        setTimeout(async () => {
            const { initProjections } = await import('./projections.js');
            if (initProjections) {
                initProjections();
            }
        }, 100);
    }
    
    async renderJobs() {
        const template = await renderJobsView();
        this.contentArea.innerHTML = jobsStyles + template;
        // exportJobs est dÃ©jÃ  dÃ©fini dans renderJobsView
    }
    
    async renderVersions() {
        const template = await renderVersionsView();
        this.contentArea.innerHTML = versionsStyles + template;
    }
    
    async renderPrompts() {
        const template = await renderPromptsView();
        this.contentArea.innerHTML = promptsStyles + template;
    }
    
    async renderLogs(data) {
        const template = await renderLogsView(data);
        this.contentArea.innerHTML = logsStyles + template;
        
        // Reload icons after view render
        if (this.reloadIcons) {
            this.reloadIcons();
        }
    }
    
    async renderCockpit(data) {
        const template = await renderCockpitView();
        this.contentArea.innerHTML = cockpitStyles + template;
        
        // Initialize cockpit functionality
        initCockpit();
    }
    
    async renderSettings(data) {
        const template = await renderSettingsView();
        this.contentArea.innerHTML = settingsStyles + template;
        
        // Initialize settings functionality
        initSettings();
    }
    
    async reloadCurrentView() {
        // Recharger la vue actuelle avec les donnÃ©es fraÃ®ches
        try {
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                console.log('Reloading view:', this.currentView);
            }
            const data = await this.fetchViewData(this.currentView);
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                console.log('Data fetched:', data);
            }
            await this.renderView(this.currentView, data);
            // Recharger les icÃ´nes aprÃ¨s le rendu
            if (this.reloadIcons) {
                this.reloadIcons();
            }
        } catch (error) {
            console.error('Error reloading view:', error);
            notify.error('Failed to reload view: ' + error.message);
        }
    }
    
    renderPlaceholder(message) {
        this.contentArea.innerHTML = `
            <div class="card">
                <div class="card-body">
                    <h3 class="text-primary mb-md">${message}</h3>
                    <p class="text-secondary">This view will be implemented soon.</p>
                </div>
            </div>
        `;
    }
    
    
    async updateStats() {
        try {
            const stats = await API.getStats();
            document.getElementById('stat-projects').textContent = stats.total_projects || '0';
            document.getElementById('stat-jobs').textContent = stats.active_jobs || '0';
        } catch (error) {
            console.error('Error updating stats:', error);
        }
    }
}

// Initialize app when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
    window.app = new ClaudeCockpitApp();
    
    // Make modal functions globally available
    window.showCreateProjectModal = showCreateProjectModal;
    window.showCreateJobModal = showCreateJobModal;
});


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/api.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// API Module - Frontend to Backend Communication
// All API calls to the backend server

import CONFIG from './config.js';

const API_BASE_URL = CONFIG.API_BASE_URL;

class API {
    /**
     * Generic fetch wrapper with error handling
     */
    static async request(endpoint, options = {}) {
        try {
            const response = await fetch(`${API_BASE_URL}${endpoint}`, {
                headers: {
                    'Content-Type': 'application/json',
                    ...options.headers
                },
                ...options
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.error || `HTTP ${response.status}`);
            }

            // Handle 204 No Content
            if (response.status === 204) {
                return null;
            }

            return await response.json();
        } catch (error) {
            console.error(`API Error [${endpoint}]:`, error);
            throw error;
        }
    }

    // ==================== PROJECTS ====================
    
    static async getProjects(filters = {}) {
        const params = new URLSearchParams(filters);
        return this.request(`/projects?${params}`);
    }

    static async getProject(id) {
        return this.request(`/projects/${id}`);
    }

    static async createProject(data) {
        return this.request('/projects', {
            method: 'POST',
            body: JSON.stringify(data)
        });
    }

    static async updateProject(id, data) {
        return this.request(`/projects/${id}`, {
            method: 'PUT',
            body: JSON.stringify(data)
        });
    }

    static async deleteProject(id) {
        return this.request(`/projects/${id}`, {
            method: 'DELETE'
        });
    }

    // ==================== JOBS ====================
    
    static async getJobs(filters = {}) {
        const params = new URLSearchParams(filters);
        return this.request(`/jobs?${params}`);
    }

    static async getJob(id) {
        return this.request(`/jobs/${id}`);
    }

    static async createJob(data) {
        return this.request('/jobs', {
            method: 'POST',
            body: JSON.stringify(data)
        });
    }

    // ==================== STATS ====================
    
    static async getStats() {
        return this.request('/stats');
    }

    // ==================== HEALTH ====================
    
    static async health() {
        return this.request('/health');
    }
}

export default API;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/config.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// ===================================
// CONFIG.JS - Configuration centralisÃ©e
// ===================================

/**
 * DÃ©tection automatique de l'environnement
 */
const isDevelopment = window.location.hostname === 'localhost' || 
                      window.location.hostname === '127.0.0.1';

const isProduction = !isDevelopment;

/**
 * Configuration globale de l'application
 */
export const CONFIG = {
    // Environnement
    ENV: isDevelopment ? 'development' : 'production',
    IS_DEV: isDevelopment,
    IS_PROD: isProduction,
    
    // API
    API_BASE_URL: isDevelopment 
        ? 'http://localhost:3001/api'  // Dev: backend local
        : '/api',                       // Prod: routing Vercel
    
    // Timeouts
    API_TIMEOUT: 30000, // 30 secondes
    RETRY_DELAY: 2000,  // 2 secondes entre retry
    MAX_RETRIES: 3,
    
    // Refresh intervals
    STATS_REFRESH_INTERVAL: 30000,  // 30 secondes
    JOBS_REFRESH_INTERVAL: 10000,   // 10 secondes
    
    // UI
    TOAST_DURATION: 4000,           // 4 secondes
    MODAL_ANIMATION_DURATION: 300,  // 300ms
    
    // Pagination
    DEFAULT_PAGE_SIZE: 20,
    MAX_PAGE_SIZE: 100,
    
    // Version
    APP_VERSION: '1.0.0',
    APP_NAME: 'Claude CI/CD Cockpit'
};

/**
 * Logs de debug (seulement en dev)
 */
export function debugLog(...args) {
    if (CONFIG.IS_DEV) {
        console.log('[DEBUG]', ...args);
    }
}

/**
 * Informations sur l'environnement
 */
export function logEnvironment() {
    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
    console.log(`ðŸš€ ${CONFIG.APP_NAME} v${CONFIG.APP_VERSION}`);
    console.log(`ðŸ“ Environment: ${CONFIG.ENV}`);
    console.log(`ðŸŒ API Base URL: ${CONFIG.API_BASE_URL}`);
    console.log(`ðŸ–¥ï¸  Hostname: ${window.location.hostname}`);
    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
}

export default CONFIG;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/theme.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// ===================================
// THEME.JS - Dark/Light mode system
// ===================================
import { Icons } from './icons.js';

class ThemeManager {
    constructor() {
        this.currentTheme = 'dark'; // Default HEARST theme
        this.init();
    }

    init() {
        // Load saved theme from localStorage
        const savedTheme = localStorage.getItem('hearstai-theme');
        if (savedTheme) {
            this.currentTheme = savedTheme;
        }
        
        // Apply theme
        this.applyTheme(this.currentTheme);
        
        // Create theme toggle button
        this.createToggleButton();
    }

    createToggleButton() {
        const header = document.querySelector('.header-right');
        if (!header) return;

        const toggleBtn = document.createElement('button');
        toggleBtn.className = 'theme-toggle';
        toggleBtn.innerHTML = this.getThemeIcon();
        toggleBtn.setAttribute('aria-label', 'Toggle theme');
        toggleBtn.title = 'Toggle dark/light mode';
        
        toggleBtn.addEventListener('click', () => this.toggle());
        
        // Insert before user badge
        const userBadge = header.querySelector('.user-badge');
        header.insertBefore(toggleBtn, userBadge);
    }

    toggle() {
        this.currentTheme = this.currentTheme === 'dark' ? 'light' : 'dark';
        this.applyTheme(this.currentTheme);
        this.saveTheme();
        
        // Update button icon
        const toggleBtn = document.querySelector('.theme-toggle');
        if (toggleBtn) {
            toggleBtn.innerHTML = this.getThemeIcon();
        }
    }

    applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        
        if (theme === 'light') {
            this.applyLightTheme();
        } else {
            this.applyDarkTheme();
        }
    }

    applyDarkTheme() {
        const root = document.documentElement;
        root.style.setProperty('--bg-primary', '#0a0a0a');
        root.style.setProperty('--bg-secondary', '#1a1a1a');
        root.style.setProperty('--bg-tertiary', '#242424');
        root.style.setProperty('--bg-hover', '#2a2a2a');
        root.style.setProperty('--text-primary', '#ffffff');
        root.style.setProperty('--text-secondary', '#b8b8b8');
        root.style.setProperty('--text-muted', '#6b6b6b');
        root.style.setProperty('--border-color', '#2a2a2a');
        root.style.setProperty('--border-hover', '#3a3a3a');
    }

    applyLightTheme() {
        const root = document.documentElement;
        root.style.setProperty('--bg-primary', '#ffffff');
        root.style.setProperty('--bg-secondary', '#f5f5f5');
        root.style.setProperty('--bg-tertiary', '#e8e8e8');
        root.style.setProperty('--bg-hover', '#f0f0f0');
        root.style.setProperty('--text-primary', '#1a1a1a');
        root.style.setProperty('--text-secondary', '#4a4a4a');
        root.style.setProperty('--text-muted', '#9a9a9a');
        root.style.setProperty('--border-color', '#e0e0e0');
        root.style.setProperty('--border-hover', '#d0d0d0');
    }

    getThemeIcon() {
        return this.currentTheme === 'dark' 
            ? Icons.sun // Sun for switching to light
            : Icons.moon; // Moon for switching to dark
    }

    saveTheme() {
        localStorage.setItem('hearstai-theme', this.currentTheme);
    }

    getTheme() {
        return this.currentTheme;
    }
}

// Styles pour le bouton toggle
const themeToggleStyles = `
<style>
.theme-toggle {
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    padding: 8px;
    border-radius: 12px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    margin-right: 12px;
}

.theme-toggle:hover {
    background: var(--bg-hover);
    transform: scale(1.1);
}

.theme-toggle:active {
    transform: scale(0.95);
}

/* Animation de rotation au changement */
.theme-toggle.changing {
    animation: rotateTheme 0.3s ease-in-out;
}

@keyframes rotateTheme {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(180deg); }
}

/* Ajustements pour le light mode */
[data-theme="light"] .sidebar {
    background: #ffffff;
    border-right: 1px solid var(--border-color);
}

[data-theme="light"] .nav-item.active {
    background: rgba(138, 253, 129, 0.1);
}

[data-theme="light"] .logo-text {
    color: var(--text-primary);
}

[data-theme="light"] .card {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
</style>
`;

// Injecter les styles
document.head.insertAdjacentHTML('beforeend', themeToggleStyles);

// Export singleton
const themeManager = new ThemeManager();
export default themeManager;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/export.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// ===================================
// EXPORT.JS - PDF export system
// ===================================

/**
 * Export projects to PDF
 */
export async function exportProjectsPDF(projects) {
    // Create simple HTML for print
    const printContent = `
        <!DOCTYPE html>
        <html>
        <head>
            <title>HearstAI - Projects Report</title>
            <style>
                body { font-family: Arial, sans-serif; padding: 40px; }
                h1 { color: #7bed9f; border-bottom: 2px solid #7bed9f; padding-bottom: 10px; }
                .project { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
                .project h2 { margin: 0 0 10px 0; color: #333; }
                .meta { color: #666; font-size: 14px; }
                .badge { display: inline-block; padding: 4px 8px; background: #f0f0f0; border-radius: 4px; font-size: 12px; margin-right: 8px; }
            </style>
        </head>
        <body>
            <h1>HearstAI Projects Report</h1>
            <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>
            <p><strong>Total Projects:</strong> ${projects.length}</p>
            <hr>
            ${projects.map(p => `
                <div class="project">
                    <h2>${p.name}</h2>
                    <p>${p.description || 'No description'}</p>
                    <div class="meta">
                        <span class="badge">Type: ${p.type}</span>
                        <span class="badge">Repository: ${p.repo_type}</span>
                        <span class="badge">Status: ${p.status}</span>
                    </div>
                </div>
            `).join('')}
        </body>
        </html>
    `;

    // Open print dialog
    const printWindow = window.open('', '_blank');
    printWindow.document.write(printContent);
    printWindow.document.close();
    
    // Wait for content to load then print
    setTimeout(() => {
        printWindow.print();
    }, 250);
}

/**
 * Export jobs to PDF
 */
export async function exportJobsPDF(jobs) {
    const printContent = `
        <!DOCTYPE html>
        <html>
        <head>
            <title>HearstAI - Jobs Report</title>
            <style>
                body { font-family: Arial, sans-serif; padding: 40px; }
                h1 { color: #7bed9f; border-bottom: 2px solid #7bed9f; padding-bottom: 10px; }
                table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                th { background: #f5f5f5; padding: 12px; text-align: left; border-bottom: 2px solid #ddd; }
                td { padding: 10px; border-bottom: 1px solid #eee; }
                .badge { display: inline-block; padding: 4px 8px; background: #f0f0f0; border-radius: 4px; font-size: 12px; }
                .success { background: #d4edda; color: #155724; }
                .error { background: #f8d7da; color: #721c24; }
                .pending { background: #fff3cd; color: #856404; }
            </style>
        </head>
        <body>
            <h1>HearstAI Jobs Report</h1>
            <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>
            <p><strong>Total Jobs:</strong> ${jobs.length}</p>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Project</th>
                        <th>Type</th>
                        <th>Status</th>
                        <th>Created</th>
                    </tr>
                </thead>
                <tbody>
                    ${jobs.map(j => `
                        <tr>
                            <td><code>${j.id.substring(0, 8)}</code></td>
                            <td>${j.project?.name || 'Unknown'}</td>
                            <td><span class="badge">${j.type}</span></td>
                            <td><span class="badge ${j.status}">${j.status}</span></td>
                            <td>${new Date(j.created_at).toLocaleString()}</td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </body>
        </html>
    `;

    const printWindow = window.open('', '_blank');
    printWindow.document.write(printContent);
    printWindow.document.close();
    
    setTimeout(() => {
        printWindow.print();
    }, 250);
}

/**
 * Export dashboard stats to PDF
 */
export async function exportDashboardPDF(stats, projects, jobs) {
    const printContent = `
        <!DOCTYPE html>
        <html>
        <head>
            <title>HearstAI - Dashboard Report</title>
            <style>
                body { font-family: Arial, sans-serif; padding: 40px; }
                h1 { color: #7bed9f; border-bottom: 2px solid #7bed9f; padding-bottom: 10px; }
                .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 30px 0; }
                .stat-card { padding: 20px; background: #f9f9f9; border-radius: 8px; text-align: center; }
                .stat-value { font-size: 36px; font-weight: bold; color: #7bed9f; }
                .stat-label { font-size: 14px; color: #666; margin-top: 8px; }
                .section { margin: 40px 0; }
            </style>
        </head>
        <body>
            <h1>HearstAI Dashboard Report</h1>
            <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>
            
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value">${stats?.total_projects || 0}</div>
                    <div class="stat-label">Total Projects</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats?.jobs_running || 0}</div>
                    <div class="stat-label">Jobs Running</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${Math.round((stats?.jobs_success_rate || 0) * 100)}%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats?.total_versions || 0}</div>
                    <div class="stat-label">Total Versions</div>
                </div>
            </div>

            <div class="section">
                <h2>Recent Activity Summary</h2>
                <p><strong>Active Projects:</strong> ${projects?.length || 0}</p>
                <p><strong>Completed Jobs:</strong> ${jobs?.filter(j => j.status === 'success').length || 0}</p>
                <p><strong>Failed Jobs:</strong> ${jobs?.filter(j => j.status === 'failed').length || 0}</p>
            </div>
        </body>
        </html>
    `;

    const printWindow = window.open('', '_blank');
    printWindow.document.write(printContent);
    printWindow.document.close();
    
    setTimeout(() => {
        printWindow.print();
    }, 250);
}

export default {
    exportProjectsPDF,
    exportJobsPDF,
    exportDashboardPDF
};


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/icons.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// HEARST Icons - Vector SVG Icons System
export const Icons = {
    home: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 12L5 10M5 10L12 3L19 10M5 10V20C5 20.5523 5.44772 21 6 21H9M19 10L21 12M19 10V20C19 20.5523 18.5523 21 18 21H15M9 21C9.55228 21 10 20.5523 10 20V16C10 15.4477 10.4477 15 11 15H13C13.5523 15 14 15.4477 14 16V20C14 20.5523 14.4477 21 15 21M9 21H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    projects: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 7V5C3 3.89543 3.89543 3 5 3H9C10.1046 3 11 3.89543 11 5V7M3 7V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V7M3 7H21M11 7V5C11 3.89543 11.8954 3 13 3H17C18.1046 3 19 3.89543 19 5V7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    jobs: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    versions: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    prompts: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    logs: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M8 13H16M8 17H16M8 9H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    user: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    check: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    error: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>`,
    
    warning: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    dashboard: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 3V11H11V3H3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M13 3V11H21V3H13Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M3 13V21H11V13H3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M13 17V21H21V17H13Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    document: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    refresh: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1 4V10H7M23 20V14H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M20.49 9C19.7969 6.64928 18.4561 4.55098 16.6291 2.97852C14.8021 1.40605 12.5715 0.428193 10.2318 0.165477C7.89212 -0.0972385 5.54415 0.359264 3.46658 1.48781C1.38901 2.61635 -0.33647 4.36619 -1.55929 6.51999M20.49 15C21.1831 17.3507 22.5239 19.449 24.3509 21.0215C26.1779 22.5939 28.4085 23.5718 30.7482 23.8345C33.0879 24.0972 35.4358 23.6407 37.5134 22.5122C39.591 21.3836 41.3165 19.6338 42.5393 17.48" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    news: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="4" width="20" height="4" rx="1" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        <rect x="2" y="10" width="20" height="4" rx="1" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        <rect x="2" y="16" width="20" height="4" rx="1" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
    </svg>`,
    
    sun: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/>
        <path d="M12 2V4M12 20V22M4 12H2M6.31412 6.31412L4.8999 4.8999M17.6859 6.31412L19.1001 4.8999M6.31412 17.69L4.8999 19.1042M17.6859 17.69L19.1001 19.1042M22 12H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>`,
    
    moon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    // Cockpit Icons
    production: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    energy: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="6" width="18" height="12" rx="2" stroke="currentColor" stroke-width="2"/>
        <line x1="23" y1="13" x2="23" y2="11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="5" y1="10" x2="5" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="9" y1="10" x2="9" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="13" y1="10" x2="13" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>`,
    
    incidents: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        <line x1="12" y1="8" x2="12" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="12" y1="16" x2="12.01" y2="16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>`,
    
    clients: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89318 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    miningAccounts: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
        <path d="M3 9H21M9 3V21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>`,
    
    workers: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89318 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    miners: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="7" width="20" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
        <path d="M16 21V5C16 3.89543 15.1046 3 14 3H10C8.89543 3 8 3.89543 8 5V21" stroke="currentColor" stroke-width="2"/>
    </svg>`,
    
    crossReference: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
        <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
        <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
        <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
    </svg>`,
    
    hosters: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 9L12 2L21 9V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <polyline points="9 22 9 12 15 12 15 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    api: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <polyline points="16 18 22 12 16 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <polyline points="8 6 2 12 8 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    dataMapping: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
        <path d="M12 1V7M12 17V23M5.196 5.196L9.879 9.879M14.121 14.121L18.804 18.804M1 12H7M17 12H23M5.196 18.804L9.879 14.121M14.121 9.879L18.804 5.196" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>`,
    
    apiTest: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        <polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    settings: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.01131 9.77251C4.28062 9.5799 4.48571 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15V15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    admin: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L4 5V11C4 16.55 7.16 21.74 12 23C16.84 21.74 20 16.55 20 11V5L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    // Projections Icons
    overview: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 3V11H11V3H3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M13 3V11H21V3H13Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M3 13V21H11V13H3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M13 17V21H21V17H13Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    calculator: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="4" y="2" width="16" height="20" rx="2" stroke="currentColor" stroke-width="2"/>
        <line x1="8" y1="6" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="8" y1="10" x2="16" y2="10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="8" y1="14" x2="12" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="8" y1="18" x2="12" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <circle cx="16" cy="16" r="2" stroke="currentColor" stroke-width="2"/>
    </svg>`,
    
    results: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    charts: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 3V21H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M7 16L12 11L16 15L21 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M21 10H16V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    monteCarlo: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    hardware: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="7" width="20" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
        <path d="M16 21V5C16 3.89543 15.1046 3 14 3H10C8.89543 3 8 3.89543 8 5V21" stroke="currentColor" stroke-width="2"/>
    </svg>`,
    
    infrastructure: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 9L12 2L21 9V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <polyline points="9 22 9 12 15 12 15 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    export: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <polyline points="7 10 12 15 17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    // Additional icons for Results section
    roi: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M16 6L18.29 8.29L13.41 13.17L9.41 9.17L2 16.59L3.41 18L9.41 12L13.41 16L19.71 9.71L22 12V6H16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    payback: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        <polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    profit: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM13.41 16.09V20H10.67V16.09C8.96 15.73 7.51 14.63 7.4 12.6H9.36C9.46 13.65 10.18 14.47 12.65 14.47 14.61 14.47 15.4 13.69 15.4 12.59C15.4 11.76 14.56 11.39 12.67 11.14C10.19 10.54 8.18 9.62 8.18 7.33C8.18 5.61 9.39 4.84 10.67 4.51V4H13.33V4.51C15.14 4.95 16.79 6.14 16.85 8.39H14.9C14.8 7.11 13.64 6.87 12.65 6.87C10.5 6.87 10.4 7.68 10.4 8.36C10.4 9.16 11.35 9.39 12.67 9.64C15.15 10.24 17.18 11.16 17.18 13.67C17.18 15.17 15.62 16.17 13.41 16.09Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    hashrate: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="3" y="3" width="18" height="6" rx="1" stroke="currentColor" stroke-width="2"/>
        <rect x="3" y="15" width="18" height="6" rx="1" stroke="currentColor" stroke-width="2"/>
        <circle cx="7" cy="6" r="1.5" fill="currentColor"/>
        <circle cx="17" cy="6" r="1.5" fill="currentColor"/>
        <circle cx="7" cy="18" r="1.5" fill="currentColor"/>
        <circle cx="17" cy="18" r="1.5" fill="currentColor"/>
    </svg>`,
    
    clock: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        <polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    bitcoin: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        <path d="M10.5 8.5C10.5 7.67 11.17 7 12 7C12.83 7 13.5 7.67 13.5 8.5C13.5 9.33 12.83 10 12 10M10.5 15.5C10.5 14.67 11.17 14 12 14C12.83 14 13.5 14.67 13.5 15.5C13.5 16.33 12.83 17 12 17M9 10H15M9 14H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>`,
    
    blockReward: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
        <path d="M9 9H15M9 15H15M12 3V9M12 15V21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>`,
    
    edit: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M18.5 2.5C18.8978 2.10218 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10218 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10218 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    delete: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 6H5H21M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    chevronDown: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    wind: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9.59 4.59A2 2 0 1 1 11 8H2M10 8H16M9.59 15.41A2 2 0 1 0 11 12H2M13 12H16M15.59 10.59A2 2 0 1 1 17 14H2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
    
    battery: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="6" width="18" height="12" rx="2" stroke="currentColor" stroke-width="2"/>
        <line x1="23" y1="13" x2="23" y2="11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="5" y1="10" x2="5" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="9" y1="10" x2="9" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="13" y1="10" x2="13" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>`,
    
    snowflake: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2V22M12 2L8 6M12 2L16 6M12 22L8 18M12 22L16 18M2 12H22M2 12L6 8M2 12L6 16M22 12L18 8M22 12L18 16M6 6L18 18M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`
};



â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/modals.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Modal Functions for Projects and Jobs
import Modal from './components/modal.js';
import API from './api.js';
import notify from './components/notification.js';

// CREATE PROJECT MODAL
export function showCreateProjectModal() {
    const modal = new Modal({
        title: 'Create New Project',
        size: 'medium',
        content: `
            <form id="create-project-form" class="form">
                <div class="form-group">
                    <label for="project-name">Project Name *</label>
                    <input 
                        type="text" 
                        id="project-name" 
                        name="name" 
                        class="form-input" 
                        placeholder="my-awesome-project"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="project-description">Description</label>
                    <textarea 
                        id="project-description" 
                        name="description" 
                        class="form-input" 
                        rows="3"
                        placeholder="Brief description of your project"
                    ></textarea>
                </div>
                
                <div class="form-group">
                    <label for="project-type">Project Type *</label>
                    <select id="project-type" name="type" class="form-input" required>
                        <option value="">Select type...</option>
                        <option value="html_static">HTML Static</option>
                        <option value="spa">SPA (Single Page App)</option>
                        <option value="dashboard">Dashboard</option>
                        <option value="nodejs_app">Node.js App</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="project-repo-type">Repository Type *</label>
                    <select id="project-repo-type" name="repo_type" class="form-input" required>
                        <option value="">Select repository type...</option>
                        <option value="local">Local</option>
                        <option value="github">GitHub</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="project-repo">Repository URL</label>
                    <input 
                        type="url" 
                        id="project-repo" 
                        name="repo_url" 
                        class="form-input" 
                        placeholder="https://github.com/user/repo"
                    >
                </div>
            </form>
        `,
        confirmText: 'Create Project',
        onConfirm: async () => {
            const form = document.getElementById('create-project-form');
            if (!form) {
                notify.error('Form not found');
                return false;
            }
            
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);
            
            // Validation avec trim pour Ã©viter les espaces
            const name = (data.name || '').trim();
            const type = (data.type || '').trim();
            const repo_type = (data.repo_type || '').trim();
            
            if (!name) {
                notify.error('Project name is required');
                return false;
            }
            
            if (!type) {
                notify.error('Project type is required');
                return false;
            }
            
            if (!repo_type) {
                notify.error('Repository type is required');
                return false;
            }
            
            // Utiliser les valeurs nettoyÃ©es
            data.name = name;
            data.type = type;
            data.repo_type = repo_type;
            
            try {
                const response = await API.createProject(data);
                console.log('Project created:', response);
                notify.success('Project created successfully!');
                
                // Fermer le modal (sera fait automatiquement par le modal si onConfirm retourne true)
                // Recharger la vue actuelle aprÃ¨s un court dÃ©lai
                if (window.app && typeof window.app.reloadCurrentView === 'function') {
                    setTimeout(() => {
                        window.app.reloadCurrentView();
                    }, 300);
                } else {
                    // Fallback si app n'est pas disponible
                    setTimeout(() => window.location.reload(), 1000);
                }
                return true;
            } catch (error) {
                console.error('Error creating project:', error);
                notify.error('Failed to create project: ' + error.message);
                return false;
            }
        }
    });
    
    modal.open();
}

// CREATE JOB MODAL
export function showCreateJobModal(projectId = null) {
    const modal = new Modal({
        title: 'Create New Job',
        size: 'medium',
        content: `
            <form id="create-job-form" class="form">
                ${projectId ? `<input type="hidden" name="project_id" value="${projectId}">` : `
                <div class="form-group">
                    <label for="job-project">Project *</label>
                    <select id="job-project" name="project_id" class="form-input" required>
                        <option value="">Select a project...</option>
                    </select>
                </div>
                `}
                
                <div class="form-group">
                    <label for="job-type">Job Type *</label>
                    <select id="job-type" name="job_type" class="form-input" required>
                        <option value="">Select type...</option>
                        <option value="build">Build</option>
                        <option value="test">Test</option>
                        <option value="deploy">Deploy</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="job-prompt">Prompt/Command *</label>
                    <textarea 
                        id="job-prompt" 
                        name="prompt" 
                        class="form-input" 
                        rows="4"
                        placeholder="Enter the command or prompt for this job..."
                        required
                    ></textarea>
                </div>
            </form>
        `,
        confirmText: 'Create Job',
        onConfirm: async () => {
            const form = document.getElementById('create-job-form');
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);
            
            if (!data.project_id) {
                notify.error('Please select a project');
                return false;
            }
            
            if (!data.job_type) {
                notify.error('Please select a job type');
                return false;
            }
            
            if (!data.prompt || data.prompt.trim() === '') {
                notify.error('Prompt is required');
                return false;
            }
            
            try {
                await API.createJob(data);
                notify.success('Job created successfully!');
                // Recharger la vue actuelle au lieu de recharger toute la page
                if (window.app && typeof window.app.reloadCurrentView === 'function') {
                    setTimeout(() => {
                        window.app.reloadCurrentView();
                    }, 500);
                } else {
                    // Fallback si app n'est pas disponible
                    setTimeout(() => window.location.reload(), 1000);
                }
                return true;
            } catch (error) {
                notify.error('Failed to create job: ' + error.message);
                return false;
            }
        }
    });
    
    if (!projectId) {
        API.getProjects().then(response => {
            const select = document.getElementById('job-project');
            if (select && response.projects) {
                response.projects.forEach(project => {
                    const option = document.createElement('option');
                    option.value = project.id;
                    option.textContent = project.name;
                    select.appendChild(option);
                });
            }
        }).catch(error => console.error('Failed to load projects:', error));
    }
    
    modal.open();
}

if (typeof window !== 'undefined') {
    window.showCreateProjectModal = showCreateProjectModal;
    window.showCreateJobModal = showCreateJobModal;
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/projections.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Projections Management - Mining Intelligence Platform
// GÃ¨re la navigation entre les diffÃ©rentes sections de projections

// Show projection section
export function showProjectionSection(sectionId) {
    const container = document.getElementById('projections-sections-container');
    
    if (!container) {
        console.error('Projections container not found');
        return;
    }
    
    // Importer dynamiquement la vue des sections
    import('./views/projects-sections.js').then(module => {
        // Render section content
        const content = module.renderProjectionSection(sectionId);
        container.innerHTML = content;
        
    // Initialize section-specific functionality
    setTimeout(() => {
        if (sectionId === 'overview' && module.initOverview) {
            module.initOverview();
        } else if (sectionId === 'calculator' && module.initCalculator) {
            module.initCalculator();
        } else if (sectionId === 'results' && module.initResults) {
            module.initResults();
        } else if (sectionId === 'charts' && module.initCharts) {
            module.initCharts();
        } else if (sectionId === 'monte-carlo' && module.initMonteCarlo) {
            module.initMonteCarlo();
        } else if (sectionId === 'projects' && module.initProjectsList) {
            module.initProjectsList();
        } else if (sectionId === 'hardware' && module.initHardware) {
            module.initHardware();
        } else if (sectionId === 'energy' && module.initEnergy) {
            module.initEnergy();
        } else if (sectionId === 'infrastructure' && module.initInfrastructure) {
            module.initInfrastructure();
        }
        
        // Fix responsive: Force override des styles inline sur mobile
        fixMobileResponsive();
    }, 200);
    }).catch(error => {
        console.error('Error loading projection section:', error);
        container.innerHTML = `<div class="projection-section-placeholder">
            <p>Erreur lors du chargement de la section ${sectionId}</p>
        </div>`;
    });
    
    // Update navigation tabs in header
    const navTabs = document.querySelectorAll('.cockpit-nav-tab[data-projection-section]');
    navTabs.forEach(tab => {
        tab.classList.remove('active');
        if (tab.getAttribute('data-projection-section') === sectionId) {
            tab.classList.add('active');
        }
    });
}

// Fix responsive mobile - Force override des styles inline
function fixMobileResponsive() {
    const isMobile = window.innerWidth <= 768;
    
    if (isMobile) {
        // Trouver toutes les divs avec des grilles inline
        const gridDivs = document.querySelectorAll('div[style*="grid-template-columns"]');
        gridDivs.forEach(div => {
            const style = div.getAttribute('style') || '';
            if (style.includes('grid-template-columns') && !style.includes('1fr !important')) {
                // Remplacer par 1 colonne sur mobile
                let newStyle = style.replace(/grid-template-columns:\s*[^;]+;?/g, '');
                newStyle += ' grid-template-columns: 1fr !important;';
                div.setAttribute('style', newStyle);
            }
        });
        
        // Fix pour les flex avec space-between
        const flexDivs = document.querySelectorAll('div[style*="justify-content: space-between"]');
        flexDivs.forEach(div => {
            const style = div.getAttribute('style') || '';
            if (style.includes('justify-content: space-between')) {
                div.style.setProperty('flex-direction', 'column', 'important');
                div.style.setProperty('align-items', 'flex-start', 'important');
                if (!style.includes('gap:')) {
                    div.style.setProperty('gap', '16px', 'important');
                }
            }
        });
        
        // Fix pour max-width
        const maxWidthDivs = document.querySelectorAll('div[style*="max-width: 1600px"]');
        maxWidthDivs.forEach(div => {
            div.style.setProperty('max-width', '100%', 'important');
            div.style.setProperty('padding', '24px 16px', 'important');
        });
        
        // Fix pour tous les conteneurs de projections
        const container = document.getElementById('projections-sections-container');
        if (container) {
            container.style.setProperty('width', '100%', 'important');
            container.style.setProperty('max-width', '100%', 'important');
            container.style.setProperty('overflow-x', 'hidden', 'important');
        }
        
        // Fix pour body et html
        document.body.style.setProperty('overflow-x', 'hidden', 'important');
        document.documentElement.style.setProperty('overflow-x', 'hidden', 'important');
    }
}

// Initialize projections functionality
export function initProjections() {
    console.log('ðŸ“Š Initializing Projections Mining Intelligence Platform...');
    
    // Exposer la fonction globalement
    window.showProjectionSection = showProjectionSection;
    
    // Set default section
    const defaultSection = 'overview';
    showProjectionSection(defaultSection);
    
    // Fix responsive au chargement
    setTimeout(() => {
        fixMobileResponsive();
    }, 300);
    
    // Fix responsive au resize
    let resizeTimeout;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
            fixMobileResponsive();
        }, 250);
    });
    
    // Setup event listeners for navigation tabs (dÃ©jÃ  fait dans setupProjectionsHeaderNav)
    // Les event listeners sont dÃ©jÃ  attachÃ©s dans app.js
}



â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/cockpit.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Cockpit Management - Mining Operations Platform
// GÃ¨re la navigation entre les diffÃ©rentes sections du cockpit

// Show cockpit section
export function showCockpitSection(sectionId) {
    const container = document.getElementById('cockpit-sections-container');
    
    if (!container) {
        console.error('Cockpit container not found');
        return;
    }
    
    // Importer dynamiquement la vue des sections
    import('./views/cockpit-sections.js').then(module => {
        // Render section content
        const content = module.renderCockpitSection(sectionId);
        container.innerHTML = content;
        
        // Initialize section-specific functionality
        setTimeout(() => {
            if (sectionId === 'dashboard' && module.initDashboard) {
                module.initDashboard();
            } else if (sectionId === 'production' && module.initProduction) {
                module.initProduction();
            } else if (sectionId === 'energy' && module.initEnergy) {
                module.initEnergy();
            } else if (sectionId === 'incidents' && module.initIncidents) {
                module.initIncidents();
            } else if (sectionId === 'clients' && module.initClients) {
                module.initClients();
            } else if (sectionId === 'mining-accounts' && module.initMiningAccounts) {
                module.initMiningAccounts();
            } else if (sectionId === 'workers' && module.initWorkers) {
                module.initWorkers();
            } else if (sectionId === 'miners' && module.initMiners) {
                module.initMiners();
            } else if (sectionId === 'reports' && module.initReports) {
                module.initReports();
            } else if (sectionId === 'hosters' && module.initHosters) {
                module.initHosters();
            }
        }, 200);
    }).catch(error => {
        console.error('Error loading cockpit section:', error);
        container.innerHTML = `<div class="cockpit-section-placeholder">
            <p>Erreur lors du chargement de la section ${sectionId}</p>
        </div>`;
    });
    
    // Update navigation tabs in header
    const navTabs = document.querySelectorAll('.cockpit-nav-tab[data-cockpit-section]');
    navTabs.forEach(tab => {
        tab.classList.remove('active');
        if (tab.getAttribute('data-cockpit-section') === sectionId) {
            tab.classList.add('active');
        }
    });
}

// Update cockpit clock
function updateCockpitClock() {
    const clockElement = document.getElementById('cockpitClock');
    if (clockElement) {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        clockElement.textContent = `${hours}:${minutes}:${seconds}`;
    }
}

// Initialize cockpit functionality
export function initCockpit() {
    console.log('ðŸŽ¯ Initializing Cockpit Mining Operations Platform...');
    
    // Exposer la fonction globalement
    window.showCockpitSection = showCockpitSection;
    
    // Set default section
    const defaultSection = 'dashboard';
    showCockpitSection(defaultSection);
    
    // Start clock update
    updateCockpitClock();
    setInterval(updateCockpitClock, 1000);
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/settings.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Settings Management
// GÃ¨re la navigation entre les diffÃ©rentes sections des settings

// Show settings section
export function showSettingsSection(sectionId) {
    const container = document.getElementById('settings-sections-container');
    
    if (!container) {
        console.error('Settings container not found');
        return;
    }
    
    // Load section content based on sectionId
    if (sectionId === 'versions') {
        import('./views/versions.js').then(async module => {
            const html = await module.renderVersionsView();
            container.innerHTML = html;
            // Reload icons
            if (window.app && window.app.reloadIcons) {
                window.app.reloadIcons();
            }
        });
    } else if (sectionId === 'prompts') {
        import('./views/prompts.js').then(async module => {
            const html = await module.renderPromptsView();
            container.innerHTML = html;
            // Reload icons
            if (window.app && window.app.reloadIcons) {
                window.app.reloadIcons();
            }
        });
    } else if (sectionId === 'logs') {
        import('./views/logs.js').then(async module => {
            const html = await module.renderLogsView();
            container.innerHTML = html;
            // Reload icons
            if (window.app && window.app.reloadIcons) {
                window.app.reloadIcons();
            }
        });
    }
    
    // Update navigation tabs in header
    const navTabs = document.querySelectorAll('.cockpit-nav-tab[data-settings-section]');
    navTabs.forEach(tab => {
        tab.classList.remove('active');
        if (tab.getAttribute('data-settings-section') === sectionId) {
            tab.classList.add('active');
        }
    });
}

// Initialize settings functionality
export function initSettings() {
    console.log('âš™ï¸ Initializing Settings...');
    
    // Exposer la fonction globalement
    window.showSettingsSection = showSettingsSection;
    
    // Set default section
    const defaultSection = 'versions';
    showSettingsSection(defaultSection);
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/components/modal.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Modal Component - Reusable modal system
// HEARST styled modals
import { Icons } from '../icons.js';

class Modal {
    constructor(options = {}) {
        this.id = options.id || `modal-${Date.now()}`;
        this.title = options.title || 'Modal';
        this.content = options.content || '';
        this.size = options.size || 'medium'; // small, medium, large
        this.onConfirm = options.onConfirm || null;
        this.onCancel = options.onCancel || null;
        this.confirmText = options.confirmText || 'Confirm';
        this.cancelText = options.cancelText || 'Cancel';
        this.showFooter = options.showFooter !== false;
        
        this.element = null;
        this.isOpen = false;
    }

    /**
     * Create modal HTML structure
     */
    create() {
        const modalHTML = `
            <div class="modal-overlay" id="${this.id}" data-modal>
                <div class="modal modal-${this.size}">
                    <div class="modal-header">
                        <h3 class="modal-title">${this.title}</h3>
                        <button class="modal-close" data-modal-close>Ã—</button>
                    </div>
                    <div class="modal-body">
                        ${this.content}
                    </div>
                    ${this.showFooter ? `
                        <div class="modal-footer">
                            <button class="btn btn-secondary" data-modal-cancel>${this.cancelText}</button>
                            <button class="btn btn-primary" data-modal-confirm>${this.confirmText}</button>
                        </div>
                    ` : ''}
                </div>
            </div>
        `;

        // Add to modal container
        const container = document.getElementById('modal-container');
        container.insertAdjacentHTML('beforeend', modalHTML);

        this.element = document.getElementById(this.id);
        this.attachEventListeners();
    }

    /**
     * Attach event listeners
     */
    attachEventListeners() {
        // Close button
        const closeBtn = this.element.querySelector('[data-modal-close]');
        if (closeBtn) {
            closeBtn.addEventListener('click', () => this.close());
        }

        // Cancel button
        const cancelBtn = this.element.querySelector('[data-modal-cancel]');
        if (cancelBtn) {
            cancelBtn.addEventListener('click', () => {
                if (this.onCancel) this.onCancel();
                this.close();
            });
        }

        // Confirm button
        const confirmBtn = this.element.querySelector('[data-modal-confirm]');
        if (confirmBtn) {
            confirmBtn.addEventListener('click', async () => {
                if (this.onConfirm) {
                    // DÃ©sactiver le bouton pour Ã©viter les clics multiples
                    confirmBtn.disabled = true;
                    try {
                        const result = await this.onConfirm();
                        // Si onConfirm retourne true ou undefined, fermer le modal
                        if (result !== false) {
                            this.close();
                        } else {
                            // RÃ©activer le bouton si la validation Ã©choue
                            confirmBtn.disabled = false;
                        }
                    } catch (error) {
                        console.error('Error in onConfirm:', error);
                        // RÃ©activer le bouton en cas d'erreur
                        confirmBtn.disabled = false;
                    }
                } else {
                    this.close();
                }
            });
        }

        // Click outside to close
        this.element.addEventListener('click', (e) => {
            if (e.target === this.element) {
                this.close();
            }
        });

        // Escape key to close
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.isOpen) {
                this.close();
            }
        });
    }

    /**
     * Open modal
     */
    open() {
        if (!this.element) {
            this.create();
        }
        this.element.style.display = 'flex';
        this.isOpen = true;
        document.body.style.overflow = 'hidden';
    }

    /**
     * Close modal
     */
    close() {
        if (this.element) {
            this.element.style.display = 'none';
            this.isOpen = false;
            document.body.style.overflow = '';
            // RÃ©activer le bouton confirm au cas oÃ¹
            const confirmBtn = this.element.querySelector('[data-modal-confirm]');
            if (confirmBtn) {
                confirmBtn.disabled = false;
            }
            // DÃ©truire le modal aprÃ¨s un court dÃ©lai pour permettre les animations
            setTimeout(() => {
                if (this.element && !this.isOpen) {
                    this.destroy();
                }
            }, 300);
        }
    }

    /**
     * Destroy modal
     */
    destroy() {
        if (this.element) {
            this.element.remove();
            this.element = null;
            this.isOpen = false;
            document.body.style.overflow = '';
        }
    }

    /**
     * Update modal content
     */
    setContent(content) {
        if (this.element) {
            const body = this.element.querySelector('.modal-body');
            body.innerHTML = content;
        }
    }

    /**
     * Get form data from modal
     */
    getFormData() {
        if (!this.element) return null;
        
        const form = this.element.querySelector('form');
        if (!form) return null;

        const formData = new FormData(form);
        const data = {};
        
        for (let [key, value] of formData.entries()) {
            data[key] = value;
        }
        
        return data;
    }

    /**
     * Show loading state
     */
    setLoading(loading = true) {
        const confirmBtn = this.element?.querySelector('[data-modal-confirm]');
        if (confirmBtn) {
            confirmBtn.disabled = loading;
            confirmBtn.textContent = loading ? 'Loading...' : this.confirmText;
        }
    }

    /**
     * Show error in modal
     */
    showError(message) {
        const body = this.element?.querySelector('.modal-body');
        if (body) {
            const existingError = body.querySelector('.alert-danger');
            if (existingError) existingError.remove();
            
            body.insertAdjacentHTML('afterbegin', `
                <div class="alert alert-danger">
                    <span class="icon-inline">${Icons.error}</span> ${message}
                </div>
            `);
        }
    }
}

// Quick modal helpers
Modal.alert = (title, message) => {
    const modal = new Modal({
        title,
        content: `<p class="text-secondary">${message}</p>`,
        confirmText: 'OK',
        showFooter: true,
        onConfirm: () => modal.destroy()
    });
    modal.open();
    return modal;
};

Modal.confirm = (title, message, onConfirm) => {
    const modal = new Modal({
        title,
        content: `<p class="text-secondary">${message}</p>`,
        confirmText: 'Confirm',
        cancelText: 'Cancel',
        onConfirm: () => {
            if (onConfirm) onConfirm();
            modal.destroy();
        },
        onCancel: () => modal.destroy()
    });
    modal.open();
    return modal;
};

export default Modal;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/components/notification.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// ===================================
// NOTIFICATION.JS - SystÃ¨me de toast
// ===================================
import { Icons } from '../icons.js';

class Notification {
    constructor() {
        this.container = null;
        this.notifications = [];
        this.init();
    }

    init() {
        // CrÃ©er le conteneur de notifications
        this.container = document.createElement('div');
        this.container.id = 'notification-container';
        this.container.className = 'notification-container';
        document.body.appendChild(this.container);
    }

    /**
     * Afficher une notification
     */
    show(message, type = 'info', duration = 4000) {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        
        const icon = this.getIcon(type);
        notification.innerHTML = `
            <div class="notification-icon">${icon}</div>
            <div class="notification-message">${message}</div>
            <button class="notification-close">Ã—</button>
        `;

        this.container.appendChild(notification);
        this.notifications.push(notification);

        // Animation d'entrÃ©e
        setTimeout(() => notification.classList.add('notification-show'), 10);

        // Bouton fermer
        const closeBtn = notification.querySelector('.notification-close');
        closeBtn.addEventListener('click', () => this.hide(notification));

        // Auto-hide aprÃ¨s duration
        if (duration > 0) {
            setTimeout(() => this.hide(notification), duration);
        }

        return notification;
    }

    /**
     * Cacher une notification
     */
    hide(notification) {
        notification.classList.remove('notification-show');
        notification.classList.add('notification-hide');

        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
            const index = this.notifications.indexOf(notification);
            if (index > -1) {
                this.notifications.splice(index, 1);
            }
        }, 300);
    }

    /**
     * Obtenir l'icÃ´ne selon le type
     */
    getIcon(type) {
        const icons = {
            success: Icons.check,
            error: Icons.error,
            warning: Icons.warning,
            info: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><path d="M12 16V12M12 8H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`
        };
        return icons[type] || icons.info;
    }

    /**
     * Raccourcis pour types courants
     */
    success(message, duration = 4000) {
        return this.show(message, 'success', duration);
    }

    error(message, duration = 6000) {
        return this.show(message, 'error', duration);
    }

    warning(message, duration = 5000) {
        return this.show(message, 'warning', duration);
    }

    info(message, duration = 4000) {
        return this.show(message, 'info', duration);
    }

    /**
     * Notification de chargement
     */
    loading(message) {
        const notification = this.show(message, 'info', 0);
        notification.classList.add('notification-loading');
        
        const icon = notification.querySelector('.notification-icon');
        icon.innerHTML = '<div class="spinner-small"></div>';
        
        return notification;
    }

    /**
     * Mettre Ã  jour une notification existante
     */
    update(notification, message, type = 'success', duration = 4000) {
        notification.querySelector('.notification-message').textContent = message;
        notification.className = `notification notification-${type} notification-show`;
        notification.querySelector('.notification-icon').innerHTML = this.getIcon(type);
        
        // Retirer le spinner si prÃ©sent
        notification.classList.remove('notification-loading');

        if (duration > 0) {
            setTimeout(() => this.hide(notification), duration);
        }
    }

    /**
     * Nettoyer toutes les notifications
     */
    clearAll() {
        this.notifications.forEach(notification => this.hide(notification));
    }
}

// Styles CSS pour les notifications
const notificationStyles = `
<style>
.notification-container {
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 10000;
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-width: 400px;
}

.notification {
    background: #1A1A1A;
    border: 1px solid rgba(138, 253, 129, 0.08);
    border-radius: 16px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transform: translateX(calc(100% + 24px));
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
    min-width: 300px;
}

.notification-show {
    transform: translateX(0);
    opacity: 1;
}

.notification-hide {
    transform: translateX(calc(100% + 24px));
    opacity: 0;
}

.notification-icon {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: bold;
    flex-shrink: 0;
}

.notification-message {
    flex: 1;
    color: var(--text-primary);
    font-size: 14px;
    line-height: 1.5;
}

.notification-close {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 24px;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color var(--transition-fast);
    flex-shrink: 0;
}

.notification-close:hover {
    color: var(--text-primary);
}

.notification-success {
    border-left: 4px solid var(--accent-success);
}

.notification-success .notification-icon {
    color: var(--accent-success);
}

.notification-error {
    border-left: 4px solid var(--accent-danger);
}

.notification-error .notification-icon {
    color: var(--accent-danger);
}

.notification-warning {
    border-left: 4px solid var(--accent-warning);
}

.notification-warning .notification-icon {
    color: var(--accent-warning);
}

.notification-info {
    border-left: 4px solid var(--accent-info);
}

.notification-info .notification-icon {
    color: var(--accent-info);
}

.notification-loading .notification-icon {
    color: var(--accent-primary);
}

.spinner-small {
    width: 18px;
    height: 18px;
    border: 2px solid var(--border-color);
    border-top-color: var(--accent-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

@media (max-width: 768px) {
    .notification-container {
        right: 16px;
        bottom: 16px;
        max-width: calc(100vw - 32px);
    }
    
    .notification {
        min-width: auto;
    }
}
</style>
`;

// Injecter les styles
document.head.insertAdjacentHTML('beforeend', notificationStyles);

// Export singleton
const notify = new Notification();
export default notify;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/dashboard.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Dashboard View Template - HEARST STYLE
import { Icons } from '../icons.js';

export function renderDashboard(data) {
    return `
        <div class="dashboard-view">
            <div class="dashboard-content">
                <!-- Stats cards -->
                <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-info">
                        <div class="stat-label">Total Projects</div>
                        <div class="stat-value">${data.stats?.total_projects || 0}</div>
                    </div>
                    <div class="stat-icon">${Icons.projects}</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-info">
                        <div class="stat-label">Jobs Running</div>
                        <div class="stat-value">${data.stats?.jobs_running || 0}</div>
                    </div>
                    <div class="stat-icon">${Icons.jobs}</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-info">
                        <div class="stat-label">Success Rate</div>
                        <div class="stat-value">${Math.round((data.stats?.jobs_success_rate || 0) * 100)}%</div>
                    </div>
                    <div class="stat-icon">${Icons.check}</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-info">
                        <div class="stat-label">Total Versions</div>
                        <div class="stat-value">${data.stats?.total_versions || 0}</div>
                    </div>
                    <div class="stat-icon">${Icons.versions}</div>
                </div>
            </div>
            
            <!-- Recent projects -->
            <div class="section">
                <div class="section-header">
                    <h3 class="section-title">Recent Projects</h3>
                    <a href="#projects" class="btn btn-ghost btn-sm">View All â†’</a>
                </div>
                
                <div class="card-grid">
                    ${renderProjectCards(data.projects || [])}
                </div>
            </div>
            
            <!-- Recent jobs -->
            <div class="section mt-lg">
                <div class="section-header">
                    <h3 class="section-title">Recent Jobs</h3>
                    <a href="#jobs" class="btn btn-ghost btn-sm">View All â†’</a>
                </div>
                
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Project</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Duration</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${renderJobRows(data.jobs || [])}
                        </tbody>
                    </table>
                </div>
            </div>
            </div>
        </div>
    `;
}

function renderProjectCards(projects) {
    if (!projects.length) {
        return `<div class="card"><p class="text-secondary">No projects yet. Create your first project!</p></div>`;
    }
    
    return projects.slice(0, 6).map(project => `
        <div class="card project-card" data-project-id="${project.id}">
            <div class="card-header">
                <h4 class="card-title">${project.name}</h4>
                <span class="badge badge-neutral">${project.type}</span>
            </div>
            <div class="card-body">
                <div class="project-info">
                    <div class="info-row">
                        <span class="info-label">Stable Version:</span>
                        <span class="info-value">${project.stable_version_label || 'None'}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Last Job:</span>
                        <span class="badge badge-${getJobStatusClass(project.last_job_status)}">${project.last_job_status || 'None'}</span>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn btn-sm btn-secondary" onclick="viewProject('${project.id}')">View</button>
                <button class="btn btn-sm btn-primary" onclick="createJob('${project.id}')">New Job</button>
            </div>
        </div>
    `).join('');
}

function renderJobRows(jobs) {
    if (!jobs.length) {
        return `<tr><td colspan="6" class="text-center text-secondary">No recent jobs</td></tr>`;
    }
    
    return jobs.slice(0, 10).map(job => `
        <tr>
            <td><strong>${job.project?.name || 'Unknown'}</strong></td>
            <td><span class="badge badge-neutral">${job.type}</span></td>
            <td><span class="badge badge-${getJobStatusClass(job.status)} badge-dot">${job.status}</span></td>
            <td>${job.duration_seconds ? job.duration_seconds + 's' : '-'}</td>
            <td class="text-muted">${formatDate(job.created_at)}</td>
            <td>
                <button class="btn btn-sm btn-ghost" onclick="viewJob('${job.id}')">View</button>
            </td>
        </tr>
    `).join('');
}

function getJobStatusClass(status) {
    const statusMap = {
        success: 'success',
        running: 'info',
        pending: 'warning',
        failed: 'danger',
        cancelled: 'neutral'
    };
    return statusMap[status] || 'neutral';
}

function formatDate(dateString) {
    if (!dateString) return '-';
    const date = new Date(dateString);
    return date.toLocaleString('en-US', { 
        month: 'short', 
        day: 'numeric', 
        hour: '2-digit', 
        minute: '2-digit' 
    });
}

// Add custom styles for dashboard - HEARST THEME
const dashboardStyles = `
<style>
.dashboard-view {
    padding: 0;
    width: 100%;
}

.dashboard-content {
    width: 100%;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);
}

.stat-card {
    background: #1A1A1A;
    border: 1px solid rgba(138, 253, 129, 0.08);
    border-radius: 16px;
    padding: 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all 0.3s ease;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
}

.stat-card:hover {
    border-color: rgba(138, 253, 129, 0.15);
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.8);
}

.stat-icon {
    font-size: 32px;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--accent-primary);
    opacity: 0.7;
}

.stat-info {
    flex: 1;
}

.stat-label {
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 600;
}

.stat-value {
    font-size: 32px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.02em;
}

.section {
    margin-bottom: var(--spacing-xl);
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-lg);
}

.section-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: -0.01em;
}

.project-info {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.info-row {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
}

.info-label {
    color: var(--text-muted);
}

.info-value {
    color: var(--text-primary);
    font-weight: 500;
}

.text-center {
    text-align: center;
}

/* Responsive */
@media (max-width: 1024px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .card-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .card-grid {
        grid-template-columns: 1fr;
    }
    
    .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-md);
    }
}
</style>
`;

export const dashboardTemplate = renderDashboard;
export { dashboardStyles };


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/cockpit.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Cockpit Mining Operations View - HEARST STYLE
import { Icons } from '../icons.js';

export async function renderCockpitView() {
    return `
        <div class="cockpit-view">
            <div class="cockpit-content">
                <!-- Zone de contenu dynamique pour chaque section -->
                <div id="cockpit-sections-container">
                    <!-- Le contenu sera injectÃ© dynamiquement -->
                </div>
            </div>
        </div>
    `;
}

// Section titles mapping
export const cockpitSectionTitles = {
    dashboard: { title: 'Dashboard', subtitle: 'Real-time mining operations overview' },
    production: { title: 'Production', subtitle: 'Mining production metrics' },
    energy: { title: 'Energy', subtitle: 'Energy consumption and efficiency' },
    incidents: { title: 'Incidents', subtitle: 'System incidents and alerts' },
    clients: { title: 'Clients', subtitle: 'Client management' },
    'mining-accounts': { title: 'Mining Accounts', subtitle: 'Mining account management' },
    workers: { title: 'Workers', subtitle: 'Worker management' },
    miners: { title: 'Miners', subtitle: 'Miner hardware management' },
    reports: { title: 'Reports', subtitle: 'System reports' },
    hosters: { title: 'Hosters', subtitle: 'Hosting provider management' }
};

export const cockpitStyles = `
    <style>
        /* Cockpit View Styles - HEARST Design System */
        /* Note: Les styles de navigation sont dans cockpit.css */

        .cockpit-view {
            padding: 0;
            width: 100%;
        }

        .cockpit-content {
            width: 100%;
        }
    </style>
`;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/cockpit-sections.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Cockpit Sections - Mining Operations Platform
// Toutes les sections du cockpit avec design system HEARST (#8afd81)

import { Icons } from '../icons.js';

// Render cockpit section content
export function renderCockpitSection(sectionId) {
    const sections = {
        'dashboard': renderDashboardSection,
        'production': renderProductionSection,
        'energy': renderEnergySection,
        'incidents': renderIncidentsSection,
        'clients': renderClientsSection,
        'mining-accounts': renderMiningAccountsSection,
        'workers': renderWorkersSection,
        'miners': renderMinersSection,
        'reports': renderReportsSection,
        'hosters': renderHostersSection
    };
    
    const renderer = sections[sectionId];
    if (renderer) {
        return renderer();
    }
    
    return `<div class="cockpit-section-placeholder">
        <p>Section ${sectionId} - En cours de dÃ©veloppement...</p>
    </div>`;
}

// Dashboard Section - Real-time operations overview
function renderDashboardSection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Operations Dashboard</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">Real-time mining operations overview</p>
                </div>
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="display: flex; align-items: center; gap: 6px; padding: 8px 16px; background: rgba(138, 253, 129, 0.1); border: 1px solid #8afd81; border-radius: 20px;">
                        <div style="width: 8px; height: 8px; background: #8afd81; border-radius: 50%; animation: pulse 2s infinite;"></div>
                        <span style="font-size: 12px; color: #8afd81; font-weight: 700;">LIVE</span>
                    </div>
                </div>
            </div>
            
            <!-- Key Metrics Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; margin-bottom: 32px;">
                ${renderMetricCard('Total Hashrate', '1,245 TH/s', '#8afd81', Icons.hashrate)}
                ${renderMetricCard('Active Miners', '342', '#8afd81', Icons.miners)}
                ${renderMetricCard('Power Consumption', '2.8 MW', '#8afd81', Icons.energy)}
                ${renderMetricCard('Daily Revenue', '$12,450', '#8afd81', Icons.profit)}
                ${renderMetricCard('Uptime', '99.2%', '#8afd81', Icons.clock)}
                ${renderMetricCard('Active Workers', '1,245', '#8afd81', Icons.workers)}
            </div>
            
            <!-- Recent Activity -->
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px; margin-bottom: 32px;">
                <h3 style="font-size: 18px; font-weight: 700; color: #E0E0E0; margin-bottom: 20px;">Recent Activity</h3>
                <div style="display: grid; gap: 12px;">
                    ${renderActivityItem('Miner #342', 'Started mining', '2 minutes ago', 'success')}
                    ${renderActivityItem('Worker Pool #5', 'Hashrate increased by 15%', '15 minutes ago', 'info')}
                    ${renderActivityItem('Energy Alert', 'Power consumption above threshold', '1 hour ago', 'warning')}
                    ${renderActivityItem('Maintenance', 'Scheduled maintenance completed', '3 hours ago', 'success')}
                </div>
            </div>
            
            <!-- Status Overview -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px;">
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; color: #E0E0E0; margin-bottom: 16px;">System Status</h4>
                    <div style="display: grid; gap: 12px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #888; font-size: 14px;">All Systems</span>
                            <span style="color: #8afd81; font-weight: 600; font-size: 14px;">Operational</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #888; font-size: 14px;">Cooling</span>
                            <span style="color: #8afd81; font-weight: 600; font-size: 14px;">Normal</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #888; font-size: 14px;">Network</span>
                            <span style="color: #8afd81; font-weight: 600; font-size: 14px;">Connected</span>
                        </div>
                    </div>
                </div>
                
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; color: #E0E0E0; margin-bottom: 16px;">Performance</h4>
                    <div style="display: grid; gap: 12px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #888; font-size: 14px;">Efficiency</span>
                            <span style="color: #8afd81; font-weight: 600; font-size: 14px;">94.2%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #888; font-size: 14px;">Avg Temp</span>
                            <span style="color: #8afd81; font-weight: 600; font-size: 14px;">42Â°C</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #888; font-size: 14px;">Pool Connection</span>
                            <span style="color: #8afd81; font-weight: 600; font-size: 14px;">Stable</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

function renderMetricCard(label, value, color, icon) {
    return `
        <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px; transition: all 0.3s;" onmouseover="this.style.borderColor='${color}'; this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='#2a2a2a'; this.style.transform='translateY(0)'">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                <div style="width: 40px; height: 40px; background: rgba(138, 253, 129, 0.15); border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(138, 253, 129, 0.3);">
                    <span class="icon-inline" style="color: ${color};">${icon}</span>
                </div>
                <span style="font-size: 13px; color: #888; font-weight: 500;">${label}</span>
            </div>
            <div style="font-size: 32px; font-weight: 700; color: ${color};">${value}</div>
        </div>
    `;
}

function renderActivityItem(title, description, time, type) {
    const colors = {
        success: '#8afd81',
        warning: '#ffa500',
        error: '#ff4444',
        info: '#4da6ff'
    };
    const color = colors[type] || colors.info;
    
    return `
        <div style="display: flex; gap: 12px; padding: 12px; background: rgba(138, 253, 129, 0.05); border-left: 3px solid ${color}; border-radius: 8px;">
            <div style="flex: 1;">
                <div style="font-size: 14px; font-weight: 600; color: #E0E0E0; margin-bottom: 4px;">${title}</div>
                <div style="font-size: 12px; color: #888;">${description}</div>
            </div>
            <div style="font-size: 11px; color: #666; white-space: nowrap;">${time}</div>
        </div>
    `;
}

// Production Section - Mining production metrics
function renderProductionSection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Production Metrics</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">Mining production and performance data</p>
                </div>
            </div>
            
            <!-- Production Stats -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px; margin-bottom: 32px;">
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <div style="font-size: 13px; color: #888; margin-bottom: 8px;">Blocks Found (24h)</div>
                    <div style="font-size: 36px; font-weight: 700; color: #8afd81;">12</div>
                </div>
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <div style="font-size: 13px; color: #888; margin-bottom: 8px;">BTC Mined (24h)</div>
                    <div style="font-size: 36px; font-weight: 700; color: #8afd81;">37.5</div>
                </div>
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <div style="font-size: 13px; color: #888; margin-bottom: 8px;">Avg Hashrate</div>
                    <div style="font-size: 36px; font-weight: 700; color: #8afd81;">1,245 TH/s</div>
                </div>
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <div style="font-size: 13px; color: #888; margin-bottom: 8px;">Share Efficiency</div>
                    <div style="font-size: 36px; font-weight: 700; color: #8afd81;">98.5%</div>
                </div>
            </div>
            
            <!-- Production Table -->
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                <h3 style="font-size: 18px; font-weight: 700; color: #E0E0E0; margin-bottom: 20px;">Recent Production</h3>
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Block Height</th>
                                <th>Reward</th>
                                <th>Hashrate</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2 hours ago</td>
                                <td>#892,145</td>
                                <td style="color: #8afd81; font-weight: 600;">3.125 BTC</td>
                                <td>1,248 TH/s</td>
                                <td><span style="color: #8afd81;">Confirmed</span></td>
                            </tr>
                            <tr>
                                <td>5 hours ago</td>
                                <td>#892,144</td>
                                <td style="color: #8afd81; font-weight: 600;">3.125 BTC</td>
                                <td>1,242 TH/s</td>
                                <td><span style="color: #8afd81;">Confirmed</span></td>
                            </tr>
                            <tr>
                                <td>8 hours ago</td>
                                <td>#892,143</td>
                                <td style="color: #8afd81; font-weight: 600;">3.125 BTC</td>
                                <td>1,251 TH/s</td>
                                <td><span style="color: #8afd81;">Confirmed</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Energy Section - Energy consumption and efficiency
function renderEnergySection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Energy Management</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">Energy consumption and efficiency monitoring</p>
                </div>
            </div>
            
            <!-- Energy Stats -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px; margin-bottom: 32px;">
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <div style="font-size: 13px; color: #888; margin-bottom: 8px;">Total Power</div>
                    <div style="font-size: 36px; font-weight: 700; color: #8afd81;">2.8 MW</div>
                </div>
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <div style="font-size: 13px; color: #888; margin-bottom: 8px;">Cost per kWh</div>
                    <div style="font-size: 36px; font-weight: 700; color: #8afd81;">$0.045</div>
                </div>
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <div style="font-size: 13px; color: #888; margin-bottom: 8px;">Daily Cost</div>
                    <div style="font-size: 36px; font-weight: 700; color: #8afd81;">$3,024</div>
                </div>
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <div style="font-size: 13px; color: #888; margin-bottom: 8px;">PUE</div>
                    <div style="font-size: 36px; font-weight: 700; color: #8afd81;">1.15</div>
                </div>
            </div>
            
            <!-- Energy Sources -->
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                <h3 style="font-size: 18px; font-weight: 700; color: #E0E0E0; margin-bottom: 20px;">Energy Sources</h3>
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Source</th>
                                <th>Capacity</th>
                                <th>Usage</th>
                                <th>Percentage</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Grid Power</td>
                                <td>3.0 MW</td>
                                <td>2.1 MW</td>
                                <td>70%</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Solar</td>
                                <td>1.5 MW</td>
                                <td>0.5 MW</td>
                                <td>33%</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Wind</td>
                                <td>0.8 MW</td>
                                <td>0.2 MW</td>
                                <td>25%</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Incidents Section - System incidents and alerts
function renderIncidentsSection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Incidents & Alerts</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">System incidents and alerts monitoring</p>
                </div>
            </div>
            
            <!-- Active Incidents -->
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px; margin-bottom: 32px;">
                <h3 style="font-size: 18px; font-weight: 700; color: #E0E0E0; margin-bottom: 20px;">Active Incidents</h3>
                <div style="display: grid; gap: 16px;">
                    <div style="padding: 16px; background: rgba(255, 165, 0, 0.1); border-left: 4px solid #ffa500; border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                            <div>
                                <div style="font-size: 16px; font-weight: 600; color: #E0E0E0; margin-bottom: 4px;">High Temperature Alert</div>
                                <div style="font-size: 13px; color: #888;">Miner #342 - Temperature above threshold</div>
                            </div>
                            <span style="padding: 4px 12px; background: rgba(255, 165, 0, 0.2); border: 1px solid #ffa500; border-radius: 12px; font-size: 11px; color: #ffa500; font-weight: 600;">WARNING</span>
                        </div>
                        <div style="font-size: 12px; color: #666;">2 hours ago</div>
                    </div>
                </div>
            </div>
            
            <!-- Recent Incidents -->
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                <h3 style="font-size: 18px; font-weight: 700; color: #E0E0E0; margin-bottom: 20px;">Recent Incidents</h3>
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Type</th>
                                <th>Description</th>
                                <th>Severity</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2 hours ago</td>
                                <td>Temperature</td>
                                <td>Miner #342 - High temperature</td>
                                <td><span style="color: #ffa500;">Warning</span></td>
                                <td><span style="color: #8afd81;">Resolved</span></td>
                            </tr>
                            <tr>
                                <td>1 day ago</td>
                                <td>Network</td>
                                <td>Connection timeout - Pool #2</td>
                                <td><span style="color: #ffa500;">Warning</span></td>
                                <td><span style="color: #8afd81;">Resolved</span></td>
                            </tr>
                            <tr>
                                <td>3 days ago</td>
                                <td>Power</td>
                                <td>Power fluctuation detected</td>
                                <td><span style="color: #ff4444;">Critical</span></td>
                                <td><span style="color: #8afd81;">Resolved</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Clients Section - Client management
function renderClientsSection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Clients</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">Client management and monitoring</p>
                </div>
                <button class="btn btn-primary">+ Add Client</button>
            </div>
            
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Client Name</th>
                                <th>Hashrate</th>
                                <th>Miners</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Client A</td>
                                <td>450 TH/s</td>
                                <td>125</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                                <td>
                                    <button class="btn btn-sm btn-secondary">View</button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Client B</td>
                                <td>320 TH/s</td>
                                <td>88</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                                <td>
                                    <button class="btn btn-sm btn-secondary">View</button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Client C</td>
                                <td>475 TH/s</td>
                                <td>129</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                                <td>
                                    <button class="btn btn-sm btn-secondary">View</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Mining Accounts Section
function renderMiningAccountsSection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Mining Accounts</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">Mining account management</p>
                </div>
                <button class="btn btn-primary">+ Add Account</button>
            </div>
            
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Account Name</th>
                                <th>Pool</th>
                                <th>Hashrate</th>
                                <th>Workers</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Account 1</td>
                                <td>Foundry USA</td>
                                <td>1,245 TH/s</td>
                                <td>1,245</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Account 2</td>
                                <td>Antpool</td>
                                <td>850 TH/s</td>
                                <td>850</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Workers Section
function renderWorkersSection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Workers</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">Worker management and monitoring</p>
                </div>
            </div>
            
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Worker ID</th>
                                <th>Hashrate</th>
                                <th>Status</th>
                                <th>Last Share</th>
                                <th>Uptime</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">worker-001</td>
                                <td>1.0 TH/s</td>
                                <td><span style="color: #8afd81;">Online</span></td>
                                <td>2 min ago</td>
                                <td>99.8%</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">worker-002</td>
                                <td>1.0 TH/s</td>
                                <td><span style="color: #8afd81;">Online</span></td>
                                <td>1 min ago</td>
                                <td>99.9%</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">worker-003</td>
                                <td>0.8 TH/s</td>
                                <td><span style="color: #ffa500;">Warning</span></td>
                                <td>15 min ago</td>
                                <td>95.2%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Miners Section
function renderMinersSection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Miners</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">Miner hardware management</p>
                </div>
            </div>
            
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Miner ID</th>
                                <th>Model</th>
                                <th>Hashrate</th>
                                <th>Temperature</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">#342</td>
                                <td>Antminer S21</td>
                                <td>234 TH/s</td>
                                <td>42Â°C</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">#341</td>
                                <td>Antminer S21</td>
                                <td>234 TH/s</td>
                                <td>41Â°C</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">#340</td>
                                <td>Antminer S21</td>
                                <td>234 TH/s</td>
                                <td>45Â°C</td>
                                <td><span style="color: #ffa500;">Warning</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Reports Section
function renderReportsSection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Reports</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">System reports and analytics</p>
                </div>
                <button class="btn btn-primary">Generate Report</button>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px;">
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; color: #E0E0E0; margin-bottom: 12px;">Daily Report</h4>
                    <p style="font-size: 13px; color: #888; margin-bottom: 16px;">Daily mining operations summary</p>
                    <button class="btn btn-sm btn-secondary">View</button>
                </div>
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; color: #E0E0E0; margin-bottom: 12px;">Weekly Report</h4>
                    <p style="font-size: 13px; color: #888; margin-bottom: 16px;">Weekly performance analysis</p>
                    <button class="btn btn-sm btn-secondary">View</button>
                </div>
                <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; color: #E0E0E0; margin-bottom: 12px;">Monthly Report</h4>
                    <p style="font-size: 13px; color: #888; margin-bottom: 16px;">Monthly financial summary</p>
                    <button class="btn btn-sm btn-secondary">View</button>
                </div>
            </div>
        </div>
    `;
}

// Hosters Section
function renderHostersSection() {
    return `
        <div class="section-premium" style="padding: 32px; max-width: 1600px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 24px; font-weight: 700; color: #E0E0E0; margin-bottom: 8px;">Hosters</h2>
                    <p style="font-size: 14px; color: #888; font-weight: 500;">Hosting provider management</p>
                </div>
                <button class="btn btn-primary">+ Add Hoster</button>
            </div>
            
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; padding: 24px;">
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Hoster Name</th>
                                <th>Location</th>
                                <th>Capacity</th>
                                <th>Miners</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Hoster A</td>
                                <td>Texas, USA</td>
                                <td>5 MW</td>
                                <td>342</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: #E0E0E0;">Hoster B</td>
                                <td>Kazakhstan</td>
                                <td>3 MW</td>
                                <td>205</td>
                                <td><span style="color: #8afd81;">Active</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Initialization functions
export function initDashboard() {
    console.log('Dashboard initialized');
}

export function initProduction() {
    console.log('Production initialized');
}

export function initEnergy() {
    console.log('Energy initialized');
}

export function initIncidents() {
    console.log('Incidents initialized');
}

export function initClients() {
    console.log('Clients initialized');
}

export function initMiningAccounts() {
    console.log('Mining Accounts initialized');
}

export function initWorkers() {
    console.log('Workers initialized');
}

export function initMiners() {
    console.log('Miners initialized');
}

export function initReports() {
    console.log('Reports initialized');
}

export function initHosters() {
    console.log('Hosters initialized');
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/projects.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Projects View (Projestions) - HEARST STYLE
// Suit le mÃªme pattern que Cockpit et Settings
import { Icons } from '../icons.js';

export async function renderProjectsView(data = null) {
    return `
        <div class="projects-view">
            <div class="projects-content">
                <!-- Zone de contenu dynamique pour chaque section -->
                <div id="projections-sections-container">
                    <!-- Le contenu sera injectÃ© dynamiquement -->
                </div>
            </div>
        </div>
    `;
}

// Section titles mapping
export const projectionsSectionTitles = {
    overview: { title: 'Overview', subtitle: 'Real-time market metrics and mining news' },
    calculator: { title: 'Projections', subtitle: 'Mining profitability calculator' },
    results: { title: 'Results', subtitle: 'Analysis results and financial metrics' },
    charts: { title: 'Charts', subtitle: 'Financial visualizations and projections' },
    'monte-carlo': { title: 'Monte Carlo', subtitle: 'Probabilistic risk analysis' },
    projects: { title: 'Projects', subtitle: 'Manage and compare mining scenarios' },
    hardware: { title: 'Hardware', subtitle: 'ASIC fleet configuration and optimization' },
    energy: { title: 'Energy', subtitle: 'Renewable energy integration and optimization' },
    infrastructure: { title: 'Infrastructure', subtitle: 'Facility design and cooling systems' }
};

export const projectsStyles = `
    <style>
        /* Projects View (Projestions) Styles - HEARST Design System */
        /* Note: Les styles de navigation sont dans projections.css */
        
        .projects-view {
            padding: 0;
            width: 100%;
        }

        .projects-content {
            width: 100%;
        }
    </style>
`;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/projects-sections.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Projects Sections - Mining Intelligence Platform
// Toutes les sections de projections avec design system HEARST (#8afd81)

import { Icons } from '../icons.js';

// Render projection section content
export function renderProjectionSection(sectionId) {
    const sections = {
        'overview': renderOverviewSection,
        'calculator': renderCalculatorSection,
        'results': renderResultsSection,
        'charts': renderChartsSection,
        'monte-carlo': renderMonteCarloSection,
        'projects': renderProjectsListSection,
        'hardware': renderHardwareSection,
        'energy': renderEnergySection,
        'infrastructure': renderInfrastructureSection
    };
    
    const renderer = sections[sectionId];
    if (renderer) {
        return renderer();
    }
    
    return `<div class="projection-section-placeholder">
        <p>Section ${sectionId} - En cours de dÃ©veloppement...</p>
    </div>`;
}

// Overview Section
function renderOverviewSection() {
    return `
        <div class="projection-tab-content active" id="overview">
            ${renderMarketMetrics()}
            ${renderLiveNewsFeed()}
            ${renderMiningEquipment()}
            ${renderMiningPools()}
            ${renderEnergyCosts()}
            ${renderNetworkStats()}
        </div>
    `;
}

// Market Metrics
function renderMarketMetrics() {
    return `
        <div class="section-premium">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 14px; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; letter-spacing: -0.5px;">Market Metrics</h2>
                    <p style="font-size: 13px; color: var(--text-muted); font-weight: 500;">Real-time Bitcoin network statistics</p>
                </div>
                <div style="display: flex; align-items: center; gap: 6px; padding: 6px 12px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 20px;">
                    <div style="width: 6px; height: 6px; background: #8afd81; border-radius: 50%; animation: pulse 2s infinite;"></div>
                    <span style="font-size: 11px; color: var(--text-muted); font-weight: 600;">Updated: <span id="lastUpdate" style="color: var(--text-primary);">Just now</span></span>
                </div>
            </div>
            <div class="metrics-grid">
                ${renderMetricCard('green', 'Bitcoin Price', '$95,000', 'Live market data via CoinGecko API', 'btc')}
                ${renderMetricCard('blue', 'Network Hashrate', '742 EH/s', 'Total Bitcoin network computing power', 'hashrate')}
                ${renderMetricCard('yellow', 'Block Reward', '3.125 BTC', 'Current mining reward (post-halving 2024)', 'reward')}
                ${renderMetricCard('purple', 'Average Block Time', '10 min', 'Target block confirmation interval', 'time')}
            </div>
        </div>
    `;
}

function renderMetricCard(color, label, value, description, icon) {
    return `
        <div class="metric-card ${color}">
            <div class="metric-icon-wrapper ${color}">
                <svg fill="#8afd81" height="17" viewBox="0 0 24 24" width="17">
                    ${getMetricIcon(icon)}
                </svg>
            </div>
            <span class="metric-label">${label}</span>
            <span class="metric-value ${color}" id="overview${icon}">${value}</span>
            <span class="metric-description">${description}</span>
        </div>
    `;
}

function getMetricIcon(type) {
    const icons = {
        btc: '<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z"></path>',
        hashrate: '<path d="M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path>',
        reward: '<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5l7.51-3.49L17.5 6.5 9.99 9.99 6.5 17.5zm5.5-6.6c.61 0 1.1.49 1.1 1.1s-.49 1.1-1.1 1.1-1.1-.49-1.1-1.1.49-1.1 1.1-1.1z"></path>',
        time: '<path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path>'
    };
    return icons[type] || icons.btc;
}

// Live News Feed
function renderLiveNewsFeed() {
    return `
        <div class="section-premium" style="margin-top: 32px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="width: 40px; height: 40px; background: linear-gradient(135deg, rgba(138, 253, 129, 0.2), rgba(138, 253, 129, 0.05)); border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(138, 253, 129, 0.3);">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#8afd81" stroke-width="2">
                            <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z"/>
                        </svg>
                    </div>
                    <div>
                        <h2 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 2px; letter-spacing: -0.5px;">Live Mining News Feed</h2>
                        <p style="font-size: 12px; color: var(--text-muted); font-weight: 500;">Real-time updates from the mining industry</p>
                    </div>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <div style="display: flex; align-items: center; gap: 6px; padding: 6px 12px; background: rgba(138, 253, 129, 0.1); border: 1px solid #8afd81; border-radius: 20px;">
                        <div style="width: 6px; height: 6px; background: #8afd81; border-radius: 50%; animation: pulse 2s infinite;"></div>
                        <span style="font-size: 11px; color: #8afd81; font-weight: 700;">8 NEW</span>
                    </div>
                    <button onclick="refreshNewsFeed()" class="btn btn-sm btn-secondary">
                        <span class="icon-inline">${getRefreshIcon()}</span> Refresh
                    </button>
                </div>
            </div>
            <div id="newsFeedContainer" style="display: grid; gap: 12px; max-height: 500px; overflow-y: auto; padding-right: 8px;">
                ${renderNewsItems()}
            </div>
        </div>
    `;
}

function getRefreshIcon() {
    return `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1 4V10H7M23 20V14H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M20.49 9C19.7969 6.64928 18.4561 4.55098 16.6291 2.97852C14.8021 1.40605 12.5715 0.428193 10.2318 0.165477C7.89212 -0.0972385 5.54415 0.359264 3.46658 1.48781C1.38901 2.61635 -0.33647 4.36619 -1.55929 6.51999M20.49 15C21.1831 17.3507 22.5239 19.449 24.3509 21.0215C26.1779 22.5939 28.4085 23.5718 30.7482 23.8345C33.0879 24.0972 35.4358 23.6407 37.5134 22.5122C39.591 21.3836 41.3165 19.6338 42.5393 17.48" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`;
}

function renderNewsItems() {
    const news = [
        { type: 'NEW ASIC', time: '2 hours ago', title: 'Bitmain Announces S23 Ultra: 700 TH/s at 8.5 J/TH', desc: 'New flagship miner sets industry record for efficiency. Pre-orders starting at $9,200. Expected delivery Q2 2025.', location: 'Beijing, China', company: 'Bitmain Technologies' },
        { type: 'DEPLOYMENT', time: '5 hours ago', title: 'Marathon Digital Expands Texas Facility with 50 MW Capacity', desc: 'Major public miner adds 12,000 new ASICs in West Texas. Secured electricity at $0.038/kWh through long-term PPA.', location: 'Texas, USA', company: 'Marathon Digital' },
        { type: 'MARKET', time: 'Yesterday', title: 'Global Mining Costs Average Drops to $0.065/kWh in Q4 2025', desc: 'Cambridge CBECI reports 12% decrease from Q3. Driven by increased renewable energy adoption.', location: 'CBECI Report', company: '' },
        { type: 'REGULATION', time: 'Yesterday', title: 'Kazakhstan Announces New Tax Incentives for Green Mining', desc: 'Government offers 50% tax reduction for mining operations using 100% renewable energy. Effective January 2026.', location: 'Astana, Kazakhstan', company: 'Government Policy' },
        { type: 'NETWORK', time: '2 days ago', title: 'Network Hashrate Reaches All-Time High of 742 EH/s', desc: 'Bitcoin network computing power continues record growth. Difficulty adjustment expected to increase 8.2%.', location: 'Network Stats', company: '' },
        { type: 'PRICE', time: '3 days ago', title: 'Whatsminer M60S++ Prices Drop 18% Amid Market Competition', desc: 'MicroBT adjusts pricing strategy. Now available at $5,800, down from $7,100. Strong demand from North American operators.', location: 'Shenzhen, China', company: 'MicroBT' }
    ];
    
    return news.map(item => `
        <div class="news-item" style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; transition: all 0.2s; cursor: pointer;" onmouseover="this.style.borderColor='#8afd81'" onmouseout="this.style.borderColor='var(--border-color)'">
            <div style="display: flex; gap: 14px;">
                <div style="width: 44px; height: 44px; background: rgba(138, 253, 129, 0.15); border: 1px solid rgba(138, 253, 129, 0.3); border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8afd81" stroke-width="1.5">
                        <rect x="2" y="4" width="20" height="4" rx="1" stroke-linejoin="round"/>
                        <rect x="2" y="10" width="20" height="4" rx="1" stroke-linejoin="round"/>
                        <rect x="2" y="16" width="20" height="4" rx="1" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div style="flex: 1;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; flex-wrap: wrap;">
                        <span style="padding: 3px 8px; background: rgba(138, 253, 129, 0.15); border: 1px solid #8afd81; border-radius: 4px; font-size: 9px; font-weight: 700; color: #8afd81; text-transform: uppercase; letter-spacing: 0.5px;">${item.type}</span>
                        <span style="font-size: 11px; color: var(--text-muted); font-weight: 500;">${item.time}</span>
                    </div>
                    <h3 style="font-size: 14px; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; line-height: 1.4;">${item.title}</h3>
                    <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; margin-bottom: 10px;">${item.desc}</p>
                    <div style="display: flex; align-items: center; gap: 12px; font-size: 11px; color: var(--text-muted);">
                        <span>ðŸ“ ${item.location}</span>
                        ${item.company ? `<span>â€¢</span><span>ðŸ¢ ${item.company}</span>` : ''}
                    </div>
                </div>
            </div>
        </div>
    `).join('');
}

// Mining Equipment Accordion
function renderMiningEquipment() {
    return `
        <div class="accordion-section collapsed">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <div class="accordion-title">
                    <svg class="accordion-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                    Top Mining Equipment
                    <span class="accordion-badge">3 models</span>
                </div>
            </div>
            <div class="accordion-content">
                <p style="font-size: 14px; color: var(--text-muted); font-weight: 500; margin-bottom: 16px;">Latest generation ASIC miners (2025 specifications)</p>
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Model</th>
                                <th>Hashrate</th>
                                <th>Efficiency</th>
                                <th>Power</th>
                                <th>Price (2025)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Antminer S23 Hydro</td>
                                <td>605 TH/s</td>
                                <td>9.7 J/TH</td>
                                <td>5,870 W</td>
                                <td style="color: #8afd81; font-weight: 600;">$8,500</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Antminer S21 Pro</td>
                                <td>234 TH/s</td>
                                <td>15.0 J/TH</td>
                                <td>3,510 W</td>
                                <td style="color: #8afd81; font-weight: 600;">$4,008</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Whatsminer M60S++</td>
                                <td>188 TH/s</td>
                                <td>18.5 J/TH</td>
                                <td>3,478 W</td>
                                <td style="color: #8afd81; font-weight: 600;">$5,800</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Mining Pools Accordion
function renderMiningPools() {
    return `
        <div class="accordion-section collapsed">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <div class="accordion-title">
                    <svg class="accordion-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                    Top Mining Pools
                    <span class="accordion-badge">5 pools</span>
                </div>
            </div>
            <div class="accordion-content">
                <p style="font-size: 14px; color: var(--text-muted); font-weight: 500; margin-bottom: 16px;">Largest Bitcoin mining pools by hashrate share</p>
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Pool Name</th>
                                <th>Hashrate Share</th>
                                <th>Blocks (24h)</th>
                                <th>Fee</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Foundry USA</td>
                                <td>29.8%</td>
                                <td>42</td>
                                <td style="color: #8afd81;">0%</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Antpool</td>
                                <td>24.1%</td>
                                <td>34</td>
                                <td>2.5%</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">ViaBTC</td>
                                <td>12.3%</td>
                                <td>17</td>
                                <td>4%</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">F2Pool</td>
                                <td>11.9%</td>
                                <td>17</td>
                                <td>2.5%</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Binance Pool</td>
                                <td>8.2%</td>
                                <td>12</td>
                                <td>0%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Energy Costs Accordion
function renderEnergyCosts() {
    return `
        <div class="accordion-section collapsed">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <div class="accordion-title">
                    <svg class="accordion-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                    Global Energy Costs
                    <span class="accordion-badge">By region</span>
                </div>
            </div>
            <div class="accordion-content">
                <p style="font-size: 14px; color: var(--text-muted); font-weight: 500; margin-bottom: 16px;">Average electricity costs for mining operations (2025)</p>
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Region</th>
                                <th>Average Cost</th>
                                <th>Range</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">North America</td>
                                <td>$0.045/kWh</td>
                                <td>$0.03 - $0.08</td>
                                <td><span style="color: #8afd81;">Stable</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Central Asia</td>
                                <td>$0.038/kWh</td>
                                <td>$0.025 - $0.055</td>
                                <td><span style="color: #8afd81;">Growing</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Europe</td>
                                <td>$0.085/kWh</td>
                                <td>$0.06 - $0.12</td>
                                <td><span style="color: var(--accent-yellow);">High</span></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">South America</td>
                                <td>$0.052/kWh</td>
                                <td>$0.035 - $0.075</td>
                                <td><span style="color: #8afd81;">Stable</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Network Stats Accordion
function renderNetworkStats() {
    return `
        <div class="accordion-section collapsed">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <div class="accordion-title">
                    <svg class="accordion-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                    Network Statistics
                    <span class="accordion-badge">Live data</span>
                </div>
            </div>
            <div class="accordion-content">
                <p style="font-size: 14px; color: var(--text-muted); font-weight: 500; margin-bottom: 16px;">Bitcoin network performance metrics</p>
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Value</th>
                                <th>Change (24h)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Total Hashrate</td>
                                <td>742 EH/s</td>
                                <td style="color: #8afd81;">+2.3%</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Difficulty</td>
                                <td>107.3T</td>
                                <td style="color: #8afd81;">+1.8%</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Avg Block Time</td>
                                <td>9.8 min</td>
                                <td style="color: var(--text-muted);">-0.2%</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Transactions/Block</td>
                                <td>3,247</td>
                                <td style="color: #8afd81;">+5.1%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Calculator Section (simplified - will be expanded)
function renderCalculatorSection() {
    return `
        <div class="projection-tab-content active" id="calculator-section">
            <div style="width: 100%; padding: 40px 20px;">
                <!-- STEPPER NAVIGATION -->
                <div class="stepper-container">
                    <div class="stepper">
                        <!-- Progress Line (behind circles) -->
                        <div class="progress-line-container">
                            <div class="progress-line-bg"></div>
                            <div class="stepper-progress" id="stepperProgress" style="width: 0%;"></div>
                        </div>
                        
                        <div class="step active" data-step="0" onclick="goToStep(0)">
                            <div class="step-circle">1</div>
                            <div class="step-label">Context &<br>Scenario</div>
                        </div>
                        
                        <div class="step" data-step="1" onclick="goToStep(1)">
                            <div class="step-circle">2</div>
                            <div class="step-label">Machine<br>Selection</div>
                        </div>
                        
                        <div class="step" data-step="2" onclick="goToStep(2)">
                            <div class="step-circle">3</div>
                            <div class="step-label">Energy & Site</div>
                        </div>
                        
                        <div class="step" data-step="3" onclick="goToStep(3)">
                            <div class="step-circle">4</div>
                            <div class="step-label">Scale &<br>Schedule</div>
                        </div>
                        
                        <div class="step" data-step="4" onclick="goToStep(4)">
                            <div class="step-circle">5</div>
                            <div class="step-label">Revenue</div>
                        </div>
                        
                        <div class="step" data-step="5" onclick="goToStep(5)">
                            <div class="step-circle">6</div>
                            <div class="step-label">OPEX & Fees</div>
                        </div>
                        
                        <div class="step" data-step="6" onclick="goToStep(6)">
                            <div class="step-circle">7</div>
                            <div class="step-label">Financing</div>
                        </div>
                        
                        <div class="step" data-step="7" onclick="goToStep(7)">
                            <div class="step-circle">8</div>
                            <div class="step-label">Outputs</div>
                        </div>
                    </div>
                </div>
                
                <!-- CONTENT AREA WITH GRID -->
                <div style="display: grid; grid-template-columns: 1fr 350px; gap: 24px;">
                    <div class="main-content">
                        ${renderCalculatorStep0()}
                        ${renderCalculatorStep1()}
                        ${renderCalculatorStep2()}
                        ${renderCalculatorStep3()}
                        ${renderCalculatorStep4()}
                        ${renderCalculatorStep5()}
                        ${renderCalculatorStep6()}
                        ${renderCalculatorStep7()}
                    </div>
                    
                    <!-- SIDEBAR SUMMARY -->
                    ${renderCalculatorSummary()}
                </div>
            </div>
        </div>
    `;
}

// Step 0: Context & Scenario
function renderCalculatorStep0() {
    return `
        <div class="step-content active" id="step-0">
            <div class="param-card">
                <div class="param-card-title">
                    Project Information
                    <span class="badge">All Editable</span>
                </div>
                
                <div class="grid-2">
                    <div>
                        <label class="form-label">Project Name</label>
                        <input type="text" class="form-input" placeholder="My Mining Project" value="Project Alpha">
                    </div>
                    
                    <div>
                        <label class="form-label">Currency</label>
                        <select class="form-input">
                            <option value="USD" selected>USD ($)</option>
                            <option value="EUR">EUR (â‚¬)</option>
                            <option value="AED">AED (Ø¯.Ø¥)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="form-label">Country / Location</label>
                        <input type="text" class="form-input" placeholder="United States" value="United States">
                    </div>
                    
                    <div>
                        <label class="form-label">Total Budget (Optional)</label>
                        <input type="number" class="form-input" id="totalBudget" placeholder="2500000" value="2500000">
                        <small style="color: var(--text-muted); font-size: 11px; margin-top: 4px; display: block;">
                            Will help compute max units after machine selection
                        </small>
                    </div>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Operation Type</div>
                
                <div class="radio-cards">
                    <label class="radio-card">
                        <input type="radio" name="operationType" value="maas" checked>
                        <div class="radio-card-label">Mining as a Service</div>
                        <div class="radio-card-desc">Hosted by provider</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="operationType" value="self">
                        <div class="radio-card-label">Self-Mining</div>
                        <div class="radio-card-desc">Own operation</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="operationType" value="infra">
                        <div class="radio-card-label">Infrastructure Only</div>
                        <div class="radio-card-desc">Sell capacity</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="operationType" value="hybrid">
                        <div class="radio-card-label">Infra + Mining</div>
                        <div class="radio-card-desc">Mixed model</div>
                    </label>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Projection Horizon</div>
                
                <div class="grid-2" style="margin-bottom: 16px;">
                    <div>
                        <label class="form-label">Mode</label>
                        <select class="form-input" id="horizonMode">
                            <option value="YEARS" selected>Years</option>
                            <option value="MONTHS">Months</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="form-label">Duration</label>
                        <input type="number" class="form-input" id="horizonValue" value="4" min="1">
                    </div>
                </div>
                
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <button class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;" onclick="setHorizon('YEARS', 3)">3 Years</button>
                    <button class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;" onclick="setHorizon('YEARS', 4)">4 Years</button>
                    <button class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;" onclick="setHorizon('YEARS', 5)">5 Years</button>
                    <button class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;" onclick="setHorizon('MONTHS', 12)">12 Months</button>
                    <button class="btn btn-secondary" style="font-size: 12px; padding: 8px 16px;" onclick="setHorizon('MONTHS', 24)">24 Months</button>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-primary" onclick="nextStep()">Next: Machine Selection â†’</button>
            </div>
        </div>
    `;
}

// Step 1: Machine Selection
function renderCalculatorStep1() {
    return `
        <div class="step-content" id="step-1">
            <div class="param-card">
                <div class="param-card-title">
                    Select ASIC Model
                    <span class="badge">Market Snapshot: Nov 9, 2025</span>
                </div>
                <div class="param-card-subtitle">
                    Choose your mining hardware. Specs are pre-filled from market data but fully editable.
                </div>
                
                <div class="machine-grid">
                    <div class="machine-card selected" data-machine="s23hydro">
                        <div class="machine-card-header">
                            <div class="machine-name">Antminer S23 Hydro</div>
                            <div class="machine-badge">Popular</div>
                        </div>
                        <div class="machine-specs">
                            <div class="machine-spec">
                                <span class="machine-spec-label">Hashrate</span>
                                <span class="machine-spec-value">605 TH/s</span>
                            </div>
                            <div class="machine-spec">
                                <span class="machine-spec-label">Power</span>
                                <span class="machine-spec-value">5,870 W</span>
                            </div>
                            <div class="machine-spec">
                                <span class="machine-spec-label">Efficiency</span>
                                <span class="machine-spec-value">9.7 J/TH</span>
                            </div>
                        </div>
                        <div class="machine-price">
                            Unit Price: <span class="machine-price-value">$8,500</span>
                        </div>
                    </div>

                    <div class="machine-card" data-machine="s21pro">
                        <div class="machine-card-header">
                            <div class="machine-name">Antminer S21 Pro</div>
                            <div class="machine-badge">New</div>
                        </div>
                        <div class="machine-specs">
                            <div class="machine-spec">
                                <span class="machine-spec-label">Hashrate</span>
                                <span class="machine-spec-value">234 TH/s</span>
                            </div>
                            <div class="machine-spec">
                                <span class="machine-spec-label">Power</span>
                                <span class="machine-spec-value">3,510 W</span>
                            </div>
                            <div class="machine-spec">
                                <span class="machine-spec-label">Efficiency</span>
                                <span class="machine-spec-value">15.0 J/TH</span>
                            </div>
                        </div>
                        <div class="machine-price">
                            Unit Price: <span class="machine-price-value">$4,008</span>
                        </div>
                    </div>

                    <div class="machine-card" data-machine="m60s">
                        <div class="machine-card-header">
                            <div class="machine-name">Whatsminer M60S++</div>
                        </div>
                        <div class="machine-specs">
                            <div class="machine-spec">
                                <span class="machine-spec-label">Hashrate</span>
                                <span class="machine-spec-value">372 TH/s</span>
                            </div>
                            <div class="machine-spec">
                                <span class="machine-spec-label">Power</span>
                                <span class="machine-spec-value">7,200 W</span>
                            </div>
                            <div class="machine-spec">
                                <span class="machine-spec-label">Efficiency</span>
                                <span class="machine-spec-value">19.4 J/TH</span>
                            </div>
                        </div>
                        <div class="machine-price">
                            Unit Price: <span class="machine-price-value">$5,800</span>
                        </div>
                    </div>

                    <div class="machine-card" data-machine="custom">
                        <div class="machine-card-header">
                            <div class="machine-name">Custom Model</div>
                            <div class="machine-badge">Editable</div>
                        </div>
                        <div class="machine-specs">
                            <div class="machine-spec">
                                <span class="machine-spec-label">Hashrate</span>
                                <span class="machine-spec-value">? TH/s</span>
                            </div>
                            <div class="machine-spec">
                                <span class="machine-spec-label">Power</span>
                                <span class="machine-spec-value">? W</span>
                            </div>
                            <div class="machine-spec">
                                <span class="machine-spec-label">Efficiency</span>
                                <span class="machine-spec-value">? J/TH</span>
                            </div>
                        </div>
                        <div class="machine-price">
                            Unit Price: <span class="machine-price-value">$0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Machine Specifications (Editable)</div>
                
                <div class="grid-4">
                    <div>
                        <label class="form-label">Hashrate (TH/s)</label>
                        <input type="number" class="form-input" id="machineHashrate" value="605">
                    </div>
                    
                    <div>
                        <label class="form-label">Power Draw (W)</label>
                        <input type="number" class="form-input" id="machinePower" value="5870">
                    </div>
                    
                    <div>
                        <label class="form-label">Efficiency (J/TH)</label>
                        <input type="number" class="form-input" id="machineEfficiency" value="9.7" step="0.1">
                    </div>
                    
                    <div>
                        <label class="form-label">Unit Price ($)</label>
                        <input type="number" class="form-input" id="machinePrice" value="8500">
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevStep()">â† Back</button>
                <button class="btn btn-primary" onclick="nextStep()">Next: Energy & Site â†’</button>
            </div>
        </div>
    `;
}

// Step 2: Energy & Site
function renderCalculatorStep2() {
    return `
        <div class="step-content" id="step-2">
            <div class="param-card">
                <div class="param-card-title">Energy Source</div>
                
                <div class="radio-cards">
                    <label class="radio-card">
                        <input type="radio" name="energySource" value="grid" checked>
                        <div class="radio-card-label">Grid</div>
                        <div class="radio-card-desc">Standard utility</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="energySource" value="gas">
                        <div class="radio-card-label">Natural Gas</div>
                        <div class="radio-card-desc">On-site generation</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="energySource" value="hydro">
                        <div class="radio-card-label">Hydro</div>
                        <div class="radio-card-desc">Renewable</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="energySource" value="solar">
                        <div class="radio-card-label">Solar + Grid</div>
                        <div class="radio-card-desc">Hybrid</div>
                    </label>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Electricity Tariff (User-Provided)</div>
                
                <div class="grid-3">
                    <div>
                        <label class="form-label">Base Tariff ($/kWh)</label>
                        <input type="number" class="form-input" id="baseTariff" value="0.07" step="0.001">
                    </div>
                    
                    <div>
                        <label class="form-label">Demand Charge ($/kW/mo)</label>
                        <input type="number" class="form-input" id="demandCharge" value="0" step="0.1">
                    </div>
                    
                    <div>
                        <label class="form-label">Curtailment (% hours)</label>
                        <input type="number" class="form-input" id="curtailment" value="0" min="0" max="100">
                    </div>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Site Constraints</div>
                
                <div class="grid-3">
                    <div>
                        <label class="form-label">Max Available Power (MW)</label>
                        <input type="number" class="form-input" id="maxPower" value="10" step="0.1">
                    </div>
                    
                    <div>
                        <label class="form-label">PUE / Cooling Factor</label>
                        <input type="number" class="form-input" id="pue" value="1.1" step="0.01">
                    </div>
                    
                    <div>
                        <label class="form-label">VAT on CAPEX (%)</label>
                        <input type="number" class="form-input" id="vatRate" value="0" step="0.1">
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevStep()">â† Back</button>
                <button class="btn btn-primary" onclick="nextStep()">Next: Scale & Schedule â†’</button>
            </div>
        </div>
    `;
}

// Step 3: Scale & Schedule
function renderCalculatorStep3() {
    return `
        <div class="step-content" id="step-3">
            <div class="param-card">
                <div class="param-card-title">Sizing Mode</div>
                
                <div class="radio-cards" style="grid-template-columns: 1fr 1fr;">
                    <label class="radio-card">
                        <input type="radio" name="sizingMode" value="budget" checked>
                        <div class="radio-card-label">Derive from Budget</div>
                        <div class="radio-card-desc">Auto-calculate unit count</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="sizingMode" value="manual">
                        <div class="radio-card-label">Manual Unit Count</div>
                        <div class="radio-card-desc">Specify exact number</div>
                    </label>
                </div>
            </div>

            <div class="param-card" id="budgetDerivedSection">
                <div class="param-card-title">Budget Allocation</div>
                <div class="param-card-subtitle">
                    Total Budget: $2,500,000 | Machine Price: $8,500/unit
                </div>
                
                <div class="grid-2">
                    <div>
                        <label class="form-label">Budget for Rigs (%)</label>
                        <input type="range" class="form-input" id="rigBudgetPercent" min="0" max="100" value="70">
                        <div style="text-align: center; margin-top: 8px; font-size: 18px; font-weight: 700; color: #8afd81;">
                            70% = $1,750,000
                        </div>
                        <div style="text-align: center; margin-top: 4px; font-size: 13px; color: var(--text-muted);">
                            â‰ˆ 206 units
                        </div>
                    </div>
                    
                    <div>
                        <label class="form-label">Budget for Infrastructure (%)</label>
                        <input type="range" class="form-input" id="infraBudgetPercent" min="0" max="100" value="30">
                        <div style="text-align: center; margin-top: 8px; font-size: 18px; font-weight: 700; color: #8afd81;">
                            30% = $750,000
                        </div>
                        <div style="text-align: center; margin-top: 4px; font-size: 13px; color: var(--text-muted);">
                            Site, power, cooling
                        </div>
                    </div>
                </div>
            </div>

            <div class="param-card" id="manualCountSection" style="display: none;">
                <div class="param-card-title">Manual Configuration</div>
                
                <div class="grid-2">
                    <div>
                        <label class="form-label">Number of Units</label>
                        <input type="number" class="form-input" id="manualUnits" value="200" min="1">
                    </div>
                    
                    <div>
                        <label class="form-label">Total Power (MW)</label>
                        <input type="text" class="form-input" value="1.17" disabled>
                    </div>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Deployment Phases</div>
                <div class="param-card-subtitle">
                    Define when and how many units come online
                </div>
                
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="border-bottom: 1px solid var(--gray-700);">
                            <th style="text-align: left; padding: 10px; font-size: 12px; color: var(--text-muted); text-transform: uppercase;">Phase</th>
                            <th style="text-align: right; padding: 10px; font-size: 12px; color: var(--text-muted); text-transform: uppercase;">Units</th>
                            <th style="text-align: right; padding: 10px; font-size: 12px; color: var(--text-muted); text-transform: uppercase;">Start Month</th>
                            <th style="text-align: right; padding: 10px; font-size: 12px; color: var(--text-muted); text-transform: uppercase;">Ramp (months)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid var(--gray-700);">
                            <td style="padding: 10px; color: var(--text-primary);">Phase 1</td>
                            <td style="padding: 10px; text-align: right;"><input type="number" style="width: 80px; background: var(--gray-800); border: 1px solid var(--gray-700); border-radius: 6px; padding: 6px; color: var(--text-primary); text-align: right;" value="100"></td>
                            <td style="padding: 10px; text-align: right;"><input type="number" style="width: 80px; background: var(--gray-800); border: 1px solid var(--gray-700); border-radius: 6px; padding: 6px; color: var(--text-primary); text-align: right;" value="0"></td>
                            <td style="padding: 10px; text-align: right;"><input type="number" style="width: 80px; background: var(--gray-800); border: 1px solid var(--gray-700); border-radius: 6px; padding: 6px; color: var(--text-primary); text-align: right;" value="1"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; color: var(--text-primary);">Phase 2</td>
                            <td style="padding: 10px; text-align: right;"><input type="number" style="width: 80px; background: var(--gray-800); border: 1px solid var(--gray-700); border-radius: 6px; padding: 6px; color: var(--text-primary); text-align: right;" value="106"></td>
                            <td style="padding: 10px; text-align: right;"><input type="number" style="width: 80px; background: var(--gray-800); border: 1px solid var(--gray-700); border-radius: 6px; padding: 6px; color: var(--text-primary); text-align: right;" value="3"></td>
                            <td style="padding: 10px; text-align: right;"><input type="number" style="width: 80px; background: var(--gray-800); border: 1px solid var(--gray-700); border-radius: 6px; padding: 6px; color: var(--text-primary); text-align: right;" value="2"></td>
                        </tr>
                    </tbody>
                </table>
                
                <button class="btn btn-secondary" style="margin-top: 12px; font-size: 12px; padding: 8px 16px;">+ Add Phase</button>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevStep()">â† Back</button>
                <button class="btn btn-primary" onclick="nextStep()">Next: Revenue â†’</button>
            </div>
        </div>
    `;
}

// Step 4: Revenue
function renderCalculatorStep4() {
    return `
        <div class="step-content" id="step-4">
            <div class="param-card">
                <div class="param-card-title">
                    BTC Price Scenario
                    <span class="badge">Market Snapshot: Nov 9, 2025</span>
                </div>
                
                <div class="radio-cards">
                    <label class="radio-card">
                        <input type="radio" name="btcScenario" value="bear">
                        <div class="radio-card-label">Bear</div>
                        <div class="radio-card-desc">$60,000 â†’ $50,000</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="btcScenario" value="flat" checked>
                        <div class="radio-card-label">Flat</div>
                        <div class="radio-card-desc">$95,000 (current)</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="btcScenario" value="bull">
                        <div class="radio-card-label">Bull</div>
                        <div class="radio-card-desc">$95,000 â†’ $150,000</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="btcScenario" value="custom">
                        <div class="radio-card-label">Custom</div>
                        <div class="radio-card-desc">Define your own</div>
                    </label>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Custom BTC Price (Optional)</div>
                <div class="param-card-subtitle">
                    Define a custom BTC price trajectory over the projection horizon.
                </div>
                
                <div class="grid-2">
                    <div>
                        <label class="form-label">Start Price ($)</label>
                        <input type="number" class="form-input" id="customBtcStart" value="95000">
                    </div>
                    <div>
                        <label class="form-label">End Price ($)</label>
                        <input type="number" class="form-input" id="customBtcEnd" value="120000">
                    </div>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Difficulty Adjustment</div>
                
                <div class="grid-2">
                    <div>
                        <label class="form-label">Initial Difficulty</label>
                        <input type="text" class="form-input" value="120 T" disabled>
                    </div>
                    <div>
                        <label class="form-label">Annual Growth (%)</label>
                        <input type="number" class="form-input" id="difficultyGrowth" value="10" min="0" max="100">
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevStep()">â† Back</button>
                <button class="btn btn-primary" onclick="nextStep()">Next: OPEX & Fees â†’</button>
            </div>
        </div>
    `;
}

// Step 5: OPEX & Fees
function renderCalculatorStep5() {
    return `
        <div class="step-content" id="step-5">
            <div class="param-card">
                <div class="param-card-title">Operational Expenses (Monthly)</div>
                
                <div class="grid-2">
                    <div>
                        <label class="form-label">Staffing ($)</label>
                        <input type="number" class="form-input" id="opexStaffing" value="15000">
                    </div>
                    <div>
                        <label class="form-label">Rent / Site ($)</label>
                        <input type="number" class="form-input" id="opexRent" value="5000">
                    </div>
                    <div>
                        <label class="form-label">Maintenance ($)</label>
                        <input type="number" class="form-input" id="opexMaintenance" value="2000">
                    </div>
                    <div>
                        <label class="form-label">Software ($)</label>
                        <input type="number" class="form-input" id="opexSoftware" value="1000">
                    </div>
                    <div>
                        <label class="form-label">Other ($)</label>
                        <input type="number" class="form-input" id="opexOther" value="500">
                    </div>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Pool & Transaction Fees</div>
                
                <div class="grid-2">
                    <div>
                        <label class="form-label">Mining Pool Fee (%)</label>
                        <input type="number" class="form-input" id="poolFee" value="2.5" step="0.1" min="0" max="100">
                    </div>
                    <div>
                        <label class="form-label">Transaction Fee (BTC/block)</label>
                        <input type="number" class="form-input" id="txFee" value="0.000005" step="0.000001">
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevStep()">â† Back</button>
                <button class="btn btn-primary" onclick="nextStep()">Next: Financing â†’</button>
            </div>
        </div>
    `;
}

// Step 6: Financing
function renderCalculatorStep6() {
    return `
        <div class="step-content" id="step-6">
            <div class="param-card">
                <div class="param-card-title">Initial Capital</div>
                
                <div class="radio-cards">
                    <label class="radio-card">
                        <input type="radio" name="capitalSource" value="equity" checked>
                        <div class="radio-card-label">Equity</div>
                        <div class="radio-card-desc">Self-funded / Investors</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="capitalSource" value="debt">
                        <div class="radio-card-label">Debt</div>
                        <div class="radio-card-desc">Loan / Credit</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="capitalSource" value="mixed">
                        <div class="radio-card-label">Mixed</div>
                        <div class="radio-card-desc">Equity + Debt</div>
                    </label>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Debt Details (If Applicable)</div>
                
                <div class="grid-2">
                    <div>
                        <label class="form-label">Loan Amount ($)</label>
                        <input type="number" class="form-input" id="loanAmount" value="0">
                    </div>
                    <div>
                        <label class="form-label">Interest Rate (%)</label>
                        <input type="number" class="form-input" id="interestRate" value="0" step="0.1" min="0" max="100">
                    </div>
                    <div>
                        <label class="form-label">Loan Term (Months)</label>
                        <input type="number" class="form-input" id="loanTerm" value="0" min="0">
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevStep()">â† Back</button>
                <button class="btn btn-primary" onclick="nextStep()">Next: Outputs â†’</button>
            </div>
        </div>
    `;
}

// Step 7: Outputs
function renderCalculatorStep7() {
    return `
        <div class="step-content" id="step-7">
            <div class="param-card">
                <div class="param-card-title">Output Preferences</div>
                
                <div class="radio-cards">
                    <label class="radio-card">
                        <input type="radio" name="outputDetail" value="summary" checked>
                        <div class="radio-card-label">Summary</div>
                        <div class="radio-card-desc">Key metrics only</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="outputDetail" value="detailed">
                        <div class="radio-card-label">Detailed</div>
                        <div class="radio-card-desc">Full financial breakdown</div>
                    </label>
                </div>
            </div>

            <div class="param-card">
                <div class="param-card-title">Reporting Frequency</div>
                
                <div class="radio-cards">
                    <label class="radio-card">
                        <input type="radio" name="reportFrequency" value="monthly" checked>
                        <div class="radio-card-label">Monthly</div>
                        <div class="radio-card-desc">Granular data</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="reportFrequency" value="quarterly">
                        <div class="radio-card-label">Quarterly</div>
                        <div class="radio-card-desc">Standard business cycles</div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="reportFrequency" value="annually">
                        <div class="radio-card-label">Annually</div>
                        <div class="radio-card-desc">High-level overview</div>
                    </label>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevStep()">â† Back</button>
                <button class="btn btn-primary" onclick="calculateProjection()">Calculate Projection</button>
            </div>
        </div>
    `;
}

// Summary Panel
function renderCalculatorSummary() {
    return `
        <div class="summary-panel">
            <div class="summary-title">Projection Summary</div>
            
            <div class="summary-item">
                <span class="summary-label">Project</span>
                <span class="summary-value">Project Alpha</span>
            </div>
            
            <div class="summary-item">
                <span class="summary-label">Machine</span>
                <span class="summary-value">S23 Hydro</span>
            </div>
            
            <div class="summary-item">
                <span class="summary-label">Units</span>
                <span class="summary-value">206</span>
            </div>
            
            <div class="summary-item">
                <span class="summary-label">Total Hashrate</span>
                <span class="summary-value">124.6 PH/s</span>
            </div>
            
            <div class="summary-item">
                <span class="summary-label">Total Power</span>
                <span class="summary-value">1.21 MW</span>
            </div>
            
            <div class="summary-item" style="padding-top: 12px; margin-top: 12px; border-top: 1px solid #8afd81;">
                <span class="summary-label">Total Budget</span>
                <span class="summary-value highlight">$2,500,000</span>
            </div>
            
            <div class="summary-item">
                <span class="summary-label">Monthly Revenue</span>
                <span class="summary-value">$843,000</span>
            </div>
            
            <div class="summary-item">
                <span class="summary-label">Monthly OPEX</span>
                <span class="summary-value">$322,504</span>
            </div>
            
            <div class="summary-item" style="padding-top: 12px; margin-top: 12px; border-top: 1px solid #8afd81;">
                <span class="summary-label">Annual ROI</span>
                <span class="summary-value highlight">57.8%</span>
            </div>
            
            <div class="summary-item">
                <span class="summary-label">Payback</span>
                <span class="summary-value">18 months</span>
            </div>
        </div>
    `;
}

// Results Section
function renderResultsSection() {
    return `
        <div class="projection-tab-content active" id="results-section">
            <!-- ANALYSIS RESULTS HEADER -->
            <div class="section-premium">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                    <div>
                        <h2 style="font-size: 14px; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; letter-spacing: -0.5px;">Analysis Results</h2>
                        <p style="font-size: 13px; color: var(--text-muted); font-weight: 500;">Project Alpha â€¢ Nov 9, 2025 at 5:55 AM</p>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <button class="btn btn-secondary" onclick="exportResultsPDF()">Export PDF</button>
                        <button class="btn btn-primary" onclick="shareResults()">Share</button>
                    </div>
                </div>

                <!-- KPI METRICS GRID -->
                <div class="metrics-grid">
                    <!-- ANNUAL ROI -->
                    <div class="metric-card green">
                        <div class="metric-icon-wrapper green">
                            ${Icons.results}
                        </div>
                        <span class="metric-label">Annual ROI</span>
                        <span class="metric-value green">57.8%</span>
                        <span class="metric-description">+12.3% vs baseline</span>
                    </div>

                    <!-- TOTAL HASHRATE -->
                    <div class="metric-card blue">
                        <div class="metric-icon-wrapper blue">
                            ${Icons.hashrate}
                        </div>
                        <span class="metric-label">Total Hashrate</span>
                        <span class="metric-value blue">124.6 PH/s</span>
                        <span class="metric-description">206 units deployed</span>
                    </div>

                    <!-- PAYBACK PERIOD -->
                    <div class="metric-card yellow">
                        <div class="metric-icon-wrapper yellow">
                            ${Icons.clock}
                        </div>
                        <span class="metric-label">Payback Period</span>
                        <span class="metric-value yellow">18 mo</span>
                        <span class="metric-description">6 mo faster than baseline</span>
                    </div>

                    <!-- BREAK-EVEN -->
                    <div class="metric-card purple">
                        <div class="metric-icon-wrapper purple">
                            ${Icons.check}
                        </div>
                        <span class="metric-label">Break-even</span>
                        <span class="metric-value purple">12 mo</span>
                        <span class="metric-description">Excellent performance</span>
                    </div>
                </div>
            </div>

            <!-- REVENUE & PROFITABILITY CHART -->
            <div class="section-premium" style="margin-top: 32px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <div>
                        <h2 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 2px; letter-spacing: -0.5px;">Revenue & Profitability Projection</h2>
                        <p style="font-size: 12px; color: var(--text-muted); font-weight: 500;">48-month forecast</p>
                    </div>
                </div>
                <div style="background: var(--gray-900); border: 1px solid var(--gray-700); border-radius: 12px; padding: 24px;">
                    <div style="position: relative; height: 400px;">
                        <canvas id="revenueChartAnalysis"></canvas>
                    </div>
                </div>
            </div>

            <!-- CASH FLOW AND COST BREAKDOWN -->
            <div class="section-premium" style="margin-top: 32px;">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <!-- CUMULATIVE CASH FLOW -->
                    <div style="background: var(--gray-900); border: 1px solid var(--gray-700); border-radius: 12px; padding: 24px;">
                        <div style="margin-bottom: 20px;">
                            <h3 style="font-size: 15px; font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">Cumulative Cash Flow</h3>
                            <p style="font-size: 12px; color: var(--text-muted);">Break-even analysis</p>
                        </div>
                        <div style="position: relative; height: 300px;">
                            <canvas id="cashflowChartAnalysis"></canvas>
                        </div>
                    </div>

                    <!-- COST BREAKDOWN -->
                    <div style="background: var(--gray-900); border: 1px solid var(--gray-700); border-radius: 12px; padding: 24px;">
                        <div style="margin-bottom: 20px;">
                            <h3 style="font-size: 15px; font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">Cost Breakdown</h3>
                            <p style="font-size: 12px; color: var(--text-muted);">CAPEX vs OPEX distribution</p>
                        </div>
                        <div style="position: relative; height: 300px;">
                            <canvas id="costChartAnalysis"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FINANCIAL METRICS TABLE -->
            <div class="section-premium" style="margin-top: 32px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <div>
                        <h2 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 2px; letter-spacing: -0.5px;">Financial Metrics</h2>
                        <p style="font-size: 12px; color: var(--text-muted); font-weight: 500;">4-year projection summary</p>
                    </div>
                </div>
                <div class="table-container">
                    <table class="table-premium">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Year 1</th>
                                <th>Year 2</th>
                                <th>Year 3</th>
                                <th>Year 4</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Revenue</td>
                                <td>$10,111,200</td>
                                <td>$9,403,216</td>
                                <td>$8,750,861</td>
                                <td>$8,149,301</td>
                                <td style="color: #8afd81; font-weight: 600;">$36,414,578</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">OPEX</td>
                                <td>$3,870,048</td>
                                <td>$3,870,048</td>
                                <td>$3,870,048</td>
                                <td>$3,870,048</td>
                                <td>$15,480,192</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Net Profit</td>
                                <td style="color: #8afd81; font-weight: 600;">$5,617,008</td>
                                <td style="color: #8afd81; font-weight: 600;">$4,979,851</td>
                                <td style="color: #8afd81; font-weight: 600;">$4,392,732</td>
                                <td style="color: #8afd81; font-weight: 600;">$3,851,328</td>
                                <td style="color: #8afd81; font-weight: 600;">$18,840,919</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

// Charts Section
function renderChartsSection() {
    return `
        <div class="projection-tab-content active" id="charts-section">
            <div class="section-premium">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <div>
                        <h2 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 2px; letter-spacing: -0.5px;">Financial Visualizations</h2>
                        <p style="font-size: 12px; color: var(--text-muted); font-weight: 500;">Interactive charts and projections</p>
                    </div>
                </div>
                <div id="chartsContent">
                    <div class="chart-container" style="background: var(--gray-900); border: 1px solid var(--gray-700); border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                        <h3 style="font-size: 15px; font-weight: 700; color: var(--text-primary); margin-bottom: 16px;">Cumulative Cash Flow (36 Months)</h3>
                        <div style="position: relative; height: 400px;">
                            <canvas id="cashflowChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container" style="background: var(--gray-900); border: 1px solid var(--gray-700); border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                        <h3 style="font-size: 15px; font-weight: 700; color: var(--text-primary); margin-bottom: 16px;">Monthly Revenue vs Costs</h3>
                        <div style="position: relative; height: 400px;">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container" style="background: var(--gray-900); border: 1px solid var(--gray-700); border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                        <h3 style="font-size: 15px; font-weight: 700; color: var(--text-primary); margin-bottom: 16px;">ROI Sensitivity Analysis (BTC Price Impact)</h3>
                        <div style="position: relative; height: 400px;">
                            <canvas id="sensitivityChart"></canvas>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 24px; margin-top: 32px;">
                        <div class="chart-container" style="background: var(--gray-900); border: 1px solid var(--gray-700); border-radius: 12px; padding: 24px;">
                            <h3 style="font-size: 15px; font-weight: 700; color: var(--text-primary); margin-bottom: 16px;">Monthly Cost Breakdown</h3>
                            <div style="position: relative; height: 300px;">
                                <canvas id="costBreakdownChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-container" style="background: var(--gray-900); border: 1px solid var(--gray-700); border-radius: 12px; padding: 24px;">
                            <h3 style="font-size: 15px; font-weight: 700; color: var(--text-primary); margin-bottom: 16px;">Network Hashrate Impact on Profitability</h3>
                            <div style="position: relative; height: 300px;">
                                <canvas id="hashrateImpactChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 12px; margin-top: 32px;">
                        <button class="btn btn-secondary" onclick="exportChartsAsImages()">Export Charts as Images</button>
                        <button class="btn btn-secondary" onclick="window.showProjectionSection('results')">Back to Results</button>
                    </div>
                </div>
                <div id="noCharts" style="display: none; text-align: center; padding: 60px 20px;">
                    <p style="color: var(--text-muted); font-size: 16px; margin-bottom: 24px;">No data to visualize. Please calculate ROI first.</p>
                    <button class="btn btn-primary" onclick="window.showProjectionSection('calculator')">Go to Calculator</button>
                </div>
            </div>
        </div>
    `;
}

// Monte Carlo Section
function renderMonteCarloSection() {
    return `
        <div class="projection-tab-content active" id="monte-carlo-section">
            <div class="section-premium">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <div>
                        <h2 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 2px; letter-spacing: -0.5px;">Monte Carlo Simulation</h2>
                        <p style="font-size: 12px; color: var(--text-muted); font-weight: 500;">Probabilistic analysis with 10,000 scenarios</p>
                    </div>
                </div>
                <div style="background: rgba(138, 253, 129, 0.1); border: 1px solid #8afd81; border-radius: 12px; padding: 16px; margin-bottom: 32px;">
                    <strong style="color: #8afd81;">Stochastic Modeling:</strong> 
                    <span style="color: var(--text-secondary);">This simulation runs 10,000 iterations with randomized BTC price, network hashrate, and electricity cost variations to provide probability distributions of outcomes.</span>
                </div>
                <div class="param-card" style="max-width: 600px;">
                    <div class="param-card-title">Simulation Parameters</div>
                    <div class="grid-2" style="margin-bottom: 20px;">
                        <div>
                            <label class="form-label">BTC Price Volatility (Â±%)</label>
                            <div style="position: relative;">
                                <input type="number" class="form-input" id="btcVolatility" value="30" style="padding-right: 40px;">
                                <span style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 13px;">%</span>
                            </div>
                        </div>
                        <div>
                            <label class="form-label">Hashrate Volatility (Â±%)</label>
                            <div style="position: relative;">
                                <input type="number" class="form-input" id="hashrateVolatility" value="20" style="padding-right: 40px;">
                                <span style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 13px;">%</span>
                            </div>
                        </div>
                        <div>
                            <label class="form-label">Number of Simulations</label>
                            <input type="number" class="form-input" id="numSimulations" max="50000" min="1000" step="1000" value="10000">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="runMonteCarlo()">Run Simulation</button>
                </div>
                <div id="monteCarloResults" style="display: none; margin-top: 32px;">
                    <div class="param-card">
                        <div class="param-card-title">Simulation Results</div>
                        <p style="color: var(--text-secondary); margin-bottom: 24px;">Break-even time distribution across all scenarios</p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 32px;">
                            <div style="padding: 16px; background: var(--gray-800); border-radius: 12px; text-align: center;">
                                <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">10th Percentile</div>
                                <div style="font-size: 24px; font-weight: 700; color: var(--text-primary);" id="p10">-- months</div>
                            </div>
                            <div style="padding: 16px; background: var(--gray-800); border-radius: 12px; text-align: center;">
                                <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">25th Percentile</div>
                                <div style="font-size: 24px; font-weight: 700; color: var(--text-primary);" id="p25">-- months</div>
                            </div>
                            <div style="padding: 16px; background: rgba(138, 253, 129, 0.1); border: 1px solid #8afd81; border-radius: 12px; text-align: center;">
                                <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">Median (50th)</div>
                                <div style="font-size: 24px; font-weight: 700; color: #8afd81;" id="p50">-- months</div>
                            </div>
                            <div style="padding: 16px; background: var(--gray-800); border-radius: 12px; text-align: center;">
                                <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">75th Percentile</div>
                                <div style="font-size: 24px; font-weight: 700; color: var(--text-primary);" id="p75">-- months</div>
                            </div>
                            <div style="padding: 16px; background: var(--gray-800); border-radius: 12px; text-align: center;">
                                <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">90th Percentile</div>
                                <div style="font-size: 24px; font-weight: 700; color: var(--text-primary);" id="p90">-- months</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" style="background: var(--gray-900); border: 1px solid var(--gray-700); border-radius: 12px; padding: 24px; margin-top: 24px;">
                        <h3 style="font-size: 15px; font-weight: 700; color: var(--text-primary); margin-bottom: 16px;">ROI Distribution Histogram</h3>
                        <div style="position: relative; height: 400px;">
                            <canvas id="monteCarloChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Projects List Section
function renderProjectsListSection() {
    return `
        <div class="projection-tab-content active" id="projects-section">
            <div class="section-premium">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <div>
                        <h2 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 2px; letter-spacing: -0.5px;">Saved Projects</h2>
                        <p style="font-size: 12px; color: var(--text-muted); font-weight: 500;">Manage and compare your mining scenarios</p>
                    </div>
                </div>
                <!-- PROJECTS TOOLBAR -->
                <div style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; align-items: center;">
                    <input class="form-input" id="projectSearch" onkeyup="filterProjects()" placeholder="Search projects..." style="flex: 1; min-width: 250px;" type="text"/>
                    <select class="form-input" id="projectSortBy" onchange="filterProjects()" style="width: 180px;">
                        <option value="date-desc">Newest First</option>
                        <option value="date-asc">Oldest First</option>
                        <option value="roi-desc">Highest ROI</option>
                        <option value="roi-asc">Lowest ROI</option>
                        <option value="capex-desc">Highest CAPEX</option>
                        <option value="capex-asc">Lowest CAPEX</option>
                    </select>
                    <button class="btn btn-secondary" onclick="window.showProjectionSection('calculator')">
                        ${Icons.projects} New Project
                    </button>
                </div>
                <!-- PROJECTS GRID -->
                <div id="projectsList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px;">
                    <!-- Projects will be loaded here -->
                </div>
                <div id="noProjects" style="text-align: center; padding: 60px 20px;">
                    <div style="width: 80px; height: 80px; margin: 0 auto 24px; background: var(--gray-800); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        ${Icons.projects}
                    </div>
                    <p style="color: var(--text-muted); font-size: 16px; margin-bottom: 8px;">No saved projects yet</p>
                    <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 40px;">Create your first mining analysis and save it</p>
                    <button class="btn btn-primary" onclick="window.showProjectionSection('calculator')">Create New Project</button>
                </div>
            </div>
        </div>
    `;
}

// Hardware Section
function renderHardwareSection() {
    return `
        <div class="projection-tab-content active" id="hardware-section">
            <div class="section-premium">
                <h2 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Mining Hardware Management</h2>
                <p style="font-size: 13px; color: var(--text-muted); margin-bottom: 32px;">ASIC fleet configuration and optimization - 2025 Models</p>

                <!-- ASIC CATALOG -->
                <div class="accordion-section collapsed">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title">
                            ${Icons.chevronDown}
                            ASIC Catalog 2025
                            <span class="accordion-badge">NEW MODELS</span>
                        </div>
                    </div>
                    <div class="accordion-content">
                        <p class="accordion-subtitle">Latest generation ASIC miners (2025 specifications)</p>
                        <div class="table-container">
                            <table class="table-premium">
                                <thead>
                                    <tr>
                                        <th>Model</th>
                                        <th>Hashrate</th>
                                        <th>Power</th>
                                        <th>Efficiency</th>
                                        <th>Price</th>
                                        <th>Daily Profit</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="font-weight: 600; color: var(--text-primary);">Antminer S21 Pro</td>
                                        <td>234 TH/s</td>
                                        <td>3,510W</td>
                                        <td>15 J/TH</td>
                                        <td style="color: #8afd81; font-weight: 600;">$5,600</td>
                                        <td style="color: #8afd81; font-weight: 600;">$7.80</td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: 600; color: var(--text-primary);">Antminer S21 XP</td>
                                        <td>270 TH/s</td>
                                        <td>3,645W</td>
                                        <td>13.5 J/TH</td>
                                        <td style="color: #8afd81; font-weight: 600;">$6,450</td>
                                        <td style="color: #8afd81; font-weight: 600;">$9.20</td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: 600; color: var(--text-primary);">Whatsminer M60S</td>
                                        <td>186 TH/s</td>
                                        <td>3,441W</td>
                                        <td>18.5 J/TH</td>
                                        <td style="color: #8afd81; font-weight: 600;">$3,400</td>
                                        <td style="color: #8afd81; font-weight: 600;">$5.22</td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: 600; color: var(--text-primary);">Whatsminer M63S</td>
                                        <td>390 TH/s</td>
                                        <td>7,215W</td>
                                        <td>18.5 J/TH</td>
                                        <td style="color: #8afd81; font-weight: 600;">$5,100</td>
                                        <td style="color: #8afd81; font-weight: 600;">$10.50</td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: 600; color: var(--text-primary);">Canaan Avalon Q</td>
                                        <td>120 TH/s</td>
                                        <td>3,200W</td>
                                        <td>26.7 J/TH</td>
                                        <td style="color: #8afd81; font-weight: 600;">$1,800</td>
                                        <td style="color: #8afd81; font-weight: 600;">$2.85</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- FLEET CALCULATOR -->
                <div class="accordion-section collapsed">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title">
                            ${Icons.chevronDown}
                            Fleet Configuration Calculator
                        </div>
                    </div>
                    <div class="accordion-content">
                        <div class="grid-2" style="margin-bottom: 20px;">
                            <div>
                                <label class="form-label">Select ASIC Model</label>
                                <select class="form-input" id="hw_asicModel" onchange="updateHardwareCalc()">
                                    <option value="s21pro">Antminer S21 Pro (234 TH/s)</option>
                                    <option value="s21xp">Antminer S21 XP (270 TH/s)</option>
                                    <option value="m60s">Whatsminer M60S (186 TH/s)</option>
                                    <option value="m63s">Whatsminer M63S (390 TH/s)</option>
                                    <option value="avalon">Canaan Avalon Q (120 TH/s)</option>
                                </select>
                            </div>
                            <div>
                                <label class="form-label">Number of Units</label>
                                <input type="number" class="form-input" id="hw_units" value="10" min="1" onchange="updateHardwareCalc()">
                            </div>
                            <div>
                                <label class="form-label">Electricity Cost ($/kWh)</label>
                                <input type="number" class="form-input" id="hw_elecCost" value="0.06" step="0.01" onchange="updateHardwareCalc()">
                            </div>
                            <div>
                                <label class="form-label">Operating Hours/Day</label>
                                <input type="number" class="form-input" id="hw_hours" value="24" min="1" max="24" onchange="updateHardwareCalc()">
                            </div>
                        </div>
                        <div style="background: var(--gray-800); padding: 20px; border-radius: 12px; border: 1px solid rgba(138, 253, 129, 0.2);">
                            <h3 style="font-size: 14px; margin-bottom: 16px; color: #8afd81; font-weight: 700;">Calculation Results</h3>
                            <div class="grid-2">
                                <div>
                                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Total Hashrate</p>
                                    <p style="font-size: 20px; font-weight: 700; color: var(--text-primary);" id="hw_totalHash">2,340 TH/s</p>
                                </div>
                                <div>
                                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Power Consumption</p>
                                    <p style="font-size: 20px; font-weight: 700; color: #8afd81;" id="hw_totalPower">35.1 kW</p>
                                </div>
                                <div>
                                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Daily Revenue</p>
                                    <p style="font-size: 20px; font-weight: 700; color: #8afd81;" id="hw_dailyRev">$780.00</p>
                                </div>
                                <div>
                                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Daily Profit</p>
                                    <p style="font-size: 20px; font-weight: 700; color: #8afd81;" id="hw_dailyProfit">$729.46</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Energy Section
function renderEnergySection() {
    return `
        <div class="projection-tab-content active" id="energy-section">
            <div class="section-premium">
                <h2 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Energy Management System</h2>
                <p style="font-size: 13px; color: var(--text-muted); margin-bottom: 32px;">Renewable energy integration and optimization</p>

                <!-- ENERGY MIX -->
                <div class="accordion-section collapsed">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title">
                            ${Icons.chevronDown}
                            Energy Mix Configuration
                            <span class="accordion-badge">RENEWABLE</span>
                        </div>
                    </div>
                    <div class="accordion-content">
                        <div class="grid-2">
                            <div>
                                <h4 style="color: #8afd81; margin-bottom: 16px; font-weight: 700;">${Icons.sun} Solar Power</h4>
                                <div style="margin-bottom: 16px;">
                                    <label class="form-label">Installed Capacity (MW)</label>
                                    <input type="number" class="form-input" id="en_solarCap" value="10" min="0" step="0.1" onchange="updateEnergyMix()">
                                </div>
                                <div>
                                    <label class="form-label">Panel Efficiency</label>
                                    <select class="form-input">
                                        <option>Monocrystalline (20%)</option>
                                        <option>Polycrystalline (17%)</option>
                                        <option>Thin Film (15%)</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: #8afd81; margin-bottom: 16px; font-weight: 700;">${Icons.wind} Wind Power</h4>
                                <div style="margin-bottom: 16px;">
                                    <label class="form-label">Installed Capacity (MW)</label>
                                    <input type="number" class="form-input" id="en_windCap" value="15" min="0" step="0.1" onchange="updateEnergyMix()">
                                </div>
                                <div>
                                    <label class="form-label">Turbine Efficiency</label>
                                    <select class="form-input">
                                        <option>Horizontal Axis (50%)</option>
                                        <option>Vertical Axis (35%)</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: #8afd81; margin-bottom: 16px; font-weight: 700;">${Icons.battery} Battery Storage</h4>
                                <div style="margin-bottom: 16px;">
                                    <label class="form-label">Storage Capacity (MWh)</label>
                                    <input type="number" class="form-input" id="en_batteryCap" value="20" min="0" step="0.5" onchange="updateEnergyMix()">
                                </div>
                                <div>
                                    <label class="form-label">Battery Type</label>
                                    <select class="form-input">
                                        <option>Li-ion</option>
                                        <option>LFP (LiFePO4)</option>
                                        <option>Flow Battery</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: #8afd81; margin-bottom: 16px; font-weight: 700;">${Icons.energy} Grid Power</h4>
                                <div style="margin-bottom: 16px;">
                                    <label class="form-label">Grid Connection (MW)</label>
                                    <input type="number" class="form-input" id="en_gridCap" value="5" min="0" step="0.1" onchange="updateEnergyMix()">
                                </div>
                                <div>
                                    <label class="form-label">Grid Rate ($/kWh)</label>
                                    <input type="number" class="form-input" value="0.08" step="0.01">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Infrastructure Section
function renderInfrastructureSection() {
    return `
        <div class="projection-tab-content active" id="infrastructure-section">
            <div class="section-premium">
                <h2 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Infrastructure Planning</h2>
                <p style="font-size: 13px; color: var(--text-muted); margin-bottom: 32px;">Facility design and cooling systems</p>

                <!-- COOLING SYSTEMS -->
                <div class="accordion-section collapsed">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title">
                            ${Icons.chevronDown}
                            Cooling Systems
                        </div>
                    </div>
                    <div class="accordion-content">
                        <div class="grid-2">
                            <div>
                                <label class="form-label">Cooling Type</label>
                                <select class="form-input" id="inf_coolingType">
                                    <option value="air">Air Cooling</option>
                                    <option value="hydro">Hydro Cooling</option>
                                    <option value="immersion">Immersion Cooling</option>
                                    <option value="hybrid">Hybrid System</option>
                                </select>
                            </div>
                            <div>
                                <label class="form-label">Cooling Capacity (MW)</label>
                                <input type="number" class="form-input" id="inf_coolingCap" value="30" min="1">
                            </div>
                            <div>
                                <label class="form-label">Target PUE</label>
                                <input type="number" class="form-input" id="inf_pue" value="1.2" min="1.0" max="2.0" step="0.1">
                            </div>
                            <div>
                                <label class="form-label">Inlet Temperature (Â°C)</label>
                                <input type="number" class="form-input" value="25" min="15" max="35">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Initialize Overview
export function initOverview() {
    // Fetch BTC price
    async function fetchBTC() {
        try {
            const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd');
            const data = await res.json();
            const price = data.bitcoin.usd;
            const priceEl = document.getElementById('overviewbtc');
            if (priceEl) {
                priceEl.textContent = '$' + price.toLocaleString();
            }
        } catch (e) {
            console.error('Error fetching BTC price:', e);
        }
    }
    
    fetchBTC();
    setInterval(fetchBTC, 60000); // Update every minute
    
    // Update last update time
    const updateTime = () => {
        const lastUpdateEl = document.getElementById('lastUpdate');
        if (lastUpdateEl) {
            lastUpdateEl.textContent = 'Just now';
        }
    };
    updateTime();
}

// Initialize Calculator
export function initCalculator() {
    console.log('Initializing Calculator Section');
    
    // Stepper logic
    let currentStep = 0;
    const totalSteps = 8; // 0-indexed, so 8 steps total

    window.goToStep = (step) => {
        if (step >= 0 && step < totalSteps) {
            document.querySelectorAll('#calculator-section .step-content').forEach(content => {
                content.classList.remove('active');
            });
            const stepContent = document.getElementById('step-' + step);
            if (stepContent) {
                stepContent.classList.add('active');
            }

            document.querySelectorAll('#calculator-section .stepper .step').forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed');
                if (index < step) {
                    stepEl.classList.add('completed');
                } else if (index === step) {
                    stepEl.classList.add('active');
                }
            });

            const progress = (step / (totalSteps - 1)) * 100;
            const progressBar = document.getElementById('stepperProgress');
            if (progressBar) {
                progressBar.style.width = progress + '%';
            }
            currentStep = step;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    };

    window.nextStep = () => {
        if (currentStep < totalSteps - 1) {
            window.goToStep(currentStep + 1);
        }
    };

    window.prevStep = () => {
        if (currentStep > 0) {
            window.goToStep(currentStep - 1);
        }
    };

    window.setHorizon = (mode, value) => {
        const modeSelect = document.getElementById('horizonMode');
        const valueInput = document.getElementById('horizonValue');
        if (modeSelect) modeSelect.value = mode;
        if (valueInput) valueInput.value = value;
    };

    // Machine card selection
    setTimeout(() => {
        document.querySelectorAll('#calculator-section .machine-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('#calculator-section .machine-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                // Update machine specs based on selection
                const machineModel = this.getAttribute('data-machine');
                updateMachineSpecs(machineModel);
            });
        });
    }, 100);

    // Update machine specs function
    const updateMachineSpecs = (model) => {
        const specs = {
            's21pro': { hashrate: 234, power: 3510, efficiency: 15.0, price: 4007.85 },
            's23hydro': { hashrate: 605, power: 5870, efficiency: 9.7, price: 8500 },
            'm60s': { hashrate: 372, power: 7200, efficiency: 19.4, price: 5800 },
            'custom': { hashrate: 200, power: 3000, efficiency: 15.0, price: 5000 } // Default custom values
        };
        
        const spec = specs[model];
        if (spec) {
            const hashrateInput = document.getElementById('machineHashrate');
            const powerInput = document.getElementById('machinePower');
            const efficiencyInput = document.getElementById('machineEfficiency');
            const priceInput = document.getElementById('machinePrice');
            
            if (hashrateInput) hashrateInput.value = spec.hashrate;
            if (powerInput) powerInput.value = spec.power;
            if (efficiencyInput) efficiencyInput.value = spec.efficiency;
            if (priceInput) priceInput.value = spec.price;
        }
    };

    // Calculate projection function
    window.calculateProjection = () => {
        console.log('Calculating projection...');
        // Navigate to results section
        if (window.showProjectionSection) {
            window.showProjectionSection('results');
        }
    };

    // Initial setup
    setTimeout(() => {
        window.goToStep(0);
        updateMachineSpecs('s23hydro'); // Set default machine specs
    }, 200);
}

// Toggle accordion
window.toggleAccordion = function(element) {
    const section = element.closest('.accordion-section');
    if (section) {
        section.classList.toggle('collapsed');
    }
};

// Refresh news feed
window.refreshNewsFeed = function() {
    const container = document.getElementById('newsFeedContainer');
    if (container) {
        container.innerHTML = renderNewsItems();
    }
};

// Initialize Results
export function initResults() {
    console.log('Initializing Results Section');
    // Placeholder for chart initialization
    // Charts would be initialized here using Chart.js or similar library
}

// Initialize Charts
export function initCharts() {
    console.log('Initializing Charts Section');
    // Placeholder for chart initialization
    // Charts would be initialized here using Chart.js or similar library
}

// Initialize Monte Carlo
export function initMonteCarlo() {
    console.log('Initializing Monte Carlo Section');
    
    window.runMonteCarlo = () => {
        console.log('Running Monte Carlo simulation...');
        const resultsDiv = document.getElementById('monteCarloResults');
        if (resultsDiv) {
            resultsDiv.style.display = 'block';
            // Placeholder for actual simulation logic
            // This would run the actual Monte Carlo simulation
        }
    };
}

// Initialize Projects List
export function initProjectsList() {
    console.log('Initializing Projects List Section');
    
    window.filterProjects = () => {
        console.log('Filtering projects...');
        // Placeholder for project filtering logic
    };
}

// Initialize Hardware
export function initHardware() {
    console.log('Initializing Hardware Section');
    
    window.updateHardwareCalc = () => {
        console.log('Updating hardware calculations...');
        // Placeholder for hardware calculation logic
        // This would update the calculation results based on selected ASIC model and units
    };
}

// Initialize Energy
export function initEnergy() {
    console.log('Initializing Energy Section');
    
    window.updateEnergyMix = () => {
        console.log('Updating energy mix...');
        // Placeholder for energy mix calculation logic
    };
}

// Initialize Infrastructure
export function initInfrastructure() {
    console.log('Initializing Infrastructure Section');
    // Placeholder for infrastructure initialization
}

// Export/Share functions
window.exportResultsPDF = () => {
    console.log('Exporting results to PDF...');
    // Placeholder for PDF export logic
};

window.shareResults = () => {
    console.log('Sharing results...');
    // Placeholder for share functionality
};

window.exportChartsAsImages = () => {
    console.log('Exporting charts as images...');
    // Placeholder for chart export logic
};



â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/jobs.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Jobs View - Complete Implementation with Export
import API from '../api.js';
import Modal from '../components/modal.js';
import notify from '../components/notification.js';
import exportModule from '../export.js';
import { Icons } from '../icons.js';

export async function renderJobsView() {
    try {
        const { jobs } = await API.getJobs();
        
        // Make export function global
        window.exportJobs = async () => {
            notify.info('Generating PDF...');
            await exportModule.exportJobsPDF(jobs);
            notify.success('PDF generated! Check your downloads.');
        };
        
        return `
            <div class="jobs-view">
                <div class="jobs-content">
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Project</th>
                                    <th>Type</th>
                                    <th>Status</th>
                                    <th>Created</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${renderJobRows(jobs || [])}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        `;
    } catch (error) {
        console.error('Error loading jobs:', error);
        notify.error('Failed to load jobs: ' + error.message);
        return `
            <div class="card">
                <div class="card-body">
                    <h3 class="text-danger">Error loading jobs</h3>
                    <p class="text-secondary">${error.message}</p>
                </div>
            </div>
        `;
    }
}

function renderJobRows(jobs) {
    if (!jobs.length) {
        return `
            <tr>
                <td colspan="6" class="text-center">
                    <div style="padding: 40px;">
                        <h3 class="text-primary mb-md">No jobs yet</h3>
                        <p class="text-secondary">Create a job to start working with Claude!</p>
                    </div>
                </td>
            </tr>
        `;
    }
    
    return jobs.map(job => `
        <tr>
            <td><code>${job.id.substring(0, 8)}</code></td>
            <td><strong>${job.project?.name || 'Unknown'}</strong></td>
            <td><span class="badge badge-neutral">${job.type}</span></td>
            <td><span class="badge badge-${getJobStatusClass(job.status)} badge-dot">${job.status}</span></td>
            <td class="text-muted">${formatDate(job.created_at)}</td>
            <td>
                <button class="btn btn-sm btn-ghost" onclick="viewJob('${job.id}')">View</button>
            </td>
        </tr>
    `).join('');
}

function getJobStatusClass(status) {
    const statusMap = {
        success: 'success',
        running: 'info',
        pending: 'warning',
        failed: 'danger',
        cancelled: 'neutral'
    };
    return statusMap[status] || 'neutral';
}

function formatDate(dateString) {
    if (!dateString) return '-';
    const date = new Date(dateString);
    return date.toLocaleString('en-US', { 
        month: 'short', 
        day: 'numeric', 
        hour: '2-digit', 
        minute: '2-digit' 
    });
}

export const jobsStyles = `
<style>
.jobs-view {
    padding: 0;
    width: 100%;
}

.jobs-content {
    width: 100%;
}


.view-title {
    font-size: 24px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.table-container {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    overflow: hidden;
}

.table {
    width: 100%;
    border-collapse: collapse;
}

.table thead {
    background: var(--bg-tertiary);
}

.table th {
    padding: var(--spacing-md);
    text-align: left;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
}

.table td {
    padding: var(--spacing-md);
    border-top: 1px solid var(--border-color);
    color: var(--text-primary);
}

.table tbody tr {
    transition: background var(--transition-fast);
}

.table tbody tr:hover {
    background: var(--bg-hover);
}

.text-center {
    text-align: center;
}

.text-muted {
    color: var(--text-muted);
}

code {
    font-family: 'Courier New', monospace;
    background: var(--bg-tertiary);
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 12px;
    color: var(--accent-primary);
}

.badge-dot::before {
    content: 'â—';
    margin-right: 6px;
}

/* Responsive */
@media (max-width: 768px) {
    .table-container {
        overflow-x: auto;
    }
    
    .table {
        min-width: 600px;
    }
}
</style>
`;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/versions.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Versions View - Complete Implementation
import API from '../api.js';
import Modal from '../components/modal.js';
import notify from '../components/notification.js';
import { Icons } from '../icons.js';

export async function renderVersionsView() {
    try {
        // Pour l'instant, affichage simple
        // TODO: ImplÃ©menter API.getVersions() dans le backend
        
        return `
            <div class="versions-view">
                <div class="versions-content">
                    <div class="section">
                        <div class="section-header">
                            <div class="filters">
                                <select class="filter-select" id="version-project-filter">
                                    <option value="">All Projects</option>
                                </select>
                                <select class="filter-select" id="version-status-filter">
                                    <option value="">All Statuses</option>
                                    <option value="stable">Stable Only</option>
                                    <option value="draft">Draft Only</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="card-grid">
                            ${renderVersionsPlaceholder()}
                        </div>
                    </div>
                </div>
            </div>
        `;
    } catch (error) {
        console.error('Error loading versions:', error);
        return `
            <div class="card">
                <div class="card-body">
                    <h3 class="text-danger">Error loading versions</h3>
                    <p class="text-secondary">${error.message}</p>
                </div>
            </div>
        `;
    }
}

function renderVersionsPlaceholder() {
    return `
        <div class="card">
            <div class="card-body text-center">
                <div class="placeholder-icon">${Icons.versions}</div>
                <h3 class="text-primary mb-md">Versions Feature</h3>
                <p class="text-secondary mb-md">
                    Version management system allows you to:
                </p>
                <ul class="feature-list">
                    <li>Track code changes across iterations</li>
                    <li>Mark stable versions for production</li>
                    <li>Compare different versions</li>
                    <li>Rollback to previous versions</li>
                </ul>
                <p class="text-muted mt-md">
                    Versions are automatically created when jobs complete successfully.
                </p>
            </div>
        </div>
    `;
}

export const versionsStyles = `
<style>
.versions-view {
    padding: 0;
    width: 100%;
}

.versions-content {
    width: 100%;
}

.section-header {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    margin-bottom: var(--spacing-lg);
}

.filters {
    display: flex;
    gap: var(--spacing-md);
}

.filter-select {
    padding: 12px 16px;
    background: #141414;
    border: 1px solid #252525;
    border-radius: 12px;
    color: #FFFFFF;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-select:hover {
    border-color: var(--accent-primary);
}

.filter-select:focus {
    outline: none;
    border-color: var(--accent-primary);
}

.placeholder-icon {
    font-size: 64px;
    color: var(--accent-primary);
    margin-bottom: var(--spacing-lg);
    opacity: 0.5;
}

.feature-list {
    text-align: left;
    max-width: 400px;
    margin: 0 auto;
    list-style: none;
    padding: 0;
}

.feature-list li {
    padding: 8px 0;
    padding-left: 24px;
    position: relative;
    color: var(--text-secondary);
}

.feature-list li::before {
    content: '';
    position: absolute;
    left: 0;
    width: 16px;
    height: 16px;
    background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 6L9 17L4 12' stroke='%238afd81' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    color: var(--accent-primary);
    font-weight: bold;
}

/* Responsive */
@media (max-width: 768px) {
    .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-md);
    }
    
    .filters {
        flex-direction: column;
        width: 100%;
    }
    
    .filter-select {
        width: 100%;
    }
}
</style>
`;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/prompts.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Prompts View - Complete Implementation
import API from '../api.js';
import Modal from '../components/modal.js';
import notify from '../components/notification.js';
import { Icons } from '../icons.js';

export async function renderPromptsView() {
    try {
        // Pour l'instant, affichage simple
        // TODO: ImplÃ©menter API.getPrompts() dans le backend
        
        return `
            <div class="prompts-view">
                <div class="prompts-content">
                    <div class="section">
                        <div class="card-grid">
                            ${renderPromptsPlaceholder()}
                        </div>
                    </div>
                </div>
            </div>
        `;
    } catch (error) {
        console.error('Error loading prompts:', error);
        return `
            <div class="card">
                <div class="card-body">
                    <h3 class="text-danger">Error loading prompts</h3>
                    <p class="text-secondary">${error.message}</p>
                </div>
            </div>
        `;
    }
}

function renderPromptsPlaceholder() {
    return `
        <div class="card">
            <div class="card-body text-center">
                <div class="placeholder-icon">${Icons.prompts}</div>
                <h3 class="text-primary mb-md">Prompt Templates</h3>
                <p class="text-secondary mb-md">
                    Save and reuse your best Claude prompts:
                </p>
                <ul class="feature-list">
                    <li>Create reusable prompt templates</li>
                    <li>Organize by categories (debug, refactor, etc.)</li>
                    <li>Use variables for dynamic content</li>
                    <li>Share prompts across projects</li>
                </ul>
                <p class="text-muted mt-md">
                    Coming soon: Build your prompt library for faster job creation.
                </p>
            </div>
        </div>
    `;
}

export const promptsStyles = `
<style>
.prompts-view {
    padding: 0;
    width: 100%;
}

.prompts-content {
    width: 100%;
}

.placeholder-icon {
    font-size: 64px;
    color: var(--accent-primary);
    margin-bottom: var(--spacing-lg);
    opacity: 0.5;
}

.feature-list {
    text-align: left;
    max-width: 400px;
    margin: 0 auto;
    list-style: none;
    padding: 0;
}

.feature-list li {
    padding: 8px 0;
    padding-left: 24px;
    position: relative;
    color: var(--text-secondary);
}

.feature-list li::before {
    content: '';
    position: absolute;
    left: 0;
    width: 16px;
    height: 16px;
    background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 6L9 17L4 12' stroke='%238afd81' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    color: var(--accent-primary);
    font-weight: bold;
}

/* Responsive */
@media (max-width: 768px) {
    .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-md);
    }
}
</style>
`;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/logs.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Logs View - Complete Implementation
import API from '../api.js';
import Modal from '../components/modal.js';
import notify from '../components/notification.js';
import { Icons } from '../icons.js';

export async function renderLogsView() {
    try {
        // Pour l'instant, affichage simple
        // TODO: ImplÃ©menter API.getLogs() dans le backend
        
        return `
            <div class="logs-view">
                <div class="logs-content">
                    <div class="section">
                        <div class="section-header">
                            <div class="filters">
                                <select class="filter-select" id="log-level-filter">
                                    <option value="">All Levels</option>
                                    <option value="info">Info</option>
                                    <option value="success">Success</option>
                                    <option value="warning">Warning</option>
                                    <option value="error">Error</option>
                                </select>
                                <button class="btn btn-sm btn-ghost" onclick="window.refreshLogs()">
                                    <span class="icon-inline">${Icons.refresh}</span> Refresh
                                </button>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-body">
                                ${renderLogsPlaceholder()}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    } catch (error) {
        console.error('Error loading logs:', error);
        return `
            <div class="card">
                <div class="card-body">
                    <h3 class="text-danger">Error loading logs</h3>
                    <p class="text-secondary">${error.message}</p>
                </div>
            </div>
        `;
    }
}

function renderLogsPlaceholder() {
    return `
        <div class="text-center">
            <div class="placeholder-icon">${Icons.logs}</div>
            <h3 class="text-primary mb-md">Activity Logs</h3>
            <p class="text-secondary mb-md">
                Track all system activities:
            </p>
            <ul class="feature-list">
                <li>Job executions and results</li>
                <li>Project creations and updates</li>
                <li>Version deployments</li>
                <li>System events and errors</li>
            </ul>
            <p class="text-muted mt-md">
                All activities are logged for audit and debugging purposes.
            </p>
        </div>
    `;
}

// Global function pour refresh
window.refreshLogs = async () => {
    notify.info('Refreshing logs...');
    // TODO: ImplÃ©menter le refresh rÃ©el
    setTimeout(() => {
        notify.success('Logs refreshed');
    }, 1000);
};

export const logsStyles = `
<style>
.logs-view {
    padding: 0;
    width: 100%;
}

.logs-content {
    width: 100%;
}

.section-header {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    margin-bottom: var(--spacing-lg);
}

.filters {
    display: flex;
    gap: var(--spacing-md);
    align-items: center;
}

.filter-select {
    padding: 12px 16px;
    background: #141414;
    border: 1px solid #252525;
    border-radius: 12px;
    color: #FFFFFF;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-select:hover {
    border-color: var(--accent-primary);
}

.filter-select:focus {
    outline: none;
    border-color: var(--accent-primary);
}

.placeholder-icon {
    font-size: 64px;
    color: var(--accent-primary);
    margin-bottom: var(--spacing-lg);
    opacity: 0.5;
}

.feature-list {
    text-align: left;
    max-width: 400px;
    margin: 0 auto;
    list-style: none;
    padding: 0;
}

.feature-list li {
    padding: 8px 0;
    padding-left: 24px;
    position: relative;
    color: var(--text-secondary);
}

.feature-list li::before {
    content: '';
    position: absolute;
    left: 0;
    width: 16px;
    height: 16px;
    background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 6L9 17L4 12' stroke='%238afd81' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    color: var(--accent-primary);
    font-weight: bold;
}

/* Responsive */
@media (max-width: 768px) {
    .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-md);
    }
    
    .filters {
        flex-direction: column;
        width: 100%;
    }
    
    .filter-select {
        width: 100%;
    }
}
</style>
`;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: frontend/js/views/settings.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Settings View - HEARST STYLE
import { Icons } from '../icons.js';

export async function renderSettingsView() {
    return `
        <div class="settings-view">
            <div class="settings-content">
                <!-- Zone de contenu dynamique pour chaque section -->
                <div id="settings-sections-container">
                    <!-- Le contenu sera injectÃ© dynamiquement -->
                </div>
            </div>
        </div>
    `;
}

// Section titles mapping
export const settingsSectionTitles = {
    versions: { title: 'Versions', subtitle: 'Manage project versions' },
    prompts: { title: 'Prompts', subtitle: 'Manage AI prompts' },
    logs: { title: 'Logs', subtitle: 'View system logs' }
};

export const settingsStyles = `
    <style>
        /* Settings View Styles - HEARST Design System */
        /* Note: Les styles de navigation sont dans cockpit.css */

        .settings-view {
            padding: 0;
            width: 100%;
        }

        .settings-content {
            width: 100%;
        }
    </style>
`;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: dev-server.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Simple Development Server for Claude CI/CD Cockpit Frontend
// Usage: node dev-server.js

const http = require('http');
const fs = require('fs');
const path = require('path');

const PORT = 3000;
const FRONTEND_DIR = path.join(__dirname, 'frontend');

const MIME_TYPES = {
    '.html': 'text/html',
    '.css': 'text/css',
    '.js': 'application/javascript',
    '.json': 'application/json',
    '.png': 'image/png',
    '.jpg': 'image/jpeg',
    '.svg': 'image/svg+xml'
};

const server = http.createServer((req, res) => {
    // Remove query string and normalize path
    let filePath = req.url.split('?')[0];
    
    // Default to index.html for root
    if (filePath === '/') {
        filePath = '/index.html';
    }
    
    const fullPath = path.join(FRONTEND_DIR, filePath);
    const ext = path.extname(filePath);
    const contentType = MIME_TYPES[ext] || 'text/plain';
    
    // Security check - prevent directory traversal
    if (!fullPath.startsWith(FRONTEND_DIR)) {
        res.writeHead(403);
        res.end('Forbidden');
        return;
    }
    
    fs.readFile(fullPath, (err, content) => {
        if (err) {
            if (err.code === 'ENOENT') {
                res.writeHead(404);
                res.end('File not found');
            } else {
                res.writeHead(500);
                res.end('Server error: ' + err.code);
            }
        } else {
            res.writeHead(200, { 
                'Content-Type': contentType,
                'Cache-Control': 'no-cache'
            });
            res.end(content);
        }
    });
});

server.listen(PORT, () => {
    console.log('');
    console.log('ðŸš€ Claude CI/CD Cockpit - Development Server');
    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
    console.log(`âœ… Server running at: http://localhost:${PORT}`);
    console.log(`ðŸ“ Serving from: ${FRONTEND_DIR}`);
    console.log('');
    console.log('Press Ctrl+C to stop');
    console.log('');
});


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE: package.json
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

{
  "name": "hearstai-cockpit",
  "version": "1.0.0",
  "description": "HearstAI - Claude CI/CD Cockpit",
  "main": "backend/server.js",
  "scripts": {
    "dev": "node dev-server.js",
    "start": "node backend/server.js",
    "build": "echo 'No build step required'"
  },
  "dependencies": {
    "better-sqlite3": "^9.2.2",
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "multer": "^2.0.2",
    "uuid": "^9.0.1"
  },
  "engines": {
    "node": ">=18.x"
  }
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIN DU FICHIER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
